{"version":3,"sources":["../../../../../../../../usr/local/lib/node_modules/browserify/node_modules/browser-pack/_prelude.js","client.js","../../index.js","resources/root.js","../../lib/resource.js","../../lib/response.js","../../lib/road.js","../../lib/middleware.js","../../../../../../../../usr/local/lib/node_modules/browserify/node_modules/util/util.js","../../../../../../../../usr/local/lib/node_modules/browserify/node_modules/util/support/isBufferBrowser.js","../../../../../../../../usr/local/lib/node_modules/browserify/node_modules/querystring-es3/index.js","../../../../../../../../usr/local/lib/node_modules/browserify/node_modules/url/url.js","../../../../../../../../usr/local/lib/node_modules/browserify/node_modules/process/browser.js","../../../../../../../../usr/local/lib/node_modules/browserify/node_modules/querystring-es3/decode.js","../../../../../../../../usr/local/lib/node_modules/browserify/node_modules/querystring-es3/encode.js","../../../../../../../../usr/local/lib/node_modules/browserify/node_modules/punycode/punycode.js","../../node_modules/bluebird/js/browser/bluebird.js","../../../../../../../../usr/local/lib/node_modules/browserify/node_modules/inherits/inherits_browser.js"],"names":["roads","require","road","Road","many","request","then","response","console","log","module","exports","Promise","Resource","Response","middleware","HttpError","message","code","this","Error","captureStackTrace","invalid_request","unauthorized","not_found","inherits","methods","GET","url","body","headers","VALID_METHODS","definition","routes","resources","valid_methods","_init","init","context","method","i","meth_len","length","push","prototype","allowsMethod","indexOf","getValidMethods","getResourceKey","request_url","url_part","route","isNaN","Number","key","substring","value","status","writeToServer","http_response","writeHead","write","JSON","stringify","url_module","qs_module","Bluebird","root_resource","_request_chain","use","fn","parse","_parseBody","e","resolve","reject","_buildRoute","_executeRoute","route_response","content_type","Array","isArray","request_method","parsed_url","request_body","request_headers","_self","resource","_locateResource","http_methods","resource_context","_buildRequestChainQueue","progress","next","_createCoroutine","call","_locateRoute","pathname","constructor","name","coroutine","result","replace","parts","split","part","shift","resource_info","args","server","http_request","api","on","chunk","read","writeResponse","end","error","err","locateOrigin","origin","allowed_origins","cors_methods","killSlash","path","accept","location","cors","allow_origins","allow_headers","uri","cors_headers","concat","allowed_origin","Access-Control-Allow-Methods","join","Access-Control-Allow-Headers","Access-Control-Allow-Origin","Access-Control-Allow-Credentials","inspect","obj","opts","ctx","seen","stylize","stylizeNoColor","arguments","depth","colors","isBoolean","showHidden","_extend","isUndefined","customInspect","stylizeWithColor","formatValue","str","styleType","style","styles","arrayToHash","array","hash","forEach","val","idx","recurseTimes","isFunction","ret","isString","primitive","formatPrimitive","keys","Object","visibleKeys","getOwnPropertyNames","isError","formatError","isRegExp","RegExp","toString","isDate","Date","base","braces","n","toUTCString","output","formatArray","map","formatProperty","pop","reduceToSingleString","simple","isNumber","isNull","l","hasOwnProperty","String","match","desc","getOwnPropertyDescriptor","get","set","line","substr","numLinesEst","reduce","prev","cur","ar","arg","isNullOrUndefined","isSymbol","re","isObject","objectToString","d","isPrimitive","o","pad","timestamp","time","getHours","getMinutes","getSeconds","getDate","months","getMonth","prop","formatRegExp","format","f","objects","len","x","_","deprecate","msg","deprecated","warned","process","throwDeprecation","traceDeprecation","trace","apply","global","noDeprecation","debugs","debugEnviron","debuglog","env","NODE_DEBUG","toUpperCase","test","pid","bold","italic","underline","inverse","white","grey","black","blue","cyan","green","magenta","red","yellow","special","number","boolean","undefined","null","string","date","regexp","isBuffer","add","copy","fill","readUInt8","decode","encode","Url","protocol","slashes","auth","host","port","hostname","search","query","href","urlParse","parseQueryString","slashesDenoteHost","u","urlFormat","urlResolve","source","relative","urlResolveObject","resolveObject","punycode","protocolPattern","portPattern","delims","unwise","autoEscape","nonHostChars","hostEndingChars","hostnameMaxLen","hostnamePartPattern","hostnamePartStart","unsafeProtocol","javascript","javascript:","hostlessProtocol","slashedProtocol","http","https","ftp","gopher","file","http:","https:","ftp:","gopher:","file:","querystring","TypeError","rest","trim","proto","exec","lowerProto","toLowerCase","hostEnd","hec","atSign","lastIndexOf","slice","decodeURIComponent","parseHost","ipv6Hostname","hostparts","newpart","j","k","charCodeAt","validParts","notHost","bit","unshift","domainArray","newOut","s","p","h","ae","esc","encodeURIComponent","escape","qm","charAt","rel","relPath","isSourceAbs","isRelAbs","mustEndAbs","removeAllDots","srcPath","psychotic","authInHost","last","hasTrailingSlash","up","splice","isAbsolute","noop","nextTick","canSetImmediate","window","setImmediate","canMutationObserver","MutationObserver","canPost","postMessage","addEventListener","queue","hiddenDiv","document","createElement","observer","queueList","observe","attributes","setAttribute","ev","data","stopPropagation","setTimeout","title","browser","argv","addListener","once","off","removeListener","removeAllListeners","emit","binding","cwd","chdir","dir","qs","sep","eq","options","maxKeys","kstr","vstr","v","xs","res","stringifyPrimitive","isFinite","objectKeys","ks","root","type","RangeError","errors","mapDomain","regexSeparators","ucs2decode","extra","counter","ucs2encode","stringFromCharCode","basicToDigit","codePoint","digitToBasic","digit","flag","adapt","delta","numPoints","firstTime","floor","damp","baseMinusTMin","tMax","skew","input","out","basic","index","oldi","w","t","baseMinusT","inputLength","initialN","bias","initialBias","delimiter","maxInt","tMin","handledCPCount","basicLength","m","q","currentValue","handledCPCountPlusOne","qMinusT","toUnicode","domain","regexPunycode","toASCII","regexNonASCII","freeExports","freeModule","freeGlobal","overflow","not-basic","invalid-input","Math","fromCharCode","version","ucs2","define","amd","nodeType","self","r","a","_dereq_",1,"any","promises","SomePromiseArray","promise","setHowMany","setUnwrap","_SomePromiseArray",2,"Async","_isTickUsed","_lateQueue","Queue","_normalQueue","_trampolineEnabled","drainQueues","_drainQueues","_schedule","schedule","isStatic","AsyncInvokeLater","receiver","_withDomain","_queueTick","AsyncInvoke","AsyncSettlePromises","_pushOne","firstLineError","_process","util","disableTrampolineIfNecessary","hasDevTools","enableTrampoline","haveItemsQueued","bind","throwLater","invokeLater","invoke","settlePromises","_settlePromises","invokeFirst","_drainQueue","_reset","./queue.js","./schedule.js","./util.js",3,"INTERNAL","tryConvertToPromise","rejectThis","_reject","targetRejected","promiseRejectionQueued","bindingPromise","_then","bindingResolved","thisArg","_setBoundTo","_isPending","_resolveCallback","target","bindingRejected","maybePromise","_propagateFrom","_target","_progress","_bitField","_boundTo","_isBound",4,"noConflict","bluebird","old","./promise.js",5,"cr","create","callerCache","getterCache","ensureMethod","methodName","classString","caller","namedGetter","indexedGetter","max","getGetter","canEvaluate","isIdentifier","$_len","$_i","propertyName","getter","isIndex","maybeGetter",6,"async","CancellationError","_cancel","reason","isCancellable","parent","promiseToReject","_cancellationParent","_unsetCancellable","_rejectCallback","cancel","cancellable","_cancellable","_setCancellable","uncancellable","fork","didFulfill","didReject","didProgress","./async.js","./errors.js",7,"CapturedTrace","_parent","_length","uncycle","reconstructStack","stacks","removeDuplicateOrEmptyJumps","removeCommonRoots","current","currentLastIndex","currentLastLine","commonRootMeetPoint","cleanStack","stack","isTraceLine","stackFramePattern","isInternalFrame","shouldIgnore","indentStackFrames","stackFramesAsArray","formatNonError","ruselessToString","newStr","snip","maxChars","parseLineInfo","matches","parseLineInfoRegex","fileName","parseInt","warn","bluebirdFramePattern","formatStack","nodes","stackToIndex","node","currentStack","cycleEdgeNode","currentChildLength","hasParent","attachExtraTrace","__stackCleaned__","parsed","parseStackAndMessage","notEnumerableProp","formatAndLogError","unhandledRejection","isSupported","fireRejectionEvent","localHandler","localEventFired","globalEventFired","fireGlobalEvent","domEventFired","fireDomEvent","setBounds","lastLineError","firstFileName","lastFileName","firstStackLines","lastStackLines","firstIndex","lastIndex","info","v8stackFramePattern","v8stackFormatter","stackTraceLimit","ignoreUntil","hasStackAfterThrow","isNode","customEventWorks","anyEventWorks","CustomEvent","event","createEvent","initCustomEvent","dispatchEvent","detail","bubbles","cancelable","toWindowMethodNameMap","stderr","isTTY",8,"NEXT_FILTER","CatchFilter","instances","callback","_instances","_callback","_promise","safePredicate","predicate","safeObject","retfilter","tryCatch","errorObj","safeKeys","doFilter","cb","boundTo","item","itemIsErrorType","shouldHandle","./es5.js",9,"isDebugging","Context","_trace","peekContext","createContext","contextStack","_pushContext","_popContext","_peekContext",10,"unhandledRejectionHandled","possiblyUnhandledRejection","Warning","canAttachTrace","debugging","_ensurePossibleRejectionHandled","_setRejectionIsUnhandled","_notifyUnhandledRejection","_notifyUnhandledRejectionIsHandled","_isRejectionUnhandled","_getCarriedStackTrace","_settledValue","_setUnhandledRejectionIsNotified","_unsetUnhandledRejectionIsNotified","_isUnhandledRejectionNotified","_unsetRejectionIsUnhandled","_setCarriedStackTrace","capturedTrace","_fulfillmentHandler0","_isCarryingStackTrace","_captureStackTrace","_attachExtraTrace","ignoreSelf","_warn","warning","onPossiblyUnhandledRejection","onUnhandledRejectionHandled","longStackTraces","hasLongStackTraces",11,"wrapsPrimitiveReceiver","returner","thrower","wrapper","action","thenReturn","thenThrow",12,"PromiseReduce","each",13,"subError","nameProperty","defaultMessage","SubError","OperationalError","cause","_TypeError","_RangeError","es5","Objectfreeze","freeze","TimeoutError","AggregateError","defineProperty","configurable","writable","enumerable","level","indent","lines","errorTypes","RejectionError",14,"isES5","getDescriptor","names","getPrototypeOf","propertyIsWritable","descriptor","has","ObjectKeys","ObjectGetDescriptor","ObjectDefineProperty","ObjectFreeze","ObjectGetPrototypeOf","ArrayIsArray",15,"PromiseMap","filter",16,"returnThis","throwThis","return$","throw$","promisedFinally","reasonOrValue","isFulfilled","finallyHandler","handler","isRejected","tapHandler","_passThroughHandler","isFinally","promiseAndHandler","lastly","tap",17,"apiRejection","promiseFromYieldHandler","yieldHandlers","traceParent","PromiseSpawn","generatorFunction","yieldHandler","_stack","_generatorFunction","_receiver","_generator","_yieldHandlers","_run","_next","_continue","done","_throw","PromiseSpawn$","generator","spawn","addYieldHandler",18,"PromiseArray","spread",19,"MappingPromiseArray","limit","_filter","constructor$","_preservedValues","_limit","_inFlight","_queue","EMPTY_ARRAY","_init$","concurrency","PENDING","_promiseFulfilled","values","_values","preservedValues","_isResolved","_proxyPromiseArray","_isFulfilled","_reason","_value","totalResolved","_totalResolved","_resolve","booleans",20,"_resolveFromSyncValue","attempt",21,"spreadAdapter","nodeback","successAdapter","errorAdapter","newReason","asCallback","nodeify","adapter",22,"progressed","progressValue","_isFollowingOrFulfilledOrRejected","_progressUnchecked","_progressHandlerAt","_progressHandler0","_doProgressWith","progression","_promiseAt","_receiverAt","_promiseProgressed",23,"resolver","_rejectionHandler0","_promise0","_receiver0","_resolveFromResolver","fillTypes","makeSelfResolutionError","reflect","PromiseInspection","APPLY","PromiseResolver","nodebackForPromise","_nodebackForPromise","caught","catchInstances","catchFilter","_setIsFinal","all","isResolved","toJSON","fulfillmentValue","rejectionReason","originatesFromRejection","is","fromNode","defer","pending","cast","_fulfillUnchecked","fulfilled","rejected","setScheduler","internalData","haveInternalData","_setIsMigrated","callbackIndex","_addCallbacks","_isSettlePromisesQueued","_settlePromiseAtPostResolution","_settlePromiseAt","_isFollowing","_setLength","_setFulfilled","_setRejected","_setFollowing","_isFinal","_unsetIsMigrated","_isMigrated","_fulfillmentHandlerAt","_rejectionHandlerAt","_migrateCallbacks","follower","fulfill","_setProxyHandlers","promiseSlotValue","promiseArray","shouldBind","_fulfill","propagationFlags","_setFollowee","_rejectUnchecked","synchronous","shouldNotMarkOriginatingFromRejection","markAsOriginatingFromRejection","ensureErrorObject","hasStack","_settlePromiseFromHandler","_isRejected","_followee","_cleanValues","flags","carriedStackTrace","isPromise","_clearCallbackDataAtIndex","_promiseRejected","_setSettlePromisesQueued","_unsetSettlePromisesQueued","_queueSettlePromises","_rejectUncheckedCheckError","_makeSelfResolutionError","toFastProperties","b","c","./any.js","./bind.js","./call_get.js","./cancel.js","./captured_trace.js","./catch_filter.js","./context.js","./debuggability.js","./direct_resolve.js","./each.js","./filter.js","./finally.js","./generators.js","./join.js","./map.js","./method.js","./nodeify.js","./progress.js","./promise_array.js","./promise_resolver.js","./promisify.js","./props.js","./race.js","./reduce.js","./settle.js","./some.js","./synchronous_inspection.js","./thenables.js","./timers.js","./using.js",24,"toResolutionValue","resolveValueIfEmpty","__hardReject__","_resolveEmptyArray","getActualLength","shouldCopyValues",25,"isUntypedError","wrapAsOperationalError","rErrorKey","wrapped","maybeWrapAsError","haveGetters","timeout",26,"propsFilter","noCopyPropsPattern","isPromisified","__isPromisified__","hasPromisified","suffix","getDataPropertyOrDefault","defaultPromisified","checkValid","suffixRegexp","keyWithoutAsyncSuffix","promisifiableMethods","inheritedDataKeys","passesDefaultFilter","defaultFilter","makeNodePromisifiedClosure","promisified","THIS","defaultThis","withAppended","promisifyAll","promisifier","escapeIdentRegex","promisifiedKey","makeNodePromisified","promisify","makeNodePromisifiedEval","defaultSuffix","func","isClass","copyDescriptors","./errors",27,"PropertiesPromiseArray","props","castValue","keyOffset",28,"arrayMove","src","srcIndex","dst","dstIndex","capacity","_capacity","_front","_willBeOverCapacity","size","_checkCapacity","_unshiftOne","front","wrapMask","_resizeTo","oldCapacity","moveItemsCount",29,"race","raceLater",30,"ReductionPromiseArray","accum","_each","_zerothIsAccum","_gotAccum","_reducingIndex","_valuesPhase","_accum","initialValue","valuesPhaseIndex","isEach","gotAccum","valuesPhase",31,"noAsyncScheduler","versions","div","classList","toggle",32,"SettledPromiseArray","_promiseResolved","inspection","settle",33,"_howMany","_unwrap","_initialized","some","howMany","isArrayResolved","_canPossiblyFulfill","_getRangeError","count","_addFulfilled","_fulfilled","_addRejected","_rejected",34,"isPending",35,"isAnyBluebirdPromise","getThen","doThenable","hasProp","resolveFromThenable","rejectFromThenable","progressFromThenable",36,"successClear","handle","clearTimeout","failureClear","afterTimeout","afterValue","delay","ms",37,"inspectionMapper","inspections","castPreservingDisposable","thenable","_isDisposable","_getDisposer","_setDisposable","dispose","iterator","tryDispose","disposerSuccess","disposerFail","Disposer","_data","_context","FunctionDisposer","maybeUnwrapDisposer","isDisposer","doDispose","_unsetDisposable","using","disposer","vals","_disposer",38,"tryCatcher","tryCatchTarget","maybeError","safeToString","appendee","defaultValue","rident","filledRange","prefix","ignore","from","to","navigator","Child","Parent","T","oProto","getKeys","visitedKeys","chrome","loadTimes","P","ctor","superCtor","super_","TempCtor"],"mappings":"AAAA;ACAA,YAEA,IAAIA,OAAQC,QAAQ,eAChBC,KAAO,GAAIF,OAAMG,KAAKF,QAAQ,oBAAoBG,KAEtDF,MAAKG,QAAQ,MAAO,KAClBC,KAAK,SAAUC,GACfC,QAAQC,IAAIF;;AEPd,YAEA,IAAIP,OAAQC,QAAQ,kBAChBY,SAAWb,MAAMa,QAMrBH,QAAOC,QAAQP,KAAO,GAAIS,WACzBa,SACCC,IAAM,SAAUC,EAAKC,EAAMC,GAE1B,MAAO,IAAIX,MAAKL,SAAS;;ADb5B,YAEAJ,QAAOC,QAAQC,QAAUA,QACzBF,OAAOC,QAAQE,SAAWZ,QAAQ,kBAClCS,OAAOC,QAAQG,SAAWb,QAAQ,kBAClCS,OAAOC,QAAQR,KAAOF,QAAQ,cAE9BS,OAAOC,QAAQI,WAAad,QAAQ,oBAEpCS,OAAOC,QAAQK,UAAY,QAASA,GAAUC,EAASC,GACtDC,KAAKF,QAAUA,EACfE,KAAKD,KAAOA,EACZE,MAAMC,kBAAkBF,KAAMH,IAG/BN,OAAOC,QAAQK,UAAUM,gBAAkB,IAC3CZ,OAAOC,QAAQK,UAAUO,aAAe,IACxCb,OAAOC,QAAQK,UAAUQ,UAAY,IAErCvB,QAAQ,QAAQwB,SAASf,OAAOC,QAAQK,UAAWI;;AKnBnD,YA0FA,SAASmG,cAAaC,EAAQC,EAAiBC,GAC9C,GAAwB,MAApBD,EACH,MAAO,GACD,IAAIzC,MAAMC,QAAQwC,GAAkB,CAC1C,GAAIjF,GAAIiF,EAAgB3E,QAAQ0E,EAChC,OAAU,KAANhF,GAEI,EAEDiF,EAAgBjF,GAEvB,KAAM,IAAIpB,OAAM,sEApGlB,GAAIpB,OAAQC,QAAQ,cAKpBS,QAAOC,QAAQgH,UAAY,SAAUpF,EAAQX,EAAKC,EAAMC,EAAS+D,GAChE,GAAIP,GAAQnE,IAGZ,OAAiB,MAAbS,EAAIgG,MAAkD,MAAlChG,EAAIgG,KAAKhG,EAAIgG,KAAKlF,OAAS,GAC3C,GAAI9B,SAAQ,SAAUiH,EAAQlD,GACpCkD,EAAQ,GAAIvC,GAAMxE,SAAS,KAAM,KAChCgH,SAAWlG,EAAIgG,KAAKrE,UAAU,EAAG3B,EAAIgG,KAAKlF,OAAS,QAK/CmD,KAMRnF,OAAOC,QAAQoH,KAAO,SAAUC,EAAeC,GAC9C,IAAKD,GAAoC,MAAlBA,IAA0BhD,MAAMC,QAAQ+C,GAC9D,KAAM,IAAI5G,OAAM,iGAKjB,OAFA6G,GAAgBA,EAAgBA,KAEzB,SAAU1F,EAAQ2F,EAAKrG,EAAMC,EAAS+D,GAC5C,GAAIP,GAAQnE,KACRuG,EAAevG,KAAKsE,aACpB0C,EAAeF,CAanB,IAXI9G,KAAKuE,kBAAoBvE,KAAKuE,iBAAiBqC,OAC9C5G,KAAKuE,iBAAiBqC,KAAKrG,UAC9BgG,EAAevG,KAAKuE,iBAAiBqC,KAAKrG,SAGvCP,KAAKuE,iBAAiBqC,KAAKjG,SAC9BqG,EAAaC,OAAOjH,KAAKuE,iBAAiBqC,KAAKjG,UAK7CA,EAAQ0F,QACI,YAAXjF,GACCT,EAAQ0F,QAAU1F,EAAQ,iCAAkC,CAC/D,GAAIuG,GAAiBd,aAAazF,EAAQ0F,OAAQQ,EAAeN,EAGjE,OAQO,IAAI9G,SARNyH,GAAqF,KAAnEX,EAAa5E,QAAQhB,EAAQ,kCAQjC,SAAU4C,EAASC,GACrCD,EAAQ,GAAIY,GAAMxE,SAAS,KAAM,KAChCwH,+BAAiChD,EAAMG,aAAa8C,KAAK,MACzDC,+BAAiCL,EAAaI,KAAK,MACnDE,8BAAgCJ,EAChCK,oCAAqC,MAZnB,SAAUhE,EAASC,GACrCA,EAAO,GAAI3E,OAAMgB,UAAU0G,EAAc,QAkB9C,MAAO7B,KACNvF,KAAK,SAAUC,GACf,MAAKuB,GAAQ0F,QAITW,EAAazF,SAChBnC,EAASuB,QAAQ,iCAAmCqG,EAAaI,KAAK,OAGvEhI,EAASuB,QAAQ,+BAAiCyF,aAAazF,EAAQ0F,OAAQQ,EAAeN,GAC9FnH,EAASuB,QAAQ,qCAAsC,EAChDvB,GATCA;;AH5EX,YAOA,IAAIwB,gBAAiB,MAAM,OAAO,OAAO,MAAM,SAAS,UAAW,SAC/D/B,MAAQC,QAAQ,eAGhBY,SAAWH,OAAOC,QAAU,SAAmBqB,GAMlD,GALAb,KAAKc,OAASD,EAAWE,UACzBf,KAAKgB,iBACLhB,KAAKiB,MAAQJ,EAAWK,KACxBlB,KAAKmB,QAAUN,EAAWM,QAEtBN,EAAWN,QAEd,IAAK,GADDa,GAAS,KACJC,EAAI,EAAGC,EAAWV,cAAcW,OAAYD,EAAJD,EAAcA,IAC9DD,EAASR,cAAcS,GAEnBR,EAAWN,QAAQa,KACtBpB,KAAKoB,GAAUP,EAAWN,QAAQa,GAClCpB,KAAKgB,cAAcQ,KAAKJ,IAW5B1B,UAAS+B,UAAUC,aAAe,SAAUN,GAC3C,MAA8C,KAAvCpB,KAAKgB,cAAcW,QAAQP,IAOnC1B,SAAS+B,UAAUG,gBAAkB,WACpC,MAAO5B,MAAKgB,eAQbtB,SAAS+B,UAAUI,eAAiB,SAAUC,GAC7C,IAAKA,EACJ,OAAO,CAGR,KAAK,GAAIC,KAAY/B,MAAKc,OAAQ,CACjC,GAAIgB,IAAgBC,EACnB,OACCC,MAAQhC,KAAKc,OAAOiB,GAItB,IAAoB,MAAhBA,EAAS,GAAY,CACxB,GAAIE,MAAMC,OAAOJ,IAChB,QAEA,QACCK,IAAMJ,EAASK,UAAU,GACzBC,MAAQH,OAAOJ,GACfE,MAAQhC,KAAKc,OAAOiB,IAMvB,GAAoB,MAAhBA,EAAS,GACZ,OACCI,IAAMJ,EAASK,UAAU,GACzBC,MAAQP,EACRE,MAAQhC,KAAKc,OAAOiB,IAKvB,OAAO;;ACtFR,YAQA,IAAIlD,OAAQC,QAAQ,eAEhBa,SAAWJ,OAAOC,QAAU,SAAmBkB,EAAM4B,EAAQ3B,GAChEX,KAAKU,KAAOA,EACZV,KAAKsC,OAASA,GAAU,IACxBtC,KAAKW,QAAUA,MAOhBhB,UAAS8B,UAAUf,KAAO,KAM1Bf,SAAS8B,UAAUd,QAAU,KAM7BhB,SAAS8B,UAAUa,OAAS,KAS5B3C,SAAS8B,UAAUc,cAAgB,SAASC,GACC,gBAAjCxC,MAAKW,QAAQ,iBAAqD,gBAAdX,MAAKU,OACnEV,KAAKW,QAAQ,gBAAkB,oBAGhC6B,EAAcC,UAAUzC,KAAKsC,OAAQtC,KAAKW,SAGzC6B,EAAcE,MADW,gBAAf1C,MAAS,KACC2C,KAAKC,UAAU5C,KAAKU,MAEpBV,KAAKU;;ACnD3B,YAQA,IAAImC,YAAa/D,QAAQ,OACrBgE,UAAYhE,QAAQ,eACpBD,MAAQC,QAAQ,YAChBiE,SAAWjE,QAAQ,YASnBE,KAAOO,OAAOC,QAAU,SAAewD,GAM1C,GAHAhD,KAAKgD,cAAgBA,GAGhBhD,KAAKgD,cACT,KAAM,IAAI/C,OAAM,4DAGjBD,MAAKiD,kBAGNjE,MAAKyC,UAAUuB,cAAgB,KAC/BhE,KAAKyC,UAAUwB,eAAiB,KAchCjE,KAAKyC,UAAUyB,IAAM,SAAUC,GAC9B,IAAKA,EACJ,KAAM,IAAIlD,OAAM,sDAGjBD,MAAKiD,eAAezB,KAAK2B,IAgB1BnE,KAAKyC,UAAUvC,QAAU,SAAUkC,EAAQX,EAAKC,EAAMC,GACrD,GACIqB,GAAQ,IAGZ,IAAsB,gBAAXZ,GACV,KAAM,IAAInB,OAAM,wDAGjB,IAAmB,gBAARQ,GACV,KAAM,IAAIR,OAAM,+CAIZU,KACJA,KAGD,KACCF,EAAMoC,WAAWO,MAAM3C,GAAK,GAC5BC,EAAOV,KAAKqD,WAAW3C,EAAMC,EAAQ,iBACpC,MAAO2C,GAER,MAAO,IAAIzE,OAAMY,QAAQ,SAAU8D,EAASC,GAC3CA,EAAOF,KAOT,MAHAtB,GAAQhC,KAAKyD,YAAYrC,EAAQX,EAAKC,EAAMC,GAGrCX,KAAK0D,cAAc1B,GACxB7C,KAAK,SAAUwE,GAMf,MAL+B,gBAArB,IAAmCA,YAA0B9E,OAAMc,WAE5EgE,EAAiB,GAAI9E,OAAMc,SAASgE,IAG9BA,KAWV3E,KAAKyC,UAAU4B,WAAa,SAAU3C,EAAMkD,GAC3C,MAAoB,gBAATlD,IAAqBmD,MAAMC,QAAQpD,KAAUA,EAEhDA,EAGa,qBAAjBkD,EAEIjB,KAAKS,MAAM1C,GACS,sCAAjBkD,EAEHd,UAAUM,MAAM1C,GAGhBA,GAcT1B,KAAKyC,UAAUgC,YAAc,SAAUM,EAAgBC,EAAYC,EAAcC,GAChF,GAAIC,GAAQnE,KAERoE,EAAWpE,KAAKqE,gBAAgBL,GAEhC7C,GACHjC,QAAU,SAAUkC,EAAQX,EAAKC,EAAMC,GACtC,MAAOwD,GAAMjF,QAAQkC,EAAQX,EAAKC,EAAMC,IAEzC2D,aAAeF,EAAWA,EAASxC,qBACnCjC,SAAWd,MAAMc,SAOlB,OAJIyE,KACHjD,EAAQoD,iBAAmBH,EAASjD,SAG9BgD,EAAMK,wBAAwBrD,EAASiD,EAAUL,EAAgBC,EAAYC,EAAcC,IAgBnGlF,KAAKyC,UAAU+C,wBAA0B,SAAUrD,EAASiD,EAAUhD,EAAQX,EAAKC,EAAMC,GACxF,GAAI8D,GAAW,EACXN,EAAQnE,KACRgC,EAAQ,KAER0C,EAAO,WACV,MAAIP,GAAMlB,eAAewB,GACjBN,EAAMQ,iBAAiBR,EAAMlB,eAAewB,IAAWG,KAAKzD,EAASC,EAAQX,EAAKC,EAAMC,EAAS,WAEvG,MADA8D,IAAY,EACLN,EAAMT,cAAcgB,MAI7B1C,EAAQmC,EAAMU,aAAaT,EAAUhD,EAAQX,GACtCuB,EAAM4C,KAAKzD,EAASV,EAAKC,EAAMC,IAGvC,OAAO+D,IAWR1F,KAAKyC,UAAUoD,aAAe,SAAUT,EAAUhD,EAAQ4C,GAEzD,MAAKI,GAQAA,EAAShD,GASPpB,KAAK2E,iBAAiBP,EAAShD,IAR9B,WAGN,KAAM,IAAIvC,OAAMgB,UAAUuE,EAASxC,kBAAmB,MAXhD,WAEN,KAAM,IAAI/C,OAAMgB,UAAUmE,EAAWc,SAAU,OAwBlD9F,KAAKyC,UAAUkD,iBAAmB,SAAUxB,GAE3C,MAA4B,sBAAxBA,EAAG4B,YAAYC,MAAwD,+BAAxB7B,EAAG4B,YAAYC,KAC1DjC,SAASkC,UAAU9B,GAEnBA,GAaTnE,KAAKyC,UAAUiC,cAAgB,SAAU1B,GACxC,GAAIkD,GAAS,IAGb,KACCA,EAASlD,IACR,MAAOsB,GAER,MAAO,IAAIzE,OAAMY,QAAQ,SAAU8D,EAASC,GAC3CA,EAAOF,KAKT,MAAM4B,aAAkBrG,OAAMY,QAKvByF,EAJCzF,QAAQ8D,QAAQ2B,IAazBlG,KAAKyC,UAAU4C,gBAAkB,SAAUL,GAC1C,GAAIc,GAAWd,EAAWc,SAASK,QAAQ,MAAO,IAG9CC,EAAQN,EAASO,MAAM,KAGvBC,EAAOF,EAAMG,QAEbnB,EAAWpE,KAAKgD,cAChBwC,EAAgB,IAQpB,KALKxB,EAAWyB,OACfzB,EAAWyB,SAILL,EAAM7D,QAAQ,CAIpB,GAHA+D,EAAOF,EAAMG,QACbC,EAAgBpB,EAASvC,eAAeyD,IAEnCE,EACJ,MAAO,KAEPpB,GAAWoB,EAAcxD,MAErBwD,EAAcrD,MACjB6B,EAAWyB,KAAKD,EAAcrD,KAAOqD,EAAcnD,OAKtD,MAAO+B,IASRpF,KAAKyC,UAAUiE,OAAS,SAAUC,EAAcnD,GAC/C,GAAIoD,GAAM5F,KACNU,EAAO,EAGXiF,GAAaE,GAAG,WAAY,WAE3B,IADE,GAAIC,GACC,QAAUA,EAAQH,EAAaI,SACrCrF,GAAQoF,GAIV,IAAIE,GAAgB,SAAU5G,GAE7BA,EAASmD,cAAcC,GAGnBmD,EAAahF,QAAQ,eAAwE,KAAvDgF,EAAahF,QAAQ,cAAcgB,QAAQ,SACpFa,EAAcE,MAAM,MAGrBF,EAAcyD,MAGfN,GAAaE,GAAG,MAAO,WAEtBD,EAAI1G,QAAQyG,EAAavE,OAAQuE,EAAalF,IAAKC,EAAMiF,EAAahF,SACpExB,KAAK6G,GADPJ,SAEQ,SAAUM,GAChB7G,QAAQC,IAAI4G,GAEXF,EADGE,YAAiBrH,OAAMgB,UACZ,GAAIhB,OAAMc,UAAUuG,MAASA,EAAMpG,SAAUoG,EAAMnG,MAEnD,GAAIlB,OAAMc,UAAUuG,MAAU,gCAAiC,UAMjFP,EAAaE,GAAG,QAAS,SAAUM,GAClC9G,QAAQC,IAAI6G,GACZH,EAAc,GAAInH,OAAMc,UAAUuG,MAAU,gCAAiC;;CUjV9E,SAAS5C,GAAG,GAAG,gBAAiB9D,UAAS,mBAAoBD,QAAOA,OAAOC,QAAQ8D,QAAS,IAAG,kBAAmBma,SAAQA,OAAOC,IAAID,UAAUna,OAAO,CAAC,GAAI+J,EAAE,oBAAoBuJ,QAAOvJ,EAAEuJ,OAAO,mBAAoBzI,QAAOd,EAAEc,OAAO,mBAAoByP,QAAOvQ,EAAEuQ,MAAMvQ,EAAE5N,QAAQ6D,MAAM,WAAW,GAAIma,GAAOle,EAAOC,CAAQ,OAAO,SAAU8D,GAAEoY,EAAEpR,EAAEuT,GAAG,QAAS3I,GAAE1I,EAAE8E,GAAG,IAAIhH,EAAEkC,GAAG,CAAC,IAAIkP,EAAElP,GAAG,CAAC,GAAIsR,GAAkB,kBAATC,UAAqBA,OAAQ,KAAIzM,GAAGwM,EAAE,MAAOA,GAAEtR,GAAE,EAAI,IAAGnL,EAAE,MAAOA,GAAEmL,GAAE,EAAI,IAAIa,GAAE,GAAIpN,OAAM,uBAAuBuM,EAAE,IAAK,MAAMa,GAAEtN,KAAK,mBAAmBsN,EAAE,GAAIpC,GAAEX,EAAEkC,IAAIhN,WAAYkc,GAAElP,GAAG,GAAG5H,KAAKqG,EAAEzL,QAAQ,SAAS8D,GAAG,GAAIgH,GAAEoR,EAAElP,GAAG,GAAGlJ,EAAG,OAAO4R,GAAE5K,EAAEA,EAAEhH,IAAI2H,EAAEA,EAAEzL,QAAQ8D,EAAEoY,EAAEpR,EAAEuT,GAAG,MAAOvT,GAAEkC,GAAGhN,QAAkD,IAAI,GAA1C6B,GAAkB,kBAAT0c,UAAqBA,QAAgBvR,EAAE,EAAEA,EAAEqR,EAAEtc,OAAOiL,IAAI0I,EAAE2I,EAAErR,GAAI,OAAO0I,KAAK8I,GAAG,SAASD,EAAQxe,EAAOC,GAC5xB,YACAD,GAAOC,QAAU,SAASC,GAE1B,QAASwe,GAAIC,GACT,GAAI7U,GAAM,GAAI8U,GAAiBD,GAC3BE,EAAU/U,EAAI+U,SAIlB,OAHA/U,GAAIgV,WAAW,GACfhV,EAAIiV,YACJjV,EAAInI,OACGkd,EAPX,GAAID,GAAmB1e,EAAQ8e,iBAU/B9e,GAAQwe,IAAM,SAAUC,GACpB,MAAOD,GAAIC,IAGfze,EAAQgC,UAAUwc,IAAM,WACpB,MAAOA,GAAIje,aAKTwe,GAAG,SAAST,EAAQxe,EAAOC,GACjC,YAQA,SAASif,KACLze,KAAK0e,aAAc,EACnB1e,KAAK2e,WAAa,GAAIC,GAAM,IAC5B5e,KAAK6e,aAAe,GAAID,GAAM,IAC9B5e,KAAK8e,oBAAqB,CAC1B,IAAIlB,GAAO5d,IACXA,MAAK+e,YAAc,WACfnB,EAAKoB,gBAEThf,KAAKif,UACDC,EAASC,SAAWD,EAASlf,KAAK+e,aAAeG,EAkDzD,QAASE,GAAiBjc,EAAIkc,EAAUrT,GACpC7I,EAAKnD,KAAKsf,YAAYnc,GACtBnD,KAAK2e,WAAWnd,KAAK2B,EAAIkc,EAAUrT,GACnChM,KAAKuf,aAGT,QAASC,GAAYrc,EAAIkc,EAAUrT,GAC/B7I,EAAKnD,KAAKsf,YAAYnc,GACtBnD,KAAK6e,aAAard,KAAK2B,EAAIkc,EAAUrT,GACrChM,KAAKuf,aAGT,QAASE,GAAoBrB,GACzBpe,KAAK6e,aAAaa,SAAStB,GAC3Bpe,KAAKuf,aAjFT,GAAII,EACJ,KAAK,KAAM,IAAI1f,OAAW,MAAOqD,GAAIqc,EAAiBrc,EACtD,GAAI4b,GAAWnB,EAAQ,iBACnBa,EAAQb,EAAQ,cAChB6B,EAA8B,mBAAZ9R,SAA0BA,QAAU+B,OACtDgQ,EAAO9B,EAAQ,YAenBU,GAAMhd,UAAUqe,6BAA+B,WACvCD,EAAKE,cACL/f,KAAK8e,oBAAqB,IAIlCL,EAAMhd,UAAUue,iBAAmB,WAC1BhgB,KAAK8e,qBACN9e,KAAK8e,oBAAqB,EAC1B9e,KAAKif,UAAY,SAAS9b,GACtB4U,WAAW5U,EAAI,MAK3Bsb,EAAMhd,UAAUwe,gBAAkB,WAC9B,MAAOjgB,MAAK6e,aAAatd,SAAW,GAGxCkd,EAAMhd,UAAU6d,YAAc,SAASnc,GAMnC,MALiB0M,UAAb+P,GACmB,MAAnBA,EAASjD,QACRxZ,EAAGwZ,SACJxZ,EAAKyc,EAASjD,OAAOuD,KAAK/c,IAEvBA,GAGXsb,EAAMhd,UAAU0e,WAAa,SAAShd,EAAI6I,GAMtC,GALyB,IAArBjE,UAAUxG,SACVyK,EAAM7I,EACNA,EAAK,WAAc,KAAM6I,KAE7B7I,EAAKnD,KAAKsf,YAAYnc,GACI,mBAAf4U,YACPA,WAAW,WACP5U,EAAG6I,IACJ,OACA,KACHhM,KAAKif,UAAU,WACX9b,EAAG6I,KAET,MAAO1I,GACL,KAAM,IAAIrD,OAAM,oEAqBnB4f,EAAKE,aAKNtB,EAAMhd,UAAU2e,YAAc,SAAUjd,EAAIkc,EAAUrT,GAC9ChM,KAAK8e,mBACLM,EAAiBxa,KAAK5E,KAAMmD,EAAIkc,EAAUrT,GAE1C+L,WAAW,WACP5U,EAAGyB,KAAKya,EAAUrT,IACnB,MAIXyS,EAAMhd,UAAU4e,OAAS,SAAUld,EAAIkc,EAAUrT,GACzChM,KAAK8e,mBACLU,EAAY5a,KAAK5E,KAAMmD,EAAIkc,EAAUrT,GAErC+L,WAAW,WACP5U,EAAGyB,KAAKya,EAAUrT,IACnB,IAIXyS,EAAMhd,UAAU6e,eAAiB,SAASlC,GAClCpe,KAAK8e,mBACLW,EAAoB7a,KAAK5E,KAAMoe,GAE/BrG,WAAW,WACPqG,EAAQmC,mBACT,MA9BX9B,EAAMhd,UAAU2e,YAAchB,EAC9BX,EAAMhd,UAAU4e,OAASb,EACzBf,EAAMhd,UAAU6e,eAAiBb,GAiCrChB,EAAMhd,UAAU+e,YAAc,SAAUrd,EAAIkc,EAAUrT,GAClD7I,EAAKnD,KAAKsf,YAAYnc,GACtBnD,KAAK6e,aAAa9J,QAAQ5R,EAAIkc,EAAUrT,GACxChM,KAAKuf,cAGTd,EAAMhd,UAAUgf,YAAc,SAAStJ,GACnC,KAAOA,EAAM5V,SAAW,GAAG,CACvB,GAAI4B,GAAKgU,EAAM5R,OACf,IAAkB,kBAAPpC,GAAX,CAIA,GAAIkc,GAAWlI,EAAM5R,QACjByG,EAAMmL,EAAM5R,OAChBpC,GAAGyB,KAAKya,EAAUrT,OALd7I,GAAGod,oBASf9B,EAAMhd,UAAUud,aAAe,WAC3Bhf,KAAKygB,YAAYzgB,KAAK6e,cACtB7e,KAAK0gB,SACL1gB,KAAKygB,YAAYzgB,KAAK2e,aAG1BF,EAAMhd,UAAU8d,WAAa,WACpBvf,KAAK0e,cACN1e,KAAK0e,aAAc,EACnB1e,KAAKif,UAAUjf,KAAK+e,eAI5BN,EAAMhd,UAAUif,OAAS,WACrB1gB,KAAK0e,aAAc,GAGvBnf,EAAOC,QAAU,GAAIif,GACrBlf,EAAOC,QAAQmgB,eAAiBA,IAE7BgB,aAAa,GAAGC,gBAAgB,GAAGC,YAAY,KAAKC,GAAG,SAAS/C,EAAQxe,EAAOC,GAClF,YACAD,GAAOC,QAAU,SAASC,EAASshB,EAAUC,GAC7C,GAAIC,GAAa,SAASxT,EAAGnK,GACzBtD,KAAKkhB,QAAQ5d,IAGb6d,EAAiB,SAAS7d,EAAGnC,GAC7BA,EAAQigB,wBAAyB,EACjCjgB,EAAQkgB,eAAeC,MAAML,EAAYA,EAAY,KAAMjhB,KAAMsD,IAGjEie,EAAkB,SAASC,EAASrgB,GACpCnB,KAAKyhB,YAAYD,GACbxhB,KAAK0hB,cACL1hB,KAAK2hB,iBAAiBxgB,EAAQygB,SAIlCC,EAAkB,SAASve,EAAGnC,GACzBA,EAAQigB,wBAAwBphB,KAAKkhB,QAAQ5d,GAGtD7D,GAAQgC,UAAUye,KAAO,SAAUsB,GAC/B,GAAIM,GAAed,EAAoBQ,GACnCnY,EAAM,GAAI5J,GAAQshB,EACtB1X,GAAI0Y,eAAe/hB,KAAM,EACzB,IAAI4hB,GAAS5hB,KAAKgiB,SAClB,IAAIF,YAAwBriB,GAAS,CACjC,GAAI0B,IACAigB,wBAAwB,EACxBhD,QAAS/U,EACTuY,OAAQA,EACRP,eAAgBS,EAEpBF,GAAON,MAAMP,EAAUI,EAAgB9X,EAAI4Y,UAAW5Y,EAAKlI,GAC3D2gB,EAAaR,MACTC,EAAiBM,EAAiBxY,EAAI4Y,UAAW5Y,EAAKlI,OAE1DkI,GAAIoY,YAAYD,GAChBnY,EAAIsY,iBAAiBC,EAEzB,OAAOvY,IAGX5J,EAAQgC,UAAUggB,YAAc,SAAUha,GAC1BoI,SAARpI,GACAzH,KAAKkiB,UAA6B,OAAjBliB,KAAKkiB,UACtBliB,KAAKmiB,SAAW1a,GAEhBzH,KAAKkiB,UAA6B,QAAjBliB,KAAKkiB,WAI9BziB,EAAQgC,UAAU2gB,SAAW,WACzB,MAAqC,WAAZ,OAAjBpiB,KAAKkiB,YAGjBziB,EAAQygB,KAAO,SAAUsB,EAASnf,GAC9B,GAAIyf,GAAed,EAAoBQ,GACnCnY,EAAM,GAAI5J,GAAQshB,EAWtB,OATIe,aAAwBriB,GACxBqiB,EAAaR,MAAM,SAASE,GACxBnY,EAAIoY,YAAYD,GAChBnY,EAAIsY,iBAAiBtf,IACtBgH,EAAI6X,QAAS7X,EAAI4Y,UAAW5Y,EAAK,OAEpCA,EAAIoY,YAAYD,GAChBnY,EAAIsY,iBAAiBtf,IAElBgH,SAILgZ,GAAG,SAAStE,EAAQxe,EAAOC,GACjC,YAGA,SAAS8iB,KACL,IAAU7iB,UAAY8iB,IAAU9iB,QAAU+iB,GAC1C,MAAOlf,IACP,MAAOif,GALX,GAAIC,EACmB,oBAAZ/iB,WAAyB+iB,EAAM/iB,QAM1C,IAAI8iB,GAAWxE,EAAQ,iBACvBwE,GAASD,WAAaA,EACtB/iB,EAAOC,QAAU+iB,IAEdE,eAAe,KAAKC,GAAG,SAAS3E,EAAQxe,EAAOC,GAClD,YACA,IAAImjB,GAAKjZ,OAAOkZ,MAChB,IAAID,EAAI,CACJ,GAAIE,GAAcF,EAAG,MACjBG,EAAcH,EAAG,KACrBE,GAAY,SAAWC,EAAY,SAAW,EAGlDvjB,EAAOC,QAAU,SAASC,GA4D1B,QAASsjB,GAAatb,EAAKub,GACvB,GAAI7f,EAEJ,IADW,MAAPsE,IAAatE,EAAKsE,EAAIub,IACR,kBAAP7f,GAAmB,CAC1B,GAAIrD,GAAU,UAAY+f,EAAKoD,YAAYxb,GAAO,mBAC9CoY,EAAK5V,SAAS+Y,GAAc,GAChC,MAAM,IAAIvjB,GAAQ+T,UAAU1T,GAEhC,MAAOqD,GAGX,QAAS+f,GAAOzb,GACZ,GAAIub,GAAahjB,KAAK4K,MAClBzH,EAAK4f,EAAatb,EAAKub,EAC3B,OAAO7f,GAAG+K,MAAMzG,EAAKzH,MAiBzB,QAASmjB,GAAY1b,GACjB,MAAOA,GAAIzH,MAEf,QAASojB,GAAc3b,GACnB,GAAI8T,IAASvb,IAEb,OADY,GAARub,IAAWA,EAAQ8B,KAAKgG,IAAI,EAAG9H,EAAQ9T,EAAIlG,SACxCkG,EAAI8T,GAhGf,CAAA,GAKI+H,GALAzD,EAAO9B,EAAQ,aACfwF,EAAc1D,EAAK0D,WACJ1D,GAAK2D,aAyExB/jB,EAAQgC,UAAUmD,KAAO,SAAUoe,GAC+B,IAAI,GAA9DS,GAAQ1b,UAAUxG,OAAWkE,EAAO,GAAI5B,OAAM4f,EAAQ,GAAYC,EAAM,EAASD,EAANC,IAAeA,EAAMje,EAAKie,EAAM,GAAK3b,UAAU2b,EAW9H,OADAje,GAAKjE,KAAKwhB,GACHhjB,KAAKshB,MAAM4B,EAAQrT,OAAWA,OAAWpK,EAAMoK,SAW1DpQ,EAAQgC,UAAU8J,IAAM,SAAUoY,GAC9B,GACIC,GADAC,EAAmC,gBAAjBF,EAEtB,IAAKE,EAQDD,EAASR,MAPT,IAAIG,EAAa,CACb,GAAIO,GAAcR,EAAUK,EAC5BC,GAAyB,OAAhBE,EAAuBA,EAAcX,MAE9CS,GAAST,CAKjB,OAAOnjB,MAAKshB,MAAMsC,EAAQ/T,OAAWA,OAAW8T,EAAc9T,YAI/DgR,YAAY,KAAKkD,GAAG,SAAShG,EAAQxe,EAAOC,GAC/C,YACAD,GAAOC,QAAU,SAASC,GAC1B,GAAIqa,GAASiE,EAAQ,eACjBiG,EAAQjG,EAAQ,cAChBkG,EAAoBnK,EAAOmK,iBAE/BxkB,GAAQgC,UAAUyiB,QAAU,SAAUC,GAClC,IAAKnkB,KAAKokB,gBAAiB,MAAOpkB,KAGlC,KAFA,GAAIqkB,GACAC,EAAkBtkB,KACoC6P,UAAlDwU,EAASC,EAAgBC,sBAC7BF,EAAOD,iBACPE,EAAkBD,CAEtBrkB,MAAKwkB,oBACLF,EAAgBtC,UAAUyC,gBAAgBN,GAAQ,GAAO,IAG7D1kB,EAAQgC,UAAUijB,OAAS,SAAUP,GACjC,MAAKnkB,MAAKokB,iBACKvU,SAAXsU,IAAsBA,EAAS,GAAIF,IACvCD,EAAM5D,YAAYpgB,KAAKkkB,QAASlkB,KAAMmkB,GAC/BnkB,MAH2BA,MAMtCP,EAAQgC,UAAUkjB,YAAc,WAC5B,MAAI3kB,MAAK4kB,eAAuB5kB,MAChCgkB,EAAMhE,mBACNhgB,KAAK6kB,kBACL7kB,KAAKukB,oBAAsB1U,OACpB7P,OAGXP,EAAQgC,UAAUqjB,cAAgB,WAC9B,GAAIzb,GAAMrJ,KAAKb,MAEf,OADAkK,GAAImb,oBACGnb,GAGX5J,EAAQgC,UAAUsjB,KAAO,SAAUC,EAAYC,EAAWC,GACtD,GAAI7b,GAAMrJ,KAAKshB,MAAM0D,EAAYC,EAAWC,EACvBrV,OAAWA,OAIhC,OAFAxG,GAAIwb,kBACJxb,EAAIkb,oBAAsB1U,OACnBxG,MAIR8b,aAAa,EAAEC,cAAc,KAAKC,GAAG,SAAStH,EAAQxe,EAAOC,GAChE,YACAD,GAAOC,QAAU,WAUjB,QAAS8lB,GAAcjB,GACnBrkB,KAAKulB,QAAUlB,CACf,IAAI9iB,GAASvB,KAAKwlB,QAAU,GAAgB3V,SAAXwU,EAAuB,EAAIA,EAAOmB,QACnEtlB,GAAkBF,KAAMslB,GACpB/jB,EAAS,IAAIvB,KAAKylB,UA8E1B,QAASC,GAAiB5lB,EAAS6lB,GAC/B,IAAK,GAAItkB,GAAI,EAAGA,EAAIskB,EAAOpkB,OAAS,IAAKF,EACrCskB,EAAOtkB,GAAGG,KAAK,wBACfmkB,EAAOtkB,GAAKskB,EAAOtkB,GAAG+F,KAAK,KAK/B,OAHI/F,GAAIskB,EAAOpkB,SACXokB,EAAOtkB,GAAKskB,EAAOtkB,GAAG+F,KAAK,OAExBtH,EAAU,KAAO6lB,EAAOve,KAAK,MAGxC,QAASwe,GAA4BD,GACjC,IAAK,GAAItkB,GAAI,EAAGA,EAAIskB,EAAOpkB,SAAUF,GACR,IAArBskB,EAAOtkB,GAAGE,QACRF,EAAI,EAAIskB,EAAOpkB,QAAWokB,EAAOtkB,GAAG,KAAOskB,EAAOtkB,EAAE,GAAG,MACzDskB,EAAOpP,OAAOlV,EAAG,GACjBA,KAKZ,QAASwkB,GAAkBF,GAEvB,IAAK,GADDG,GAAUH,EAAO,GACZtkB,EAAI,EAAGA,EAAIskB,EAAOpkB,SAAUF,EAAG,CAMpC,IAAK,GALDwK,GAAO8Z,EAAOtkB,GACd0kB,EAAmBD,EAAQvkB,OAAS,EACpCykB,EAAkBF,EAAQC,GAC1BE,EAAsB,GAEjBxR,EAAI5I,EAAKtK,OAAS,EAAGkT,GAAK,IAAKA,EACpC,GAAI5I,EAAK4I,KAAOuR,EAAiB,CAC7BC,EAAsBxR,CACtB,OAIR,IAAK,GAAIA,GAAIwR,EAAqBxR,GAAK,IAAKA,EAAG,CAC3C,GAAIhJ,GAAOI,EAAK4I,EAChB,IAAIqR,EAAQC,KAAsBta,EAI9B,KAHAqa,GAAQlb,MACRmb,IAKRD,EAAUja,GAIlB,QAASqa,GAAWC,GAEhB,IAAK,GADD9c,MACKhI,EAAI,EAAGA,EAAI8kB,EAAM5kB,SAAUF,EAAG,CACnC,GAAIoK,GAAO0a,EAAM9kB,GACb+kB,EAAcC,EAAkB1X,KAAKlD,IACrC,yBAA2BA,EAC3B6a,EAAkBF,GAAeG,EAAa9a,EAC9C2a,KAAgBE,IACZE,GAAwC,MAAnB/a,EAAKiK,OAAO,KACjCjK,EAAO,OAASA,GAEpBpC,EAAI7H,KAAKiK,IAGjB,MAAOpC,GAGX,QAASod,GAAmBvgB,GAExB,IAAK,GADDigB,GAAQjgB,EAAMigB,MAAMhhB,QAAQ,QAAS,IAAIE,MAAM,MAC1ChE,EAAI,EAAGA,EAAI8kB,EAAM5kB,SAAUF,EAAG,CACnC,GAAIoK,GAAO0a,EAAM9kB,EACjB,IAAI,yBAA2BoK,GAAQ4a,EAAkB1X,KAAKlD,GAC1D,MAMR,MAHIpK,GAAI,IACJ8kB,EAAQA,EAAMhS,MAAM9S,IAEjB8kB,EAmFX,QAASO,GAAejf,GACpB,GAAIgB,EACJ,IAAmB,kBAARhB,GACPgB,EAAM,cACDhB,EAAIzC,MAAQ,aACb,QACD,CACHyD,EAAMhB,EAAIwC,UACV,IAAI0c,GAAmB,2BACvB,IAAIA,EAAiBhY,KAAKlG,GACtB,IACI,GAAIme,GAASjkB,KAAKC,UAAU6E,EAC5BgB,GAAMme,EAEV,MAAMtjB,IAIS,IAAfmF,EAAIlH,SACJkH,EAAM,iBAGd,MAAQ,KAAOoe,EAAKpe,GAAO,qBAG/B,QAASoe,GAAKpe,GACV,GAAIqe,GAAW,EACf,OAAIre,GAAIlH,OAASulB,EACNre,EAEJA,EAAIiD,OAAO,EAAGob,EAAW,GAAK,MAKzC,QAASC,GAActb,GACnB,GAAIub,GAAUvb,EAAKL,MAAM6b,EACzB,OAAID,IAEIE,SAAUF,EAAQ,GAClBvb,KAAM0b,SAASH,EAAQ,GAAI,KAHnC,OAhSJ,GAOII,GAPApD,EAAQjG,EAAQ,cAChB8B,EAAO9B,EAAQ,aACfsJ,EACA,8DACAhB,EAAoB,KACpBiB,EAAc,KACdd,GAAoB,CASxB3G,GAAKvf,SAASglB,EAAerlB,OAE7BqlB,EAAc7jB,UAAUgkB,QAAU,WAC9B,GAAIlkB,GAASvB,KAAKwlB,OAClB,MAAa,EAATjkB,GAAJ,CAIA,IAAK,GAHDgmB,MACAC,KAEKnmB,EAAI,EAAGomB,EAAOznB,KAAe6P,SAAT4X,IAAsBpmB,EAC/CkmB,EAAM/lB,KAAKimB,GACXA,EAAOA,EAAKlC,OAEhBhkB,GAASvB,KAAKwlB,QAAUnkB,CACxB,KAAK,GAAIA,GAAIE,EAAS,EAAGF,GAAK,IAAKA,EAAG,CAClC,GAAI8kB,GAAQoB,EAAMlmB,GAAG8kB,KACOtW,UAAxB2X,EAAarB,KACbqB,EAAarB,GAAS9kB,GAG9B,IAAK,GAAIA,GAAI,EAAOE,EAAJF,IAAcA,EAAG,CAC7B,GAAIqmB,GAAeH,EAAMlmB,GAAG8kB,MACxB5K,EAAQiM,EAAaE,EACzB,IAAc7X,SAAV0L,GAAuBA,IAAUla,EAAG,CAChCka,EAAQ,IACRgM,EAAMhM,EAAQ,GAAGgK,QAAU1V,OAC3B0X,EAAMhM,EAAQ,GAAGiK,QAAU,GAE/B+B,EAAMlmB,GAAGkkB,QAAU1V,OACnB0X,EAAMlmB,GAAGmkB,QAAU,CACnB,IAAImC,GAAgBtmB,EAAI,EAAIkmB,EAAMlmB,EAAI,GAAKrB,IAE/BuB,GAAS,EAAjBga,GACAoM,EAAcpC,QAAUgC,EAAMhM,EAAQ,GACtCoM,EAAcpC,QAAQE,UACtBkC,EAAcnC,QACVmC,EAAcpC,QAAQC,QAAU,IAEpCmC,EAAcpC,QAAU1V,OACxB8X,EAAcnC,QAAU,EAG5B,KAAK,GADDoC,GAAqBD,EAAcnC,QAAU,EACxC/Q,EAAIpT,EAAI,EAAGoT,GAAK,IAAKA,EAC1B8S,EAAM9S,GAAG+Q,QAAUoC,EACnBA,GAEJ,YAKZtC,EAAc7jB,UAAU4iB,OAAS,WAC7B,MAAOrkB,MAAKulB,SAGhBD,EAAc7jB,UAAUomB,UAAY,WAChC,MAAwBhY,UAAjB7P,KAAKulB,SAGhBD,EAAc7jB,UAAUqmB,iBAAmB,SAAS5hB,GAChD,IAAIA,EAAM6hB,iBAAV,CACA/nB,KAAKylB,SAML,KALA,GAAIuC,GAAS1C,EAAc2C,qBAAqB/hB,GAC5CpG,EAAUkoB,EAAOloB,QACjB6lB,GAAUqC,EAAO7B,OAEjBlY,EAAQjO,KACK6P,SAAV5B,GACH0X,EAAOnkB,KAAK0kB,EAAWjY,EAAMkY,MAAM9gB,MAAM,QACzC4I,EAAQA,EAAMsX,OAElBM,GAAkBF,GAClBC,EAA4BD,GAC5B9F,EAAKqI,kBAAkBhiB,EAAO,QAASwf,EAAiB5lB,EAAS6lB,IACjE9F,EAAKqI,kBAAkBhiB,EAAO,oBAAoB,KAmFtDof,EAAc2C,qBAAuB,SAAS/hB,GAC1C,GAAIigB,GAAQjgB,EAAMigB,MACdrmB,EAAUoG,EAAM+D,UAGpB,OAFAkc,GAAyB,gBAAVA,IAAsBA,EAAM5kB,OAAS,EACtCklB,EAAmBvgB,IAAU,yBAEvCpG,QAASA,EACTqmB,MAAOD,EAAWC,KAI1Bb,EAAc6C,kBAAoB,SAASjiB,EAAO8R,GAC9C,GAAuB,mBAAZ3Y,SAAyB,CAChC,GAAIS,EACJ,IAAqB,gBAAVoG,IAAuC,kBAAVA,GAAsB,CAC1D,GAAIigB,GAAQjgB,EAAMigB,KAClBrmB,GAAUkY,EAAQsP,EAAYnB,EAAOjgB,OAErCpG,GAAUkY,EAAQ7M,OAAOjF,EAET,mBAATkhB,GACPA,EAAKtnB,IACyB,kBAAhBT,SAAQC,KACC,gBAAhBD,SAAQC,MACfD,QAAQC,IAAIQ,KAKxBwlB,EAAc8C,mBAAqB,SAAUjE,GACzCmB,EAAc6C,kBAAkBhE,EAAQ,uCAG5CmB,EAAc+C,YAAc,WACxB,MAAoC,kBAAtBnoB,IAGlBolB,EAAcgD,mBACd,SAAStjB,EAAMujB,EAAcpE,EAAQ/F,GACjC,GAAIoK,IAAkB,CACtB,KACgC,kBAAjBD,KACPC,GAAkB,EACL,qBAATxjB,EACAujB,EAAanK,GAEbmK,EAAapE,EAAQ/F,IAG/B,MAAO9a,GACL0gB,EAAM7D,WAAW7c,GAGrB,GAAImlB,IAAmB,CACvB,KACIA,EAAmBC,EAAgB1jB,EAAMmf,EAAQ/F,GACnD,MAAO9a,GACLmlB,GAAmB,EACnBzE,EAAM7D,WAAW7c,GAGrB,GAAIqlB,IAAgB,CACpB,IAAIC,EACA,IACID,EAAgBC,EAAa5jB,EAAK8O,eAC9BqQ,OAAQA,EACR/F,QAASA,IAEf,MAAO9a,GACLqlB,GAAgB,EAChB3E,EAAM7D,WAAW7c,GAIpBmlB,GAAqBD,GAAoBG,GACjC,uBAAT3jB,GACAsgB,EAAc6C,kBAAkBhE,EAAQ,wBAqChD,IAAIoC,GAAe,WAAa,OAAO,GACnCU,EAAqB,uCAUzB3B,GAAcuD,UAAY,SAASlJ,EAAgBmJ,GAC/C,GAAKxD,EAAc+C,cAAnB,CAOA,IAAK,GAFDU,GACAC,EALAC,EAAkBtJ,EAAewG,MAAM9gB,MAAM,MAC7C6jB,EAAiBJ,EAAc3C,MAAM9gB,MAAM,MAC3C8jB,EAAa,GACbC,EAAY,GAGP/nB,EAAI,EAAGA,EAAI4nB,EAAgB1nB,SAAUF,EAAG,CAC7C,GAAI6D,GAAS6hB,EAAckC,EAAgB5nB,GAC3C,IAAI6D,EAAQ,CACR6jB,EAAgB7jB,EAAOgiB,SACvBiC,EAAajkB,EAAOuG,IACpB,QAGR,IAAK,GAAIpK,GAAI,EAAGA,EAAI6nB,EAAe3nB,SAAUF,EAAG,CAC5C,GAAI6D,GAAS6hB,EAAcmC,EAAe7nB,GAC1C,IAAI6D,EAAQ,CACR8jB,EAAe9jB,EAAOgiB,SACtBkC,EAAYlkB,EAAOuG,IACnB,QAGS,EAAb0d,GAA8B,EAAZC,IAAkBL,IAAkBC,GACtDD,IAAkBC,GAAgBG,GAAcC,IAIpD7C,EAAe,SAAS9a,GACpB,GAAI4b,EAAqB1Y,KAAKlD,GAAO,OAAO,CAC5C,IAAI4d,GAAOtC,EAActb,EACzB,OAAI4d,IACIA,EAAKnC,WAAa6B,GACjBI,GAAcE,EAAK5d,MAAQ4d,EAAK5d,MAAQ2d,GAClC,GAGR,KAIf,IAwEIR,GAxEA1oB,EAAoB,WACpB,GAAIopB,GAAsB,YACtBC,EAAmB,SAASpD,EAAOjgB,GACnC,MAAqB,gBAAVigB,GAA2BA,EAEnBtW,SAAf3J,EAAMlB,MACY6K,SAAlB3J,EAAMpG,QACCoG,EAAM+D,WAEVyc,EAAexgB,GAG1B,IAAqC,gBAA1BjG,OAAMupB,iBACsB,kBAA5BvpB,OAAMC,kBAAkC,CAC/CD,MAAMupB,gBAAkBvpB,MAAMupB,gBAAkB,EAChDnD,EAAoBiD,EACpBhC,EAAciC,CACd,IAAIrpB,GAAoBD,MAAMC,iBAK9B,OAHAqmB,GAAe,SAAS9a,GACpB,MAAO4b,GAAqB1Y,KAAKlD,IAE9B,SAAS4T,EAAUoK,GACtBxpB,MAAMupB,gBAAkBvpB,MAAMupB,gBAAkB,EAChDtpB,EAAkBmf,EAAUoK,GAC5BxpB,MAAMupB,gBAAkBvpB,MAAMupB,gBAAkB,GAGxD,GAAIrjB,GAAM,GAAIlG,MAEd,IAAyB,gBAAdkG,GAAIggB,OACXhgB,EAAIggB,MAAM9gB,MAAM,MAAM,GAAG1D,QAAQ,oBAAsB,EAIvD,MAHA0kB,GAAoB,IACpBiB,EAAciC,EACd/C,GAAoB,EACb,SAA2Bha,GAC9BA,EAAE2Z,OAAQ,GAAIlmB,QAAQkmB,MAI9B,IAAIuD,EACJ,KAAM,KAAM,IAAIzpB,OAChB,MAAMqD,GACFomB,EAAsB,SAAWpmB,GAErC,MAAM,SAAW6C,KAAQujB,GAWzBpC,EAAc,SAASnB,EAAOjgB,GAC1B,MAAqB,gBAAVigB,GAA2BA,EAEhB,gBAAVjgB,IACS,kBAAVA,IACQ2J,SAAf3J,EAAMlB,MACY6K,SAAlB3J,EAAMpG,QAGH4mB,EAAexgB,GAFXA,EAAM+D,YAKd,OAtBHoc,EAAoBiD,EACpBhC,EAAciC,EACP,SAA2B/c,GAC9BvM,MAAMupB,gBAAkBvpB,MAAMupB,gBAAkB,CAChD,KAAM,KAAM,IAAIvpB,OAChB,MAAMqD,GAAKkJ,EAAE2Z,MAAQ7iB,EAAE6iB,MACvBlmB,MAAMupB,gBAAkBvpB,MAAMupB,gBAAkB,SAqBxDd,EAAkB,WAClB,GAAI7I,EAAK8J,OACL,MAAO,UAAS3kB,EAAMmf,EAAQ/F,GAC1B,MAAa,qBAATpZ,EACO8I,QAAQ0K,KAAKxT,EAAMoZ,GAEnBtQ,QAAQ0K,KAAKxT,EAAMmf,EAAQ/F,GAI1C,IAAIwL,IAAmB,EACnBC,GAAgB,CACpB,KACI,GAAIjS,GAAK,GAAIgG,MAAKkM,YAAY,OAC9BF,GAAmBhS,YAAckS,aACnC,MAAOxmB,IACT,IAAKsmB,EACD,IACI,GAAIG,GAAQ1S,SAAS2S,YAAY,cACjCD,GAAME,gBAAgB,mBAAmB,GAAO,MAChDrM,KAAKsM,cAAcH,GACrB,MAAOzmB,GACLumB,GAAgB,EAGpBA,IACAjB,EAAe,SAAShP,EAAMuQ,GAC1B,GAAIJ,EAYJ,OAXIH,GACAG,EAAQ,GAAInM,MAAKkM,YAAYlQ,GACzBuQ,OAAQA,EACRC,SAAS,EACTC,YAAY,IAETzM,KAAKsM,gBACZH,EAAQ1S,SAAS2S,YAAY,eAC7BD,EAAME,gBAAgBrQ,GAAM,GAAO,EAAMuQ,IAGtCJ,GAASnM,KAAKsM,cAAcH,IAAS,GAIpD,IAAIO,KAMJ,OALAA,GAA0C,mBAAI,uBACpBxW,cAC1BwW,EAAwC,iBAAI,qBACpBxW,cAEjB,SAAS9O,EAAMmf,EAAQ/F,GAC1B,GAAI4E,GAAasH,EAAsBtlB,GACnC5D,EAASwc,KAAKoF,EAClB,OAAK5hB,IACQ,qBAAT4D,EACA5D,EAAOwD,KAAKgZ,KAAMQ,GAElBhd,EAAOwD,KAAKgZ,KAAMuG,EAAQ/F,IAEvB,IANa,KA0BhC,OAfuB,mBAAZ/e,UAAmD,mBAAjBA,SAAQ+nB,OACjDA,EAAO,SAAUtnB,GACbT,QAAQ+nB,KAAKtnB,IAEb+f,EAAK8J,QAAU7b,QAAQyc,OAAOC,MAC9BpD,EAAO,SAAStnB,GACZgO,QAAQyc,OAAO7nB,MAAM,QAAe5C,EAAU,YAE1C+f,EAAK8J,QAAyC,iBAAvB,GAAI1pB,QAAa,QAChDmnB,EAAO,SAAStnB,GACZT,QAAQ+nB,KAAK,KAAOtnB,EAAS,iBAKlCwlB,KAGJH,aAAa,EAAEtE,YAAY,KAAK4J,GAAG,SAAS1M,EAAQxe,EAAOC,GAC9D,YACAD,GAAOC,QAAU,SAASkrB,GAQ1B,QAASC,GAAYC,EAAWC,EAAUzM,GACtCpe,KAAK8qB,WAAaF,EAClB5qB,KAAK+qB,UAAYF,EACjB7qB,KAAKgrB,SAAW5M,EAGpB,QAAS6M,GAAcC,EAAW5nB,GAC9B,GAAI6nB,MACAC,EAAYC,EAASH,GAAWtmB,KAAKumB,EAAY7nB,EAErD,IAAI8nB,IAAcE,EAAU,MAAOF,EAEnC,IAAIG,GAAW9hB,EAAK0hB,EACpB,OAAII,GAAShqB,QACT+pB,EAAShoB,EAAI,GAAIkQ,GAAU,4GACpB8X,GAEJF,EAxBX,GAAIvL,GAAO9B,EAAQ,aACfjE,EAASiE,EAAQ,eACjBsN,EAAWxL,EAAKwL,SAChBC,EAAWzL,EAAKyL,SAChB7hB,EAAOsU,EAAQ,YAAYtU,KAC3B+J,EAAYsG,EAAOtG,SAyDvB,OAnCAmX,GAAYlpB,UAAU+pB,SAAW,SAAUloB,GAIvC,IAAK,GAHDmoB,GAAKzrB,KAAK+qB,UACV3M,EAAUpe,KAAKgrB,SACfU,EAAUtN,EAAQ+D,SACb9gB,EAAI,EAAGkM,EAAMvN,KAAK8qB,WAAWvpB,OAAYgM,EAAJlM,IAAWA,EAAG,CACxD,GAAIsqB,GAAO3rB,KAAK8qB,WAAWzpB,GACvBuqB,EAAkBD,IAAS1rB,OAClB,MAAR0rB,GAAgBA,EAAKlqB,oBAAqBxB,MAE/C,IAAI2rB,GAAmBtoB,YAAaqoB,GAAM,CACtC,GAAItiB,GAAMgiB,EAASI,GAAI7mB,KAAK8mB,EAASpoB,EACrC,OAAI+F,KAAQiiB,GACRZ,EAAYpnB,EAAI+F,EAAI/F,EACbonB,GAEJrhB,EACJ,GAAoB,kBAATsiB,KAAwBC,EAAiB,CACvD,GAAIC,GAAeZ,EAAcU,EAAMroB,EACvC,IAAIuoB,IAAiBP,EAAU,CAC3BhoB,EAAIgoB,EAAShoB,CACb,OACG,GAAIuoB,EAAc,CACrB,GAAIxiB,GAAMgiB,EAASI,GAAI7mB,KAAK8mB,EAASpoB,EACrC,OAAI+F,KAAQiiB,GACRZ,EAAYpnB,EAAI+F,EAAI/F,EACbonB,GAEJrhB,IAKnB,MADAqhB,GAAYpnB,EAAIA,EACTonB,GAGJC,KAGJvF,cAAc,GAAG0G,WAAW,GAAGjL,YAAY,KAAKkL,GAAG,SAAShO,EAAQxe,EAAOC,GAC9E,YACAD,GAAOC,QAAU,SAASC,EAAS6lB,EAAe0G,GAElD,QAASC,KACLjsB,KAAKksB,OAAS,GAAI5G,GAAc6G,KAgBpC,QAASC,KACL,MAAIJ,KAAsB,GAAIC,GAA9B,OAGJ,QAASE,KACL,GAAI/C,GAAYiD,EAAa9qB,OAAS,CACtC,OAAI6nB,IAAa,EACNiD,EAAajD,GAEjBvZ,OA3BX,GAAIwc,KAkCJ,OA9BAJ,GAAQxqB,UAAU6qB,aAAe,WACxBN,KACenc,SAAhB7P,KAAKksB,QACLG,EAAa7qB,KAAKxB,KAAKksB,SAI/BD,EAAQxqB,UAAU8qB,YAAc,WACvBP,KACenc,SAAhB7P,KAAKksB,QACLG,EAAazhB,OAgBrBnL,EAAQgC,UAAU+qB,aAAeL,EACjC1sB,EAAQgC,UAAU6qB,aAAeL,EAAQxqB,UAAU6qB,aACnD7sB,EAAQgC,UAAU8qB,YAAcN,EAAQxqB,UAAU8qB,YAE3CH,QAGDK,IAAI,SAAS1O,EAAQxe,EAAOC,GAClC,YACAD,GAAOC,QAAU,SAASC,EAAS6lB,GACnC,GAIIoH,GACAC,EALA3I,EAAQjG,EAAQ,cAChB6O,EAAU7O,EAAQ,eAAe6O,QACjC/M,EAAO9B,EAAQ,aACf8O,EAAiBhN,EAAKgN,eAGtBC,GAAY,GAAUjN,EAAK8J,WACR7b,QAAQU,IAAoB,gBACF,gBAA5BV,QAAQU,IAAc,SAqI3C,OAnIIse,IACA9I,EAAMlE,+BAGVrgB,EAAQgC,UAAUsrB,gCAAkC,WAChD/sB,KAAKgtB,2BACLhJ,EAAM5D,YAAYpgB,KAAKitB,0BAA2BjtB,KAAM6P,SAG5DpQ,EAAQgC,UAAUyrB,mCAAqC,WACnD5H,EAAcgD,mBAAmB,mBACHoE,EAA2B7c,OAAW7P,OAGxEP,EAAQgC,UAAUwrB,0BAA4B,WAC1C,GAAIjtB,KAAKmtB,wBAAyB,CAC9B,GAAIhJ,GAASnkB,KAAKotB,yBAA2BptB,KAAKqtB,aAClDrtB,MAAKstB,mCACLhI,EAAcgD,mBAAmB,qBACHqE,EAA4BxI,EAAQnkB,QAI1EP,EAAQgC,UAAU6rB,iCAAmC,WACjDttB,KAAKkiB,UAA6B,OAAjBliB,KAAKkiB,WAG1BziB,EAAQgC,UAAU8rB,mCAAqC,WACnDvtB,KAAKkiB,UAA6B,QAAjBliB,KAAKkiB,WAG1BziB,EAAQgC,UAAU+rB,8BAAgC,WAC9C,OAAyB,OAAjBxtB,KAAKkiB,WAAsB,GAGvCziB,EAAQgC,UAAUurB,yBAA2B,WACzChtB,KAAKkiB,UAA6B,QAAjBliB,KAAKkiB,WAG1BziB,EAAQgC,UAAUgsB,2BAA6B,WAC3CztB,KAAKkiB,UAA6B,SAAjBliB,KAAKkiB,UAClBliB,KAAKwtB,kCACLxtB,KAAKutB,qCACLvtB,KAAKktB,uCAIbztB,EAAQgC,UAAU0rB,sBAAwB,WACtC,OAAyB,QAAjBntB,KAAKkiB,WAAuB,GAGxCziB,EAAQgC,UAAUisB,sBAAwB,SAAUC,GAChD3tB,KAAKkiB,UAA6B,QAAjBliB,KAAKkiB,UACtBliB,KAAK4tB,qBAAuBD,GAGhCluB,EAAQgC,UAAUosB,sBAAwB,WACtC,OAAyB,QAAjB7tB,KAAKkiB,WAAuB,GAGxCziB,EAAQgC,UAAU2rB,sBAAwB,WACtC,MAAOptB,MAAK6tB,wBACN7tB,KAAK4tB,qBACL/d,QAGVpQ,EAAQgC,UAAUqsB,mBAAqB,WAInC,MAHIhB,KACA9sB,KAAKksB,OAAS,GAAI5G,GAActlB,KAAKwsB,iBAElCxsB,MAGXP,EAAQgC,UAAUssB,kBAAoB,SAAU7nB,EAAO8nB,GACnD,GAAIlB,GAAaD,EAAe3mB,GAAQ,CACpC,GAAI+H,GAAQjO,KAAKksB,MAIjB,IAHcrc,SAAV5B,GACI+f,IAAY/f,EAAQA,EAAMsX,SAEpB1V,SAAV5B,EACAA,EAAM6Z,iBAAiB5hB,OACpB,KAAKA,EAAM6hB,iBAAkB,CAChC,GAAIC,GAAS1C,EAAc2C,qBAAqB/hB,EAChD2Z,GAAKqI,kBAAkBhiB,EAAO,QAC1B8hB,EAAOloB,QAAU,KAAOkoB,EAAO7B,MAAM/e,KAAK,OAC9CyY,EAAKqI,kBAAkBhiB,EAAO,oBAAoB,MAK9DzG,EAAQgC,UAAUwsB,MAAQ,SAASnuB,GAC/B,GAAIouB,GAAU,GAAItB,GAAQ9sB,GACtB6H,EAAM3H,KAAKwsB,cACf,IAAI7kB,EACAA,EAAImgB,iBAAiBoG,OAClB,CACH,GAAIlG,GAAS1C,EAAc2C,qBAAqBiG,EAChDA,GAAQ/H,MAAQ6B,EAAOloB,QAAU,KAAOkoB,EAAO7B,MAAM/e,KAAK,MAE9Dke,EAAc6C,kBAAkB+F,EAAS,KAG7CzuB,EAAQ0uB,6BAA+B,SAAUhrB,GAC7CwpB,EAA2C,kBAAPxpB,GAAoBA,EAAK0M,QAGjEpQ,EAAQ2uB,4BAA8B,SAAUjrB,GAC5CupB,EAA0C,kBAAPvpB,GAAoBA,EAAK0M,QAGhEpQ,EAAQ4uB,gBAAkB,WACtB,GAAIrK,EAAM/D,mBACN6M,KAAc,EAEd,KAAM,IAAI7sB,OAAM,qGAEpB6sB,GAAYxH,EAAc+C,cACtByE,GACA9I,EAAMlE,gCAIdrgB,EAAQ6uB,mBAAqB,WACzB,MAAOxB,IAAaxH,EAAc+C,eAGjC/C,EAAc+C,gBACf5oB,EAAQ4uB,gBAAkB,aAC1BvB,GAAY,GAGT,WACH,MAAOA,OAIR3H,aAAa,EAAEC,cAAc,GAAGvE,YAAY,KAAK0N,IAAI,SAASxQ,EAAQxe,EAAOC,GAChF,YACA,IAAIqgB,GAAO9B,EAAQ,aACfxR,EAAcsT,EAAKtT,YACnBiiB,EAAyB3O,EAAK2O,sBAElCjvB,GAAOC,QAAU,SAASC,GAC1B,GAAIgvB,GAAW,WACX,MAAOzuB,OAEP0uB,EAAU,WACV,KAAM1uB,OAGN2uB,EAAU,SAAUtsB,EAAOusB,GAC3B,MAAe,KAAXA,EACO,WACH,KAAMvsB,IAEQ,IAAXusB,EACA,WACH,MAAOvsB,IAFR,OAQX5C,GAAQgC,UAAU,UAClBhC,EAAQgC,UAAUotB,WAAa,SAAUxsB,GACrC,MAAImsB,IAA0BjiB,EAAYlK,GAC/BrC,KAAKshB,MACRqN,EAAQtsB,EAAO,GACfwN,OACAA,OACAA,OACAA,QAGD7P,KAAKshB,MAAMmN,EAAU5e,OAAWA,OAAWxN,EAAOwN,SAG7DpQ,EAAQgC,UAAU,SAClBhC,EAAQgC,UAAUqtB,UAAY,SAAU3K,GACpC,MAAIqK,IAA0BjiB,EAAY4X,GAC/BnkB,KAAKshB,MACRqN,EAAQxK,EAAQ,GAChBtU,OACAA,OACAA,OACAA,QAGD7P,KAAKshB,MAAMoN,EAAS7e,OAAWA,OAAWsU,EAAQtU,YAI1DgR,YAAY,KAAKkO,IAAI,SAAShR,EAAQxe,EAAOC,GAChD,YACAD,GAAOC,QAAU,SAASC,EAASshB,GACnC,GAAIiO,GAAgBvvB,EAAQmM,MAE5BnM,GAAQgC,UAAUwtB,KAAO,SAAU9rB,GAC/B,MAAO6rB,GAAchvB,KAAMmD,EAAI,KAAM4d,IAGzCthB,EAAQwvB,KAAO,SAAU/Q,EAAU/a,GAC/B,MAAO6rB,GAAc9Q,EAAU/a,EAAI,KAAM4d,UAIvCmO,IAAI,SAASnR,EAAQxe,EAAOC,GAClC,YAOA,SAAS2vB,GAASC,EAAcC,GAC5B,QAASC,GAASxvB,GACd,MAAME,gBAAgBsvB,IACtBpH,EAAkBloB,KAAM,UACD,gBAAZF,GAAuBA,EAAUuvB,GAC5CnH,EAAkBloB,KAAM,OAAQovB,QAC5BnvB,MAAMC,kBACND,MAAMC,kBAAkBF,KAAMA,KAAK+E,aAEnC9E,MAAM2E,KAAK5E,QAPyB,GAAIsvB,GAASxvB,GAWzD,MADAQ,GAASgvB,EAAUrvB,OACZqvB,EAmDX,QAASC,GAAiBzvB,GACtB,MAAME,gBAAgBuvB,IAEtBrH,EAAkBloB,KAAM,OAAQ,oBAChCkoB,EAAkBloB,KAAM,UAAWF,GACnCE,KAAKwvB,MAAQ1vB,EACbE,KAAoB,eAAI,OAEpBF,YAAmBG,QACnBioB,EAAkBloB,KAAM,UAAWF,EAAQA,SAC3CooB,EAAkBloB,KAAM,QAASF,EAAQqmB,QAClClmB,MAAMC,mBACbD,MAAMC,kBAAkBF,KAAMA,KAAK+E,eAV5B,GAAIwqB,GAAiBzvB,GAxEpC,GAsBI2vB,GAAYC,EAtBZC,EAAM5R,EAAQ,YACd6R,EAAeD,EAAIE,OACnBhQ,EAAO9B,EAAQ,aACfzd,EAAWuf,EAAKvf,SAChB4nB,EAAoBrI,EAAKqI,kBAmBzB0E,EAAUuC,EAAS,UAAW,WAC9BlL,EAAoBkL,EAAS,oBAAqB,sBAClDW,EAAeX,EAAS,eAAgB,iBACxCY,EAAiBZ,EAAS,iBAAkB,kBAChD,KACIM,EAAajc,UACbkc,EAAc7V,WAChB,MAAMvW,GACJmsB,EAAaN,EAAS,YAAa,cACnCO,EAAcP,EAAS,aAAc,eAMzC,IAAK,GAHD5uB,GAAU,sHACuD8E,MAAM,KAElEhE,EAAI,EAAGA,EAAId,EAAQgB,SAAUF,EACS,kBAAhCwC,OAAMpC,UAAUlB,EAAQc,MAC/B0uB,EAAetuB,UAAUlB,EAAQc,IAAMwC,MAAMpC,UAAUlB,EAAQc,IAIvEsuB,GAAIK,eAAeD,EAAetuB,UAAW,UACzCY,MAAO,EACP4tB,cAAc,EACdC,UAAU,EACVC,YAAY,IAEhBJ,EAAetuB,UAAyB,eAAI,CAC5C,IAAI2uB,GAAQ,CACZL,GAAetuB,UAAUwI,SAAW,WAChC,GAAIomB,GAASxsB,MAAc,EAARusB,EAAY,GAAGhpB,KAAK,KACnCiC,EAAM,KAAOgnB,EAAS,sBAC1BD,KACAC,EAASxsB,MAAc,EAARusB,EAAY,GAAGhpB,KAAK,IACnC,KAAK,GAAI/F,GAAI,EAAGA,EAAIrB,KAAKuB,SAAUF,EAAG,CAGlC,IAAK,GAFDoH,GAAMzI,KAAKqB,KAAOrB,KAAO,4BAA8BA,KAAKqB,GAAK,GACjEivB,EAAQ7nB,EAAIpD,MAAM,MACboP,EAAI,EAAGA,EAAI6b,EAAM/uB,SAAUkT,EAChC6b,EAAM7b,GAAK4b,EAASC,EAAM7b,EAE9BhM,GAAM6nB,EAAMlpB,KAAK,MACjBiC,GAAOZ,EAAM,KAGjB,MADA2nB,KACO/mB,GAmBX/I,EAASivB,EAAkBtvB,MAE3B,IAAIswB,GAAatwB,MAA8B,sBAC1CswB,KACDA,EAAaX,GACT3L,kBAAmBA,EACnB6L,aAAcA,EACdP,iBAAkBA,EAClBiB,eAAgBjB,EAChBQ,eAAgBA,IAEpB7H,EAAkBjoB,MAAO,yBAA0BswB,IAGvDhxB,EAAOC,SACHS,MAAOA,MACPuT,UAAWic,EACX5V,WAAY6V,EACZzL,kBAAmBsM,EAAWtM,kBAC9BsL,iBAAkBgB,EAAWhB,iBAC7BO,aAAcS,EAAWT,aACzBC,eAAgBQ,EAAWR,eAC3BnD,QAASA,KAGVd,WAAW,GAAGjL,YAAY,KAAK4P,IAAI,SAAS1S,EAAQxe,EAAOC,GAC9D,GAAIkxB,GAAQ,WACR,YACA,OAAgB7gB,UAAT7P,OAGX,IAAI0wB,EACAnxB,EAAOC,SACHqwB,OAAQnmB,OAAOmmB,OACfG,eAAgBtmB,OAAOsmB,eACvBW,cAAejnB,OAAO4B,yBACtB7B,KAAMC,OAAOD,KACbmnB,MAAOlnB,OAAOE,oBACdinB,eAAgBnnB,OAAOmnB,eACvB/sB,QAASD,MAAMC,QACf4sB,MAAOA,EACPI,mBAAoB,SAASrpB,EAAKyF,GAC9B,GAAI6jB,GAAarnB,OAAO4B,yBAAyB7D,EAAKyF,EACtD,SAAW6jB,IAAcA,EAAWb,WAAYa,EAAWvlB,WAGhE,CACH,GAAIwlB,MAAS9lB,eACTzC,KAASwB,SACT0J,KAAW5O,YAAYtD,UAEvBwvB,EAAa,SAAUzkB,GACvB,GAAInD,KACJ,KAAK,GAAIlH,KAAOqK,GACRwkB,EAAIpsB,KAAK4H,EAAGrK,IACZkH,EAAI7H,KAAKW,EAGjB,OAAOkH,IAGP6nB,EAAsB,SAAS1kB,EAAGrK,GAClC,OAAQE,MAAOmK,EAAErK,KAGjBgvB,EAAuB,SAAU3kB,EAAGrK,EAAKkJ,GAEzC,MADAmB,GAAErK,GAAOkJ,EAAKhJ,MACPmK,GAGP4kB,EAAe,SAAU3pB,GACzB,MAAOA,IAGP4pB,EAAuB,SAAU5pB,GACjC,IACI,MAAOiC,QAAOjC,GAAK1C,YAAYtD,UAEnC,MAAO6B,GACH,MAAOqQ,KAIX2d,EAAe,SAAU7pB,GACzB,IACI,MAAyB,mBAAlBgB,EAAI7D,KAAK6C,GAEpB,MAAMnE,GACF,OAAO,GAIf/D,GAAOC,SACHsE,QAASwtB,EACT7nB,KAAMwnB,EACNL,MAAOK,EACPjB,eAAgBmB,EAChBR,cAAeO,EACfrB,OAAQuB,EACRP,eAAgBQ,EAChBX,MAAOA,EACPI,mBAAoB,WAChB,OAAO,UAKbS,IAAI,SAASxT,EAAQxe,EAAOC,GAClC,YACAD,GAAOC,QAAU,SAASC,EAASshB,GACnC,GAAIyQ,GAAa/xB,EAAQiL,GAEzBjL,GAAQgC,UAAUgwB,OAAS,SAAUtuB,EAAI6V,GACrC,MAAOwY,GAAWxxB,KAAMmD,EAAI6V,EAAS+H,IAGzCthB,EAAQgyB,OAAS,SAAUvT,EAAU/a,EAAI6V,GACrC,MAAOwY,GAAWtT,EAAU/a,EAAI6V,EAAS+H,UAIvC2Q,IAAI,SAAS3T,EAAQxe,EAAOC,GAClC,YACAD,GAAOC,QAAU,SAASC,EAASirB,EAAa1J,GAMhD,QAAS2Q,KACL,MAAO3xB,MAEX,QAAS4xB,KACL,KAAM5xB,MAEV,QAAS6xB,GAAQhU,GACb,MAAO,YACH,MAAOA,IAGf,QAASiU,GAAOjU,GACZ,MAAO,YACH,KAAMA,IAGd,QAASkU,GAAgB1oB,EAAK2oB,EAAeC,GACzC,GAAI9yB,EAMJ,OAJIA,GADAqvB,GAA0BjiB,EAAYylB,GAC/BC,EAAcJ,EAAQG,GAAiBF,EAAOE,GAE9CC,EAAcN,EAAaC,EAE/BvoB,EAAIiY,MAAMniB,EAAMuvB,EAAS7e,OAAWmiB,EAAeniB,QAG9D,QAASqiB,GAAeF,GACpB,GAAI5T,GAAUpe,KAAKoe,QACf+T,EAAUnyB,KAAKmyB,QAEf9oB,EAAM+U,EAAQgE,WACA+P,EAAQvtB,KAAKwZ,EAAQ+D,UACrBgQ,GAElB,IAAYtiB,SAARxG,EAAmB,CACnB,GAAIyY,GAAed,EAAoB3X,EAAK+U,EAC5C,IAAI0D,YAAwBriB,GAExB,MADAqiB,GAAeA,EAAaE,UACrB+P,EAAgBjQ,EAAckQ,EACb5T,EAAQ6T,eAIxC,MAAI7T,GAAQgU,cACR1H,EAAYpnB,EAAI0uB,EACTtH,GAEAsH,EAIf,QAASK,GAAWhwB,GAChB,GAAI+b,GAAUpe,KAAKoe,QACf+T,EAAUnyB,KAAKmyB,QAEf9oB,EAAM+U,EAAQgE,WACA+P,EAAQvtB,KAAKwZ,EAAQ+D,SAAU9f,GAC/B8vB,EAAQ9vB,EAE1B,IAAYwN,SAARxG,EAAmB,CACnB,GAAIyY,GAAed,EAAoB3X,EAAK+U,EAC5C,IAAI0D,YAAwBriB,GAExB,MADAqiB,GAAeA,EAAaE,UACrB+P,EAAgBjQ,EAAczf,GAAO,GAGpD,MAAOA,GAvEX,GAAIwd,GAAO9B,EAAQ,aACfyQ,EAAyB3O,EAAK2O,uBAC9BjiB,EAAcsT,EAAKtT,YACnBmiB,EAAU7O,EAAK6O,OAuEnBjvB,GAAQgC,UAAU6wB,oBAAsB,SAAUH,EAASI,GACvD,GAAuB,kBAAZJ,GAAwB,MAAOnyB,MAAKb,MAE/C,IAAIqzB,IACApU,QAASpe,KACTmyB,QAASA,EAGb,OAAOnyB,MAAKshB,MACJiR,EAAYL,EAAiBG,EAC7BE,EAAYL,EAAiBriB,OAAWA,OACxC2iB,EAAmB3iB,SAG/BpQ,EAAQgC,UAAUgxB,OAClBhzB,EAAQgC,UAAU,WAAa,SAAU0wB,GACrC,MAAOnyB,MAAKsyB,oBAAoBH,GAAS,IAG7C1yB,EAAQgC,UAAUixB,IAAM,SAAUP,GAC9B,MAAOnyB,MAAKsyB,oBAAoBH,GAAS,OAI1CtR,YAAY,KAAK8R,IAAI,SAAS5U,EAAQxe,EAAOC,GAChD,YACAD,GAAOC,QAAU,SAASC,EACAmzB,EACA7R,EACAC,GAQ1B,QAAS6R,GAAwBxwB,EAAOywB,EAAeC,GACnD,IAAK,GAAI1xB,GAAI,EAAGA,EAAIyxB,EAAcvxB,SAAUF,EAAG,CAC3C0xB,EAAYzG,cACZ,IAAIpnB,GAASmmB,EAASyH,EAAczxB,IAAIgB,EAExC,IADA0wB,EAAYxG,cACRrnB,IAAWomB,EAAU,CACrByH,EAAYzG,cACZ,IAAIjjB,GAAM5J,EAAQ+D,OAAO8nB,EAAShoB,EAElC,OADAyvB,GAAYxG,cACLljB,EAEX,GAAIyY,GAAed,EAAoB9b,EAAQ6tB,EAC/C,IAAIjR,YAAwBriB,GAAS,MAAOqiB,GAEhD,MAAO,MAGX,QAASkR,GAAaC,EAAmB5T,EAAU6T,EAAc/M,GAC7D,GAAI/H,GAAUpe,KAAKgrB,SAAW,GAAIvrB,GAAQshB,EAC1C3C,GAAQ0P,qBACR9tB,KAAKmzB,OAAShN,EACdnmB,KAAKozB,mBAAqBH,EAC1BjzB,KAAKqzB,UAAYhU,EACjBrf,KAAKszB,WAAazjB,OAClB7P,KAAKuzB,eAAyC,kBAAjBL,IACtBA,GAAcjsB,OAAO6rB,GACtBA,EAjCV,GAAIhZ,GAASiE,EAAQ,eACjBvK,EAAYsG,EAAOtG,UACnBqM,EAAO9B,EAAQ,aACfuN,EAAWzL,EAAKyL,SAChBD,EAAWxL,EAAKwL,SAChByH,IA+BJE,GAAavxB,UAAU2c,QAAU,WAC7B,MAAOpe,MAAKgrB,UAGhBgI,EAAavxB,UAAU+xB,KAAO,WAC1BxzB,KAAKszB,WAAatzB,KAAKozB,mBAAmBxuB,KAAK5E,KAAKqzB,WACpDrzB,KAAKqzB,UACDrzB,KAAKozB,mBAAqBvjB,OAC9B7P,KAAKyzB,MAAM5jB,SAGfmjB,EAAavxB,UAAUiyB,UAAY,SAAUxuB,GACzC,GAAIA,IAAWomB,EACX,MAAOtrB,MAAKgrB,SAASvG,gBAAgBvf,EAAO5B,GAAG,GAAO,EAG1D,IAAIjB,GAAQ6C,EAAO7C,KACnB,IAAI6C,EAAOyuB,QAAS,EAChB3zB,KAAKgrB,SAASrJ,iBAAiBtf,OAC5B,CACH,GAAIyf,GAAed,EAAoB3e,EAAOrC,KAAKgrB,SACnD,MAAMlJ,YAAwBriB,MAC1BqiB,EACI+Q,EAAwB/Q,EACA9hB,KAAKuzB,eACLvzB,KAAKgrB,UACZ,OAAjBlJ,GAQA,WAPA9hB,MAAK4zB,OACD,GAAIpgB,GACA,oGAAoHrO,QAAQ,KAAM9C,GAClI,oBACArC,KAAKmzB,OAAO9tB,MAAM,MAAM8O,MAAM,EAAG,IAAI/M,KAAK,OAM1D0a,GAAaR,MACTthB,KAAKyzB,MACLzzB,KAAK4zB,OACL/jB,OACA7P,KACA,QAKZgzB,EAAavxB,UAAUmyB,OAAS,SAAUzP,GACtCnkB,KAAKgrB,SAAS+C,kBAAkB5J,GAChCnkB,KAAKgrB,SAASsB,cACd,IAAIpnB,GAASmmB,EAASrrB,KAAKszB,WAAW,UACjC1uB,KAAK5E,KAAKszB,WAAYnP,EAC3BnkB,MAAKgrB,SAASuB,cACdvsB,KAAK0zB,UAAUxuB,IAGnB8tB,EAAavxB,UAAUgyB,MAAQ,SAAUpxB,GACrCrC,KAAKgrB,SAASsB,cACd,IAAIpnB,GAASmmB,EAASrrB,KAAKszB,WAAW5uB,MAAME,KAAK5E,KAAKszB,WAAYjxB,EAClErC,MAAKgrB,SAASuB,cACdvsB,KAAK0zB,UAAUxuB,IAGnBzF,EAAQwF,UAAY,SAAUguB,EAAmBja,GAC7C,GAAiC,kBAAtBia,GACP,KAAM,IAAIzf,GAAU,yEAExB,IAAI0f,GAAexpB,OAAOsP,GAASka,aAC/BW,EAAgBb,EAChB7M,GAAQ,GAAIlmB,QAAQkmB,KACxB,OAAO,YACH,GAAI2N,GAAYb,EAAkB/kB,MAAMlO,KAAM+H,WAC1CgsB,EAAQ,GAAIF,GAAchkB,OAAWA,OAAWqjB,EACtB/M,EAG9B,OAFA4N,GAAMT,WAAaQ,EACnBC,EAAMN,MAAM5jB,QACLkkB,EAAM3V,YAIrB3e,EAAQwF,UAAU+uB,gBAAkB,SAAS7wB,GACzC,GAAkB,kBAAPA,GAAmB,KAAM,IAAIqQ,GAAU,0DAClDsf,GAActxB,KAAK2B,IAGvB1D,EAAQs0B,MAAQ,SAAUd,GACtB,GAAiC,kBAAtBA,GACP,MAAOL,GAAa,yEAExB,IAAImB,GAAQ,GAAIf,GAAaC,EAAmBjzB,MAC5CqJ,EAAM0qB,EAAM3V,SAEhB,OADA2V,GAAMP,KAAK/zB,EAAQs0B,OACZ1qB,MAIR+b,cAAc,GAAGvE,YAAY,KAAKoT,IAAI,SAASlW,EAAQxe,EAAOC,GACjE,YACAD,GAAOC,QACP,SAASC,EAASy0B,EAAclT,EAAqBD,GACrD,CAAA,GAAIlB,GAAO9B,EAAQ,YACD8B,GAAK0D,YACR1D,EAAKwL,SACLxL,EAAKyL,SA8DpB7rB,EAAQ2H,KAAO,WACX,GACIjE,GADAiT,EAAOrO,UAAUxG,OAAS,CAE9B,IAAI6U,EAAO,GAAgC,kBAApBrO,WAAUqO,GAAsB,CACnDjT,EAAK4E,UAAUqO,EAGP,IAAI/M,GAyB0C,IAAI,GAA1Doa,GAAQ1b,UAAUxG,OAAWkE,EAAO,GAAI5B,OAAM4f,GAAgBC,EAAM,EAASD,EAANC,IAAeA,EAAMje,EAAKie,GAAO3b,UAAU2b,EAClHvgB,IAAIsC,EAAKmF,KACb,IAAIvB,GAAM,GAAI6qB,GAAazuB,GAAM2Y,SACjC,OAAcvO,UAAP1M,EAAmBkG,EAAI8qB,OAAOhxB,GAAMkG,MAK5CwX,YAAY,KAAKuT,IAAI,SAASrW,EAAQxe,EAAOC,GAChD,YACAD,GAAOC,QAAU,SAASC,EACAy0B,EACAtB,EACA5R,EACAD,GAQ1B,QAASsT,GAAoBnW,EAAU/a,EAAImxB,EAAOC,GAC9Cv0B,KAAKw0B,aAAatW,GAClBle,KAAKgrB,SAAS8C,qBACd9tB,KAAK+qB,UAAY5nB,EACjBnD,KAAKy0B,iBAAmBF,IAAYxT,EAC9B,GAAIld,OAAM7D,KAAKuB,UACf,KACNvB,KAAK00B,OAASJ,EACdt0B,KAAK20B,UAAY,EACjB30B,KAAK40B,OAASN,GAAS,KAASO,EAChC7Q,EAAM3D,OAAOnf,EAAMlB,KAAM6P,QAG7B,QAAS3O,KAAQlB,KAAK80B,OAAOjlB,OAAW,IAmFxC,QAASnF,GAAIwT,EAAU/a,EAAI6V,EAASub,GAChC,GAAID,GAA2B,gBAAZtb,IAAoC,OAAZA,EACrCA,EAAQ+b,YACR,CAGN,OAFAT,GAAyB,gBAAVA,IACX9a,SAAS8a,IAAUA,GAAS,EAAIA,EAAQ,EACrC,GAAID,GAAoBnW,EAAU/a,EAAImxB,EAAOC,GA7GxD,GAAIvQ,GAAQjG,EAAQ,cAChB8B,EAAO9B,EAAQ,aACfsN,EAAWxL,EAAKwL,SAChBC,EAAWzL,EAAKyL,SAChB0J,KACAH,IAcJhV,GAAKvf,SAAS+zB,EAAqBH,GAGnCG,EAAoB5yB,UAAUR,MAAQ,aAEtCozB,EAAoB5yB,UAAUwzB,kBAAoB,SAAU5yB,EAAOkZ,GAC/D,GAAI2Z,GAASl1B,KAAKm1B,QACd5zB,EAASvB,KAAKuB,SACd6zB,EAAkBp1B,KAAKy0B,iBACvBH,EAAQt0B,KAAK00B,MACjB,IAAIQ,EAAO3Z,KAAWyZ,GAElB,GADAE,EAAO3Z,GAASlZ,EACZiyB,GAAS,IACTt0B,KAAK20B,YACL30B,KAAKygB,cACDzgB,KAAKq1B,eAAe,WAEzB,CACH,GAAIf,GAAS,GAAKt0B,KAAK20B,WAAaL,EAGhC,MAFAY,GAAO3Z,GAASlZ,MAChBrC,MAAK40B,OAAOpzB,KAAK+Z,EAGG,QAApB6Z,IAA0BA,EAAgB7Z,GAASlZ,EAEvD,IAAIwoB,GAAW7qB,KAAK+qB,UAChB1L,EAAWrf,KAAKgrB,SAAS7I,QAC7BniB,MAAKgrB,SAASsB,cACd,IAAIjjB,GAAMgiB,EAASR,GAAUjmB,KAAKya,EAAUhd,EAAOkZ,EAAOha,EAE1D,IADAvB,KAAKgrB,SAASuB,cACVljB,IAAQiiB,EAAU,MAAOtrB,MAAKkhB,QAAQ7X,EAAI/F,EAE9C,IAAIwe,GAAed,EAAoB3X,EAAKrJ,KAAKgrB,SACjD,IAAIlJ,YAAwBriB,GAAS,CAEjC,GADAqiB,EAAeA,EAAaE,UACxBF,EAAaJ,aAGb,MAFI4S,IAAS,GAAGt0B,KAAK20B,YACrBO,EAAO3Z,GAASyZ,EACTlT,EAAawT,mBAAmBt1B,KAAMub,EAC1C,KAAIuG,EAAayT,eAGpB,MAAOv1B,MAAKkhB,QAAQY,EAAa0T,UAFjCnsB,GAAMyY,EAAa2T,SAK3BP,EAAO3Z,GAASlS,EAEpB,GAAIqsB,KAAkB11B,KAAK21B,cACvBD,IAAiBn0B,IACO,OAApB6zB,EACAp1B,KAAKu0B,QAAQW,EAAQE,GAErBp1B,KAAK41B,SAASV,KAM1Bb,EAAoB5yB,UAAUgf,YAAc,WAIxC,IAHA,GAAItJ,GAAQnX,KAAK40B,OACbN,EAAQt0B,KAAK00B,OACbQ,EAASl1B,KAAKm1B,QACXhe,EAAM5V,OAAS,GAAKvB,KAAK20B,UAAYL,GAAO,CAC/C,GAAIt0B,KAAKq1B,cAAe,MACxB,IAAI9Z,GAAQpE,EAAMvM,KAClB5K,MAAKi1B,kBAAkBC,EAAO3Z,GAAQA,KAI9C8Y,EAAoB5yB,UAAU8yB,QAAU,SAAUsB,EAAUX,GAIxD,IAAK,GAHD3nB,GAAM2nB,EAAO3zB,OACb8H,EAAM,GAAIxF,OAAM0J,GAChBkH,EAAI,EACCpT,EAAI,EAAOkM,EAAJlM,IAAWA,EACnBw0B,EAASx0B,KAAIgI,EAAIoL,KAAOygB,EAAO7zB,GAEvCgI,GAAI9H,OAASkT,EACbzU,KAAK41B,SAASvsB,IAGlBgrB,EAAoB5yB,UAAU2zB,gBAAkB,WAC5C,MAAOp1B,MAAKy0B,kBAYhBh1B,EAAQgC,UAAUiJ,IAAM,SAAUvH,EAAI6V,GAClC,MAAkB,kBAAP7V,GAA0ByvB,EAAa,2DAE3CloB,EAAI1K,KAAMmD,EAAI6V,EAAS,MAAMoF,WAGxC3e,EAAQiL,IAAM,SAAUwT,EAAU/a,EAAI6V,EAASub,GAC3C,MAAkB,kBAAPpxB,GAA0ByvB,EAAa,2DAC3CloB,EAAIwT,EAAU/a,EAAI6V,EAASub,GAASnW,cAM5C+G,aAAa,EAAEtE,YAAY,KAAKiV,IAAI,SAAS/X,EAAQxe,EAAOC,GAC/D,YACAD,GAAOC,QACP,SAASC,EAASshB,EAAUC,EAAqB4R,GACjD,GAAI/S,GAAO9B,EAAQ,aACfsN,EAAWxL,EAAKwL,QAEpB5rB,GAAQ2B,OAAS,SAAU+B,GACvB,GAAkB,kBAAPA,GACP,KAAM,IAAI1D,GAAQ+T,UAAU,0DAEhC,OAAO,YACH,GAAInK,GAAM,GAAI5J,GAAQshB,EACtB1X,GAAIykB,qBACJzkB,EAAIijB,cACJ,IAAIjqB,GAAQgpB,EAASloB,GAAI+K,MAAMlO,KAAM+H,UAGrC,OAFAsB,GAAIkjB,cACJljB,EAAI0sB,sBAAsB1zB,GACnBgH,IAIf5J,EAAQu2B,QAAUv2B,EAAQ,OAAS,SAAU0D,EAAIsC,EAAMkC,GACnD,GAAkB,kBAAPxE,GACP,MAAOyvB,GAAa,0DAExB,IAAIvpB,GAAM,GAAI5J,GAAQshB,EACtB1X,GAAIykB,qBACJzkB,EAAIijB,cACJ,IAAIjqB,GAAQwd,EAAK/b,QAAQ2B,GACnB4lB,EAASloB,GAAI+K,MAAMvG,EAAKlC,GACxB4lB,EAASloB,GAAIyB,KAAK+C,EAAKlC,EAG7B,OAFA4D,GAAIkjB,cACJljB,EAAI0sB,sBAAsB1zB,GACnBgH,GAGX5J,EAAQgC,UAAUs0B,sBAAwB,SAAU1zB,GAC5CA,IAAUwd,EAAKyL,SACftrB,KAAKykB,gBAAgBpiB,EAAMiB,GAAG,GAAO,GAErCtD,KAAK2hB,iBAAiBtf,GAAO,OAKlCwe,YAAY,KAAKoV,IAAI,SAASlY,EAAQxe,EAAOC,GAChD,YACAD,GAAOC,QAAU,SAASC,GAM1B,QAASy2B,GAAcjtB,EAAKktB,GACxB,GAAI/X,GAAUpe,IACd,KAAK6f,EAAK/b,QAAQmF,GAAM,MAAOmtB,GAAexxB,KAAKwZ,EAASnV,EAAKktB,EACjE,IAAI9sB,GAAMgiB,EAAS8K,GAAUjoB,MAAMkQ,EAAQ+D,UAAW,MAAMlb,OAAOgC,GAC/DI,KAAQiiB,GACRtH,EAAM7D,WAAW9W,EAAI/F,GAI7B,QAAS8yB,GAAentB,EAAKktB,GACzB,GAAI/X,GAAUpe,KACVqf,EAAWjB,EAAQ+D,SACnB9Y,EAAcwG,SAAR5G,EACJoiB,EAAS8K,GAAUvxB,KAAKya,EAAU,MAClCgM,EAAS8K,GAAUvxB,KAAKya,EAAU,KAAMpW,EAC1CI,KAAQiiB,GACRtH,EAAM7D,WAAW9W,EAAI/F,GAG7B,QAAS+yB,GAAalS,EAAQgS,GAC1B,GAAI/X,GAAUpe,IACd,KAAKmkB,EAAQ,CACT,GAAIvC,GAASxD,EAAQ4D,UACjBsU,EAAY1U,EAAOwL,uBACvBkJ,GAAU9G,MAAQrL,EAClBA,EAASmS,EAEb,GAAIjtB,GAAMgiB,EAAS8K,GAAUvxB,KAAKwZ,EAAQ+D,SAAUgC,EAChD9a,KAAQiiB,GACRtH,EAAM7D,WAAW9W,EAAI/F,GAlC7B,GAAIuc,GAAO9B,EAAQ,aACfiG,EAAQjG,EAAQ,cAChBsN,EAAWxL,EAAKwL,SAChBC,EAAWzL,EAAKyL,QAmCpB7rB,GAAQgC,UAAU80B,WAClB92B,EAAQgC,UAAU+0B,QAAU,SAAUL,EAAUnd,GAC5C,GAAuB,kBAAZmd,GAAwB,CAC/B,GAAIM,GAAUL,CACEvmB,UAAZmJ,GAAyBtP,OAAOsP,GAASmb,SACzCsC,EAAUP,GAEdl2B,KAAKshB,MACDmV,EACAJ,EACAxmB,OACA7P,KACAm2B,GAGR,MAAOn2B,UAIRmlB,aAAa,EAAEtE,YAAY,KAAK6V,IAAI,SAAS3Y,EAAQxe,EAAOC,GAC/D,YACAD,GAAOC,QAAU,SAASC,EAASy0B,GACnC,GAAIrU,GAAO9B,EAAQ,aACfiG,EAAQjG,EAAQ,cAChBsN,EAAWxL,EAAKwL,SAChBC,EAAWzL,EAAKyL,QAEpB7rB,GAAQgC,UAAUk1B,WAAa,SAAUxE,GACrC,MAAOnyB,MAAKshB,MAAMzR,OAAWA,OAAWsiB,EAAStiB,OAAWA,SAGhEpQ,EAAQgC,UAAUwgB,UAAY,SAAU2U,GAChC52B,KAAK62B,qCACT72B,KAAKgiB,UAAU8U,mBAAmBF,IAItCn3B,EAAQgC,UAAUs1B,mBAAqB,SAAUxb,GAC7C,MAAiB,KAAVA,EACDvb,KAAKg3B,kBACLh3B,MAAMub,GAAS,GAAKA,EAAQ,EAAI,IAG1C9b,EAAQgC,UAAUw1B,gBAAkB,SAAUC,GAC1C,GAAIN,GAAgBM,EAAY70B,MAC5B8vB,EAAU+E,EAAY/E,QACtB/T,EAAU8Y,EAAY9Y,QACtBiB,EAAW6X,EAAY7X,SAEvBhW,EAAMgiB,EAAS8G,GAASvtB,KAAKya,EAAUuX,EAC3C,IAAIvtB,IAAQiiB,GACR,GAAa,MAATjiB,EAAI/F,GACW,4BAAf+F,EAAI/F,EAAE0B,KAAoC,CAC1C,GAAIiJ,GAAQ4R,EAAKgN,eAAexjB,EAAI/F,GAC9B+F,EAAI/F,EAAI,GAAIrD,OAAM4f,EAAK5V,SAASZ,EAAI/F,GAC1C8a,GAAQ2P,kBAAkB9f,GAC1BmQ,EAAQ6D,UAAU5Y,EAAI/F,QAEnB+F,aAAe5J,GACtB4J,EAAIiY,MAAMlD,EAAQ6D,UAAW,KAAM,KAAM7D,EAASvO,QAElDuO,EAAQ6D,UAAU5Y,IAK1B5J,EAAQgC,UAAUq1B,mBAAqB,SAAUF,GAG7C,IAAK,GAFDrpB,GAAMvN,KAAKwlB,UACX/gB,EAAWzE,KAAKiiB,UACX5gB,EAAI,EAAOkM,EAAJlM,EAASA,IAAK,CAC1B,GAAI8wB,GAAUnyB,KAAK+2B,mBAAmB11B,GAClC+c,EAAUpe,KAAKm3B,WAAW91B,EAC9B,IAAM+c,YAAmB3e,GAWF,kBAAZ0yB,GACPnO,EAAM3D,OAAOrgB,KAAKi3B,gBAAiBj3B,MAC/BmyB,QAASA,EACT/T,QAASA,EACTiB,SAAUrf,KAAKo3B,YAAY/1B,GAC3BgB,MAAOu0B,IAGX5S,EAAM3D,OAAO5b,EAAU2Z,EAASwY,OAnBpC,CACI,GAAIvX,GAAWrf,KAAKo3B,YAAY/1B,EACT,mBAAZ8wB,GACPA,EAAQvtB,KAAKya,EAAUuX,EAAexY,GAC/BiB,YAAoB6U,KACnB7U,EAASgW,eACjBhW,EAASgY,mBAAmBT,EAAexY,SAmBxD+G,aAAa,EAAEtE,YAAY,KAAKyW,IAAI,SAASvZ,EAAQxe,EAAOC,GAC/D,YACAD,GAAOC,QAAU,WAqCjB,QAASC,GAAQ83B,GACb,GAAwB,kBAAbA,GACP,KAAM,IAAI/jB,GAAU,yFAExB,IAAIxT,KAAK+E,cAAgBtF,EACrB,KAAM,IAAI+T,GAAU,uFAExBxT,MAAKkiB,UAAY,EACjBliB,KAAK4tB,qBAAuB/d,OAC5B7P,KAAKw3B,mBAAqB3nB,OAC1B7P,KAAKg3B,kBAAoBnnB,OACzB7P,KAAKy3B,UAAY5nB,OACjB7P,KAAK03B,WAAa7nB,OAClB7P,KAAKqtB,cAAgBxd,OACjB0nB,IAAaxW,GAAU/gB,KAAK23B,qBAAqBJ,GAinBrD,QAASK,GAAUv1B,GACf,GAAI8S,GAAI,GAAI1V,GAAQshB,EACpB5L,GAAEyY,qBAAuBvrB,EACzB8S,EAAEqiB,mBAAqBn1B,EACvB8S,EAAE6hB,kBAAoB30B,EACtB8S,EAAEsiB,UAAYp1B,EACd8S,EAAEuiB,WAAar1B,EACf8S,EAAEkY,cAAgBhrB,EA1qB1B,GAAIw1B,GAA0B,WAC1B,MAAO,IAAIrkB,GAAU,wEAErBskB,EAAU,WACV,MAAO,IAAIr4B,GAAQs4B,kBAAkB/3B,KAAKgiB,YAE1C4Q,EAAe,SAASjlB,GACxB,MAAOlO,GAAQ+D,OAAO,GAAIgQ,GAAU7F,KAEpCkS,EAAO9B,EAAQ,aACfiG,EAAQjG,EAAQ,cAChBjE,EAASiE,EAAQ,eACjBvK,EAAY/T,EAAQ+T,UAAYsG,EAAOtG,SAC3C/T,GAAQoa,WAAaC,EAAOD,WAC5Bpa,EAAQwkB,kBAAoBnK,EAAOmK,kBACnCxkB,EAAQqwB,aAAehW,EAAOgW,aAC9BrwB,EAAQ8vB,iBAAmBzV,EAAOyV,iBAClC9vB,EAAQ+wB,eAAiB1W,EAAOyV,iBAChC9vB,EAAQswB,eAAiBjW,EAAOiW,cAChC,IAAIhP,GAAW,aACXiX,KACAtN,GAAepnB,EAAG,MAClB0d,EAAsBjD,EAAQ,kBAAkBte,EAASshB,GACzDmT,EACAnW,EAAQ,sBAAsBte,EAASshB,EACPC,EAAqB4R,GACrDtN,EAAgBvH,EAAQ,yBACxBiO,EAAcjO,EAAQ,sBAAsBte,EAAS6lB,GAErD8G,EACArO,EAAQ,gBAAgBte,EAAS6lB,EAAe0G,GAChDrB,EAAc5M,EAAQ,qBAAqB2M,GAC3CuN,EAAkBla,EAAQ,yBAC1Bma,EAAqBD,EAAgBE,oBACrC7M,EAAWzL,EAAKyL,SAChBD,EAAWxL,EAAKwL,QAopBhB,OAloBJ5rB,GAAQgC,UAAUwI,SAAW,WACzB,MAAO,oBAGXxK,EAAQgC,UAAU22B,OAAS34B,EAAQgC,UAAU,SAAW,SAAU0B,GAC9D,GAAIoK,GAAMxF,UAAUxG,MACpB,IAAIgM,EAAM,EAAG,CACT,GACWlM,GADPg3B,EAAiB,GAAIx0B,OAAM0J,EAAM,GACjCkH,EAAI,CACR,KAAKpT,EAAI,EAAOkM,EAAM,EAAVlM,IAAeA,EAAG,CAC1B,GAAIsqB,GAAO5jB,UAAU1G,EACrB,IAAoB,kBAATsqB,GAGP,MAAOlsB,GAAQ+D,OACX,GAAIgQ,GAAU,4GAHlB6kB,GAAe5jB,KAAOkX,EAM9B0M,EAAe92B,OAASkT,EACxBtR,EAAK4E,UAAU1G,EACf,IAAIi3B,GAAc,GAAI3N,GAAY0N,EAAgBl1B,EAAInD,KACtD,OAAOA,MAAKshB,MAAMzR,OAAWyoB,EAAY9M,SAAU3b,OAC/CyoB,EAAazoB,QAErB,MAAO7P,MAAKshB,MAAMzR,OAAW1M,EAAI0M,OAAWA,OAAWA,SAG3DpQ,EAAQgC,UAAUq2B,QAAU,WACxB,MAAO93B,MAAKshB,MAAMwW,EAASA,EAASjoB,OAAW7P,KAAM6P,SAGzDpQ,EAAQgC,UAAUtC,KAAO,SAAU6lB,EAAYC,EAAWC,GACtD,GAAI8G,KAAiBjkB,UAAUxG,OAAS,GACd,kBAAfyjB,IACc,kBAAdC,GAA0B,CACjC,GAAItX,GAAM,kDACFkS,EAAKoD,YAAY+B,EACrBjd,WAAUxG,OAAS,IACnBoM,GAAO,KAAOkS,EAAKoD,YAAYgC,IAEnCjlB,KAAKiuB,MAAMtgB,GAEf,MAAO3N,MAAKshB,MAAM0D,EAAYC,EAAWC,EACrCrV,OAAWA,SAGnBpQ,EAAQgC,UAAUkyB,KAAO,SAAU3O,EAAYC,EAAWC,GACtD,GAAI9G,GAAUpe,KAAKshB,MAAM0D,EAAYC,EAAWC,EAC5CrV,OAAWA,OACfuO,GAAQma,eAGZ94B,EAAQgC,UAAU0yB,OAAS,SAAUnP,EAAYC,GAC7C,MAAOjlB,MAAKw4B,MAAMlX,MAAM0D,EAAYC,EAAWpV,OAAWmoB,EAAOnoB,SAGrEpQ,EAAQgC,UAAU2iB,cAAgB,WAC9B,OAAQpkB,KAAKy4B,cACTz4B,KAAK4kB,gBAGbnlB,EAAQgC,UAAUi3B,OAAS,WACvB,GAAIrvB,IACA4oB,aAAa,EACbG,YAAY,EACZuG,iBAAkB9oB,OAClB+oB,gBAAiB/oB;CASrB,OAPI7P,MAAKiyB,eACL5oB,EAAIsvB,iBAAmB34B,KAAKqC,QAC5BgH,EAAI4oB,aAAc,GACXjyB,KAAKoyB,eACZ/oB,EAAIuvB,gBAAkB54B,KAAKmkB,SAC3B9a,EAAI+oB,YAAa,GAEd/oB,GAGX5J,EAAQgC,UAAU+2B,IAAM,WACpB,MAAO,IAAItE,GAAal0B,MAAMoe,WAGlC3e,EAAQgC,UAAUyE,MAAQ,SAAU/C,GAChC,MAAOnD,MAAKo4B,OAAOvY,EAAKgZ,wBAAyB11B,IAGrD1D,EAAQq5B,GAAK,SAAU7vB,GACnB,MAAOA,aAAexJ,IAG1BA,EAAQs5B,SAAW,SAAS51B,GACxB,GAAIkG,GAAM,GAAI5J,GAAQshB,GAClB7b,EAASmmB,EAASloB,GAAI+0B,EAAmB7uB,GAI7C,OAHInE,KAAWomB,GACXjiB,EAAIob,gBAAgBvf,EAAO5B,GAAG,GAAM,GAEjC+F,GAGX5J,EAAQ+4B,IAAM,SAAUta,GACpB,MAAO,IAAIgW,GAAahW,GAAUE,WAGtC3e,EAAQu5B,MAAQv5B,EAAQw5B,QAAU,WAC9B,GAAI7a,GAAU,GAAI3e,GAAQshB,EAC1B,OAAO,IAAIkX,GAAgB7Z,IAG/B3e,EAAQy5B,KAAO,SAAUzxB,GACrB,GAAI4B,GAAM2X,EAAoBvZ,EAC9B,MAAM4B,YAAe5J,IAAU,CAC3B,GAAIwJ,GAAMI,CACVA,GAAM,GAAI5J,GAAQshB,GAClB1X,EAAI8vB,kBAAkBlwB,GAE1B,MAAOI,IAGX5J,EAAQ8D,QAAU9D,EAAQ25B,UAAY35B,EAAQy5B,KAE9Cz5B,EAAQ+D,OAAS/D,EAAQ45B,SAAW,SAAUlV,GAC1C,GAAI9a,GAAM,GAAI5J,GAAQshB,EAGtB,OAFA1X,GAAIykB,qBACJzkB,EAAIob,gBAAgBN,GAAQ,GACrB9a,GAGX5J,EAAQ65B,aAAe,SAASn2B,GAC5B,GAAkB,kBAAPA,GAAmB,KAAM,IAAIqQ,GAAU,0DAClD,IAAI3H,GAAOmY,EAAM/E,SAEjB,OADA+E,GAAM/E,UAAY9b,EACX0I,GAGXpM,EAAQgC,UAAU6f,MAAQ,SACtB0D,EACAC,EACAC,EACA7F,EACAka,GAEA,GAAIC,GAAoC3pB,SAAjB0pB,EACnBlwB,EAAMmwB,EAAmBD,EAAe,GAAI95B,GAAQshB,EAEnDyY,KACDnwB,EAAI0Y,eAAe/hB,KAAM,GACzBqJ,EAAIykB,qBAGR,IAAIlM,GAAS5hB,KAAKgiB,SACdJ,KAAW5hB,OACM6P,SAAbwP,IAAwBA,EAAWrf,KAAKmiB,UACvCqX,GAAkBnwB,EAAIowB,iBAG/B,IAAIC,GACA9X,EAAO+X,cAAc3U,EAAYC,EAAWC,EAAa7b,EAAKgW,EAOlE,OALIuC,GAAOyT,gBAAkBzT,EAAOgY,2BAChC5V,EAAM3D,OACFuB,EAAOiY,+BAAgCjY,EAAQ8X,GAGhDrwB,GAGX5J,EAAQgC,UAAUo4B,+BAAiC,SAAUte,GACrDvb,KAAKmtB,yBAAyBntB,KAAKytB,6BACvCztB,KAAK85B,iBAAiBve,IAG1B9b,EAAQgC,UAAU+jB,QAAU,WACxB,MAAwB,QAAjBxlB,KAAKkiB,WAGhBziB,EAAQgC,UAAUo1B,kCAAoC,WAClD,OAAyB,UAAjB72B,KAAKkiB,WAAyB,GAG1CziB,EAAQgC,UAAUs4B,aAAe,WAC7B,MAAwC,cAAf,UAAjB/5B,KAAKkiB,YAGjBziB,EAAQgC,UAAUu4B,WAAa,SAAUzsB,GACrCvN,KAAKkiB,UAA8B,QAAjBliB,KAAKkiB,UACZ,OAAN3U,GAGT9N,EAAQgC,UAAUw4B,cAAgB,WAC9Bj6B,KAAKkiB,UAA6B,UAAjBliB,KAAKkiB,WAG1BziB,EAAQgC,UAAUy4B,aAAe,WAC7Bl6B,KAAKkiB,UAA6B,UAAjBliB,KAAKkiB,WAG1BziB,EAAQgC,UAAU04B,cAAgB,WAC9Bn6B,KAAKkiB,UAA6B,UAAjBliB,KAAKkiB,WAG1BziB,EAAQgC,UAAU82B,YAAc,WAC5Bv4B,KAAKkiB,UAA6B,SAAjBliB,KAAKkiB,WAG1BziB,EAAQgC,UAAU24B,SAAW,WACzB,OAAyB,SAAjBp6B,KAAKkiB,WAAwB,GAGzCziB,EAAQgC,UAAUmjB,aAAe,WAC7B,OAAyB,SAAjB5kB,KAAKkiB,WAAwB,GAGzCziB,EAAQgC,UAAUojB,gBAAkB,WAChC7kB,KAAKkiB,UAA6B,SAAjBliB,KAAKkiB,WAG1BziB,EAAQgC,UAAU+iB,kBAAoB,WAClCxkB,KAAKkiB,UAA6B,UAAjBliB,KAAKkiB,WAG1BziB,EAAQgC,UAAUg4B,eAAiB,WAC/Bz5B,KAAKkiB,UAA6B,QAAjBliB,KAAKkiB,WAG1BziB,EAAQgC,UAAU44B,iBAAmB,WACjCr6B,KAAKkiB,UAA6B,SAAjBliB,KAAKkiB,WAG1BziB,EAAQgC,UAAU64B,YAAc,WAC5B,OAAyB,QAAjBt6B,KAAKkiB,WAAuB,GAGxCziB,EAAQgC,UAAU21B,YAAc,SAAU7b,GACtC,GAAIlS,GAAgB,IAAVkS,EACJvb,KAAK03B,WACL13B,KACU,EAARub,EAAY,EAAI,EACxB,OAAY1L,UAARxG,GAAqBrJ,KAAKoiB,WACnBpiB,KAAKmiB,SAET9Y,GAGX5J,EAAQgC,UAAU01B,WAAa,SAAU5b,GACrC,MAAiB,KAAVA,EACDvb,KAAKy3B,UACLz3B,KAAa,EAARub,EAAY,EAAI,IAG/B9b,EAAQgC,UAAU84B,sBAAwB,SAAUhf,GAChD,MAAiB,KAAVA,EACDvb,KAAK4tB,qBACL5tB,KAAa,EAARub,EAAY,EAAI,IAG/B9b,EAAQgC,UAAU+4B,oBAAsB,SAAUjf,GAC9C,MAAiB,KAAVA,EACDvb,KAAKw3B,mBACLx3B,KAAa,EAARub,EAAY,EAAI,IAG/B9b,EAAQgC,UAAUg5B,kBAAoB,SAAUC,EAAUnf,GACtD,GAAIof,GAAUD,EAASH,sBAAsBhf,GACzC/X,EAASk3B,EAASF,oBAAoBjf,GACtC9W,EAAWi2B,EAAS3D,mBAAmBxb,GACvC6C,EAAUsc,EAASvD,WAAW5b,GAC9B8D,EAAWqb,EAAStD,YAAY7b,EAChC6C,aAAmB3e,IAAS2e,EAAQqb,iBACxCz5B,KAAK25B,cAAcgB,EAASn3B,EAAQiB,EAAU2Z,EAASiB,IAG3D5f,EAAQgC,UAAUk4B,cAAgB,SAC9BgB,EACAn3B,EACAiB,EACA2Z,EACAiB,GAEA,GAAI9D,GAAQvb,KAAKwlB,SAOjB,IALIjK,GAAS,SACTA,EAAQ,EACRvb,KAAKg6B,WAAW,IAGN,IAAVze,EACAvb,KAAKy3B,UAAYrZ,EACAvO,SAAbwP,IAAwBrf,KAAK03B,WAAarY,GACvB,kBAAZsb,IAA2B36B,KAAK6tB,0BACvC7tB,KAAK4tB,qBAAuB+M,GACV,kBAAXn3B,KAAuBxD,KAAKw3B,mBAAqBh0B,GACpC,kBAAbiB,KAAyBzE,KAAKg3B,kBAAoBvyB,OAC1D,CACH,GAAI2F,GAAe,EAARmR,EAAY,CACvBvb,MAAKoK,EAAO,GAAKgU,EACjBpe,KAAKoK,EAAO,GAAKiV,EACM,kBAAZsb,KACP36B,KAAKoK,EAAO,GAAKuwB,GACC,kBAAXn3B,KACPxD,KAAKoK,EAAO,GAAK5G,GACG,kBAAbiB,KACPzE,KAAKoK,EAAO,GAAK3F,GAGzB,MADAzE,MAAKg6B,WAAWze,EAAQ,GACjBA,GAGX9b,EAAQgC,UAAUm5B,kBAAoB,SAAUvb,EAAUwb,GACtD,GAAItf,GAAQvb,KAAKwlB,SAMjB,IAJIjK,GAAS,SACTA,EAAQ,EACRvb,KAAKg6B,WAAW,IAEN,IAAVze,EACAvb,KAAKy3B,UAAYoD,EACjB76B,KAAK03B,WAAarY,MACf,CACH,GAAIjV,GAAe,EAARmR,EAAY,CACvBvb,MAAKoK,EAAO,GAAKywB,EACjB76B,KAAKoK,EAAO,GAAKiV,EAErBrf,KAAKg6B,WAAWze,EAAQ,IAG5B9b,EAAQgC,UAAU6zB,mBAAqB,SAAUwF,EAAcvf,GAC3Dvb,KAAK46B,kBAAkBE,EAAcvf,IAGzC9b,EAAQgC,UAAUkgB,iBAAmB,SAAStf,EAAO04B,GACjD,IAAI/6B,KAAK62B,oCAAT,CACA,GAAIx0B,IAAUrC,KACV,MAAOA,MAAKykB,gBAAgBoT,KAA2B,GAAO,EAClE,IAAI/V,GAAed,EAAoB3e,EAAOrC,KAC9C,MAAM8hB,YAAwBriB,IAAU,MAAOO,MAAKg7B,SAAS34B,EAE7D,IAAI44B,GAAmB,GAAKF,EAAa,EAAI,EAC7C/6B,MAAK+hB,eAAeD,EAAcmZ,EAClC,IAAI7c,GAAU0D,EAAaE,SAC3B,IAAI5D,EAAQsD,aAAc,CAEtB,IAAK,GADDnU,GAAMvN,KAAKwlB,UACNnkB,EAAI,EAAOkM,EAAJlM,IAAWA,EACvB+c,EAAQqc,kBAAkBz6B,KAAMqB,EAEpCrB,MAAKm6B,gBACLn6B,KAAKg6B,WAAW,GAChBh6B,KAAKk7B,aAAa9c,OACXA,GAAQmX,eACfv1B,KAAKm5B,kBAAkB/a,EAAQqX,UAE/Bz1B,KAAKm7B,iBAAiB/c,EAAQoX,UAC1BpX,EAAQgP,2BAIpB3tB,EAAQgC,UAAUgjB,gBAClB,SAASN,EAAQiX,EAAaC,GACrBA,GACDxb,EAAKyb,+BAA+BnX,EAExC,IAAIlW,GAAQ4R,EAAK0b,kBAAkBpX,GAC/BqX,EAAWvtB,IAAUkW,CACzBnkB,MAAK+tB,kBAAkB9f,EAAOmtB,EAAcI,GAAW,GACvDx7B,KAAKkhB,QAAQiD,EAAQqX,EAAW3rB,OAAY5B,IAGhDxO,EAAQgC,UAAUk2B,qBAAuB,SAAUJ,GAC/C,GAAInZ,GAAUpe,IACdA,MAAK8tB,qBACL9tB,KAAKssB,cACL,IAAI8O,IAAc,EACdvd,EAAIwN,EAASkM,GAAU,SAASl1B,GAChB,OAAZ+b,IACJA,EAAQuD,iBAAiBtf,GACzB+b,EAAU,OACX,SAAU+F,GACO,OAAZ/F,IACJA,EAAQqG,gBAAgBN,EAAQiX,GAChChd,EAAU,OAEdgd,IAAc,EACdp7B,KAAKusB,cAEK1c,SAANgO,GAAmBA,IAAMyN,GAAwB,OAAZlN,IACrCA,EAAQqG,gBAAgB5G,EAAEva,GAAG,GAAM,GACnC8a,EAAU,OAIlB3e,EAAQgC,UAAUg6B,0BAA4B,SAC1CtJ,EAAS9S,EAAUhd,EAAO+b,GAE1B,IAAIA,EAAQsd,cAAZ,CACAtd,EAAQkO,cACR,IAAI9e,EAQJ,IAJIA,EAHA6R,IAAa2Y,GAAUh4B,KAAK07B,cAGxBrQ,EAAS8G,GAASvtB,KAAKya,EAAUhd,GAFjCgpB,EAAS8G,GAASjkB,MAAMlO,KAAKmiB,SAAU9f,GAI/C+b,EAAQmO,cAEJ/e,IAAM8d,GAAY9d,IAAM4Q,GAAW5Q,IAAMkd,EAAa,CACtD,GAAIvkB,GAAMqH,IAAM4Q,EAAUyZ,IAA4BrqB,EAAElK,CACxD8a,GAAQqG,gBAAgBte,GAAK,GAAO,OAEpCiY,GAAQuD,iBAAiBnU,KAIjC/N,EAAQgC,UAAUugB,QAAU,WAExB,IADA,GAAI3Y,GAAMrJ,KACHqJ,EAAI0wB,gBAAgB1wB,EAAMA,EAAIsyB,WACrC,OAAOtyB,IAGX5J,EAAQgC,UAAUk6B,UAAY,WAC1B,MAAO37B,MAAKw3B,oBAGhB/3B,EAAQgC,UAAUy5B,aAAe,SAAS9c,GACtCpe,KAAKw3B,mBAAqBpZ,GAG9B3e,EAAQgC,UAAUm6B,aAAe,WACzB57B,KAAK4kB,iBACL5kB,KAAKukB,oBAAsB1U,SAInCpQ,EAAQgC,UAAUsgB,eAAiB,SAAUsC,EAAQwX,IACpC,EAARA,GAAa,GAAKxX,EAAOO,iBAC1B5kB,KAAK6kB,kBACL7kB,KAAKukB,oBAAsBF,IAElB,EAARwX,GAAa,GAAKxX,EAAOjC,YAC1BpiB,KAAKyhB,YAAY4C,EAAOlC,WAIhC1iB,EAAQgC,UAAUu5B,SAAW,SAAU34B,GAC/BrC,KAAK62B,qCACT72B,KAAKm5B,kBAAkB92B,IAG3B5C,EAAQgC,UAAUyf,QAAU,SAAUiD,EAAQ2X,GACtC97B,KAAK62B,qCACT72B,KAAKm7B,iBAAiBhX,EAAQ2X,IAGlCr8B,EAAQgC,UAAUq4B,iBAAmB,SAAUve,GAC3C,GAAI6C,GAAUpe,KAAKm3B,WAAW5b,GAC1BwgB,EAAY3d,YAAmB3e,EAEnC,IAAIs8B,GAAa3d,EAAQkc,cAErB,MADAlc,GAAQic,mBACDrW,EAAM3D,OAAOrgB,KAAK85B,iBAAkB95B,KAAMub,EAErD,IAAI4W,GAAUnyB,KAAKu1B,eACbv1B,KAAKu6B,sBAAsBhf,GAC3Bvb,KAAKw6B,oBAAoBjf,GAE3BugB,EACA97B,KAAK6tB,wBAA0B7tB,KAAKotB,wBAA0Bvd,OAC9DxN,EAAQrC,KAAKqtB,cACbhO,EAAWrf,KAAKo3B,YAAY7b,EAGhCvb,MAAKg8B,0BAA0BzgB,GAER,kBAAZ4W,GACF4J,EAGD/7B,KAAKy7B,0BAA0BtJ,EAAS9S,EAAUhd,EAAO+b,GAFzD+T,EAAQvtB,KAAKya,EAAUhd,EAAO+b,GAI3BiB,YAAoB6U,GACtB7U,EAASgW,gBACNr1B,KAAKu1B,eACLlW,EAAS4V,kBAAkB5yB,EAAO+b,GAGlCiB,EAAS4c,iBAAiB55B,EAAO+b,IAGlC2d,IACH/7B,KAAKu1B,eACLnX,EAAQ4c,SAAS34B,GAEjB+b,EAAQ8C,QAAQ7e,EAAOy5B,IAI3BvgB,GAAS,GAAsB,KAAR,GAARA,IACfyI,EAAM5D,YAAYpgB,KAAKg6B,WAAYh6B,KAAM,IAGjDP,EAAQgC,UAAUu6B,0BAA4B,SAASzgB,GACnD,GAAc,IAAVA,EACKvb,KAAK6tB,0BACN7tB,KAAK4tB,qBAAuB/d,QAEhC7P,KAAKw3B,mBACLx3B,KAAKg3B,kBACLh3B,KAAK03B,WACL13B,KAAKy3B,UAAY5nB,WACd,CACH,GAAIzF,GAAe,EAARmR,EAAY,CACvBvb,MAAKoK,EAAO,GACZpK,KAAKoK,EAAO,GACZpK,KAAKoK,EAAO,GACZpK,KAAKoK,EAAO,GACZpK,KAAKoK,EAAO,GAAKyF,SAIzBpQ,EAAQgC,UAAUm4B,wBAA0B,WACxC,MACyB,eAAjB,YADA55B,KAAKkiB,YAIjBziB,EAAQgC,UAAUy6B,yBAA2B,WACzCl8B,KAAKkiB,UAA6B,YAAjBliB,KAAKkiB,WAG1BziB,EAAQgC,UAAU06B,2BAA6B,WAC3Cn8B,KAAKkiB,UAA6B,WAAjBliB,KAAKkiB,WAG1BziB,EAAQgC,UAAU26B,qBAAuB,WACrCpY,EAAM1D,eAAetgB,MACrBA,KAAKk8B,4BAGTz8B,EAAQgC,UAAU03B,kBAAoB,SAAU92B,GAC5C,GAAIA,IAAUrC,KAAM,CAChB,GAAImG,GAAM0xB,GAEV,OADA73B,MAAK+tB,kBAAkB5nB,GAChBnG,KAAKm7B,iBAAiBh1B,EAAK0J,QAEtC7P,KAAKi6B,gBACLj6B,KAAKqtB,cAAgBhrB,EACrBrC,KAAK47B,eAED57B,KAAKwlB,UAAY,GACjBxlB,KAAKo8B,wBAIb38B,EAAQgC,UAAU46B,2BAA6B,SAAUlY,GACrD,GAAIlW,GAAQ4R,EAAK0b,kBAAkBpX,EACnCnkB,MAAKm7B,iBAAiBhX,EAAQlW,IAAUkW,EAAStU,OAAY5B,IAGjExO,EAAQgC,UAAU05B,iBAAmB,SAAUhX,EAAQlW,GACnD,GAAIkW,IAAWnkB,KAAM,CACjB,GAAImG,GAAM0xB,GAEV,OADA73B,MAAK+tB,kBAAkB5nB,GAChBnG,KAAKm7B,iBAAiBh1B,GAMjC,MAJAnG,MAAKk6B,eACLl6B,KAAKqtB,cAAgBlJ,EACrBnkB,KAAK47B,eAED57B,KAAKo6B,eACLpW,GAAM7D,WAAW,SAAS7c,GAKtB,KAJI,SAAWA,IACX0gB,EAAMxD,YACF8E,EAAc8C,mBAAoBvY,OAAWvM,GAE/CA,GACGuM,SAAV5B,EAAsBkW,EAASlW,IAIxB4B,SAAV5B,GAAuBA,IAAUkW,GACjCnkB,KAAK0tB,sBAAsBzf,QAG3BjO,KAAKwlB,UAAY,EACjBxlB,KAAKo8B,uBAELp8B,KAAK+sB,qCAIbttB,EAAQgC,UAAU8e,gBAAkB,WAChCvgB,KAAKm8B,4BAEL,KAAK,GADD5uB,GAAMvN,KAAKwlB,UACNnkB,EAAI,EAAOkM,EAAJlM,EAASA,IACrBrB,KAAK85B,iBAAiBz4B,IAI9B5B,EAAQ68B,yBAA2BzE,EACnC9Z,EAAQ,iBAAiBte,EAASy0B,GAClCnW,EAAQ,eAAete,EAASshB,EAAUC,EAAqB4R,GAC/D7U,EAAQ,aAAate,EAASshB,EAAUC,GACxCjD,EAAQ,gBAAgBte,EAASirB,EAAa1J,GAC9CjD,EAAQ,uBAAuBte,GAC/Bse,EAAQ,+BAA+Bte,GACvCse,EAAQ,aAAate,EAASy0B,EAAclT,EAAqBD,GACjEthB,EAAQA,QAAUA,EAClBse,EAAQ,YAAYte,EAASy0B,EAActB,EAAc5R,EAAqBD,GAC9EhD,EAAQ,eAAete,GACvBse,EAAQ,cAActe,EAASmzB,EAAc5R,EAAqBoL,GAClErO,EAAQ,mBAAmBte,EAASmzB,EAAc7R,EAAUC,GAC5DjD,EAAQ,gBAAgBte,GACxBse,EAAQ,iBAAiBte,GACzBse,EAAQ,cAActe,EAASy0B,EAAclT,EAAqB4R,GAClE7U,EAAQ,aAAate,EAASshB,EAAUC,EAAqB4R,GAC7D7U,EAAQ,eAAete,EAASy0B,EAActB,EAAc5R,EAAqBD,GACjFhD,EAAQ,eAAete,EAASy0B,GAChCnW,EAAQ,aAAate,EAASy0B,EAActB,GAC5C7U,EAAQ,kBAAkBte,EAASshB,GACnChD,EAAQ,YAAYte,GACpBse,EAAQ,aAAate,EAASshB,GAC9BhD,EAAQ,eAAete,EAASshB,GAChChD,EAAQ,eAAete,EAASshB,GAE5BlB,EAAK0c,iBAAiB98B,GACtBogB,EAAK0c,iBAAiB98B,EAAQgC,WAY9Bm2B,GAAW9Z,EAAG,IACd8Z,GAAW4E,EAAG,IACd5E,GAAW6E,EAAG,IACd7E,EAAU,GACVA,EAAU,cACVA,EAAU/nB,QACV+nB,GAAU,GACVA,EAAU,GAAIn4B,GAAQshB,IACtBuE,EAAcuD,UAAU7E,EAAMrE,eAAgBE,EAAKiJ,eAC5CrpB,KAIRi9B,WAAW,EAAEvX,aAAa,EAAEwX,YAAY,EAAEC,gBAAgB,EAAEC,cAAc,EAAEC,sBAAsB,EAAEC,oBAAoB,EAAEC,eAAe,EAAEC,qBAAqB,GAAGC,sBAAsB,GAAGC,YAAY,GAAG/X,cAAc,GAAGgY,cAAc,GAAGC,eAAe,GAAGC,kBAAkB,GAAGC,YAAY,GAAGC,WAAW,GAAGC,cAAc,GAAGC,eAAe,GAAGC,gBAAgB,GAAGC,qBAAqB,GAAGC,wBAAwB,GAAGC,iBAAiB,GAAGC,aAAa,GAAGC,YAAY,GAAGC,cAAc,GAAGC,cAAc,GAAGC,YAAY,GAAGC,8BAA8B,GAAGC,iBAAiB,GAAGC,cAAc,GAAGC,aAAa,GAAG1d,YAAY,KAAK2d,IAAI,SAASzgB,EAAQxe,EAAOC,GACpoB,YACAD,GAAOC,QAAU,SAASC,EAASshB,EAAUC,EACzC4R,GAIJ,QAAS6L,GAAkBx1B,GACvB,OAAOA,GACP,IAAK,GAAI,QACT,KAAK,GAAI,UAIb,QAASirB,GAAagB,GAClB,GACI7Q,GADAjG,EAAUpe,KAAKgrB,SAAW,GAAIvrB,GAAQshB,EAEtCmU,aAAkBz1B,KAClB4kB,EAAS6Q,EACT9W,EAAQ2D,eAAesC,EAAQ,IAEnCrkB,KAAKm1B,QAAUD,EACfl1B,KAAKwlB,QAAU,EACfxlB,KAAK21B,eAAiB,EACtB31B,KAAKiB,MAAM4O,OAAW,IApB1B,GAAIgQ,GAAO9B,EAAQ,aACfja,EAAU+b,EAAK/b,OAwInB,OAnHAowB,GAAazyB,UAAUF,OAAS,WAC5B,MAAOvB,MAAKwlB,SAGhB0O,EAAazyB,UAAU2c,QAAU,WAC7B,MAAOpe,MAAKgrB,UAGhBkJ,EAAazyB,UAAUR,MAAQ,QAASC,GAAKuM,EAAGixB,GAC5C,GAAIxJ,GAASlU,EAAoBhhB,KAAKm1B,QAASn1B,KAAKgrB,SACpD,IAAIkK,YAAkBz1B,GAAS,CAG3B,GAFAy1B,EAASA,EAAOlT,UAChBhiB,KAAKm1B,QAAUD,GACXA,EAAOK,eAOJ,MAAIL,GAAOxT,iBACdwT,GAAO5T,MACHpgB,EACAlB,KAAKkhB,QACLrR,OACA7P,KACA0+B,OAIJ1+B,MAAKkhB,QAAQgU,EAAOM,UAfpB,IADAN,EAASA,EAAOO,UACX3xB,EAAQoxB,GAAS,CAClB,GAAI/uB,GAAM,GAAI1G,GAAQ+T,UAAU,gFAEhC,YADAxT,MAAK2+B,eAAex4B,QAgBzB,KAAKrC,EAAQoxB,GAEhB,WADAl1B,MAAKgrB,SAAS9J,QAAQ0R,EAAa,iFAA6F4C,UAIpI,IAAsB,IAAlBN,EAAO3zB,OAOP,YAN4B,KAAxBm9B,EACA1+B,KAAK4+B,qBAGL5+B,KAAK41B,SAAS6I,EAAkBC,IAIxC,IAAInxB,GAAMvN,KAAK6+B,gBAAgB3J,EAAO3zB,OACtCvB,MAAKwlB,QAAUjY,EACfvN,KAAKm1B,QAAUn1B,KAAK8+B,mBAAqB,GAAIj7B,OAAM0J,GAAOvN,KAAKm1B,OAE/D,KAAK,GADD/W,GAAUpe,KAAKgrB,SACV3pB,EAAI,EAAOkM,EAAJlM,IAAWA,EAAG,CAC1B,GAAIo3B,GAAaz4B,KAAKq1B,cAClBvT,EAAed,EAAoBkU,EAAO7zB,GAAI+c,EAC9C0D,aAAwBriB,IACxBqiB,EAAeA,EAAaE,UACxByW,EACA3W,EAAa2L,6BACN3L,EAAaJ,aACpBI,EAAawT,mBAAmBt1B,KAAMqB,GAC/BygB,EAAayT,eACpBv1B,KAAKi1B,kBAAkBnT,EAAa2T,SAAUp0B,GAE9CrB,KAAKi8B,iBAAiBna,EAAa0T,UAAWn0B,IAE1Co3B,GACRz4B,KAAKi1B,kBAAkBnT,EAAczgB,KAKjD6yB,EAAazyB,UAAU4zB,YAAc,WACjC,MAAwB,QAAjBr1B,KAAKm1B,SAGhBjB,EAAazyB,UAAUm0B,SAAW,SAAUvzB,GACxCrC,KAAKm1B,QAAU,KACfn1B,KAAKgrB,SAASgQ,SAAS34B,IAG3B6xB,EAAazyB,UAAUk9B,eACvBzK,EAAazyB,UAAUyf,QAAU,SAAUiD,GACvCnkB,KAAKm1B,QAAU,KACfn1B,KAAKgrB,SAASvG,gBAAgBN,GAAQ,GAAO,IAGjD+P,EAAazyB,UAAU41B,mBAAqB,SAAUT,EAAerb,GACjEvb,KAAKgrB,SAAS/I,WACV1G,MAAOA,EACPlZ,MAAOu0B,KAKf1C,EAAazyB,UAAUwzB,kBAAoB,SAAU5yB,EAAOkZ,GACxDvb,KAAKm1B,QAAQ5Z,GAASlZ,CACtB,IAAIqzB,KAAkB11B,KAAK21B,cACvBD,IAAiB11B,KAAKwlB,SACtBxlB,KAAK41B,SAAS51B,KAAKm1B,UAI3BjB,EAAazyB,UAAUw6B,iBAAmB,SAAU9X,EAAQ5I,GACxDvb,KAAK21B,iBACL31B,KAAKkhB,QAAQiD,IAGjB+P,EAAazyB,UAAUq9B,iBAAmB,WACtC,OAAO,GAGX5K,EAAazyB,UAAUo9B,gBAAkB,SAAUtxB,GAC/C,MAAOA,IAGJ2mB,KAGJrT,YAAY,KAAKke,IAAI,SAAShhB,EAAQxe,EAAOC,GAChD,YASA,SAASw/B,GAAev3B,GACpB,MAAOA,aAAexH,QAClB0vB,EAAIkB,eAAeppB,KAASxH,MAAMwB,UAI1C,QAASw9B,GAAuBx3B,GAC5B,GAAI4B,EACJ,IAAI21B,EAAev3B,GAAM,CACrB4B,EAAM,GAAIkmB,GAAiB9nB,GAC3B4B,EAAIrE,KAAOyC,EAAIzC,KACfqE,EAAIvJ,QAAU2H,EAAI3H,QAClBuJ,EAAI8c,MAAQ1e,EAAI0e,KAEhB,KAAK,GADD1c,GAAOkmB,EAAIlmB,KAAKhC,GACXpG,EAAI,EAAGA,EAAIoI,EAAKlI,SAAUF,EAAG,CAClC,GAAIc,GAAMsH,EAAKpI,EACV69B,GAAUvwB,KAAKxM,KAChBkH,EAAIlH,GAAOsF,EAAItF,IAGvB,MAAOkH,GAGX,MADAwW,GAAKyb,+BAA+B7zB,GAC7BA,EAGX,QAASywB,GAAmB9Z,GACxB,MAAO,UAASjY,EAAK9D,GACjB,GAAgB,OAAZ+b,EAAJ,CAEA,GAAIjY,EAAK,CACL,GAAIg5B,GAAUF,EAAuBG,EAAiBj5B,GACtDiY,GAAQ2P,kBAAkBoR,GAC1B/gB,EAAQ8C,QAAQie,OACb,IAAIp3B,UAAUxG,OAAS,EAAG,CACiC,IAAI,GAA9DkiB,GAAQ1b,UAAUxG,OAAWkE,EAAO,GAAI5B,OAAM4f,EAAQ,GAAYC,EAAM,EAASD,EAANC,IAAeA,EAAMje,EAAKie,EAAM,GAAK3b,UAAU2b,EAC9HtF,GAAQ4c,SAASv1B,OAEjB2Y,GAAQ4c,SAAS34B,EAGrB+b,GAAU,OAjDlB,GAsDI6Z,GAtDApY,EAAO9B,EAAQ,aACfqhB,EAAmBvf,EAAKuf,iBACxBtlB,EAASiE,EAAQ,eACjB+R,EAAehW,EAAOgW,aACtBP,EAAmBzV,EAAOyV,iBAC1B8P,EAAcxf,EAAKwf,YACnB1P,EAAM5R,EAAQ,YAOdmhB,EAAY,gCAsDhB,IAJIjH,EARCoH,EAQiB,SAAUjhB,GACxBpe,KAAKoe,QAAUA,GARD,SAAUA,GACxBpe,KAAKoe,QAAUA,EACfpe,KAAKu2B,WAAa2B,EAAmB9Z,GACrCpe,KAAK6qB,SAAW7qB,KAAKu2B,YAQzB8I,EAAa,CACb,GAAInyB,IACA3B,IAAK,WACD,MAAO2sB,GAAmBl4B,KAAKoe,UAGvCuR,GAAIK,eAAeiI,EAAgBx2B,UAAW,aAAcyL,GAC5DyiB,EAAIK,eAAeiI,EAAgBx2B,UAAW,WAAYyL,GAG9D+qB,EAAgBE,oBAAsBD,EAEtCD,EAAgBx2B,UAAUwI,SAAW,WACjC,MAAO,4BAGXguB,EAAgBx2B,UAAU8B,QAC1B00B,EAAgBx2B,UAAUk5B,QAAU,SAAUt4B,GAC1C,KAAMrC,eAAgBi4B,IAClB,KAAM,IAAIzkB,WAAU,0KAExBxT,MAAKoe,QAAQuD,iBAAiBtf,IAGlC41B,EAAgBx2B,UAAU+B,OAAS,SAAU2gB,GACzC,KAAMnkB,eAAgBi4B,IAClB,KAAM,IAAIzkB,WAAU,0KAExBxT,MAAKoe,QAAQqG,gBAAgBN,IAGjC8T,EAAgBx2B,UAAUgD,SAAW,SAAUpC,GAC3C,KAAMrC,eAAgBi4B,IAClB,KAAM,IAAIzkB,WAAU,0KAExBxT,MAAKoe,QAAQ6D,UAAU5f,IAG3B41B,EAAgBx2B,UAAUijB,OAAS,SAAUve,GACzCnG,KAAKoe,QAAQsG,OAAOve,IAGxB8xB,EAAgBx2B,UAAU69B,QAAU,WAChCt/B,KAAKwD,OAAO,GAAIssB,GAAa,aAGjCmI,EAAgBx2B,UAAUg3B,WAAa,WACnC,MAAOz4B,MAAKoe,QAAQqa,cAGxBR,EAAgBx2B,UAAUi3B,OAAS,WAC/B,MAAO14B,MAAKoe,QAAQsa,UAGxBn5B,EAAOC,QAAUy4B,IAEd7S,cAAc,GAAG0G,WAAW,GAAGjL,YAAY,KAAK0e,IAAI,SAASxhB,EAAQxe,EAAOC,GAC/E,YACAD,GAAOC,QAAU,SAASC,EAASshB,GAmBnC,QAASye,GAAYr9B,GACjB,OAAQs9B,EAAmB9wB,KAAKxM,GAGpC,QAASu9B,GAAcv8B,GACnB,IACI,MAAOA,GAAGw8B,qBAAsB,EAEpC,MAAOr8B,GACH,OAAO,GAIf,QAASs8B,GAAen4B,EAAKtF,EAAK09B,GAC9B,GAAI52B,GAAM4W,EAAKigB,yBAAyBr4B,EAAKtF,EAAM09B,EACXE,EACxC,OAAO92B,GAAMy2B,EAAcz2B,IAAO,EAEtC,QAAS+2B,GAAW32B,EAAKw2B,EAAQI,GAC7B,IAAK,GAAI5+B,GAAI,EAAGA,EAAIgI,EAAI9H,OAAQF,GAAK,EAAG,CACpC,GAAIc,GAAMkH,EAAIhI,EACd,IAAI4+B,EAAatxB,KAAKxM,GAElB,IAAK,GADD+9B,GAAwB/9B,EAAIgD,QAAQ86B,EAAc,IAC7CxrB,EAAI,EAAGA,EAAIpL,EAAI9H,OAAQkT,GAAK,EACjC,GAAIpL,EAAIoL,KAAOyrB,EACX,KAAM,IAAI1sB,GAAU,qGACfrO,QAAQ,KAAM06B,KAOvC,QAASM,GAAqB14B,EAAKo4B,EAAQI,EAAcxO,GAGrD,IAAK,GAFDhoB,GAAOoW,EAAKugB,kBAAkB34B,GAC9B4B,KACKhI,EAAI,EAAGA,EAAIoI,EAAKlI,SAAUF,EAAG,CAClC,GAAIc,GAAMsH,EAAKpI,GACXgB,EAAQoF,EAAItF,GACZk+B,EAAsB5O,IAAW6O,GAC/B,EAAOA,EAAcn+B,EAAKE,EAAOoF,EAClB,mBAAVpF,IACNq9B,EAAcr9B,IACdu9B,EAAen4B,EAAKtF,EAAK09B,KAC1BpO,EAAOtvB,EAAKE,EAAOoF,EAAK44B,IACxBh3B,EAAI7H,KAAKW,EAAKE,GAItB,MADA29B,GAAW32B,EAAKw2B,EAAQI,GACjB52B,EAgIX,QAASk3B,GAA2B1V,EAAUxL,EAAU5R,EAAGtK,GAMvD,QAASq9B,KACL,GAAInN,GAAYhU,CACZA,KAAaohB,IAAMpN,EAAYrzB,KACnC,IAAIoe,GAAU,GAAI3e,GAAQshB,EAC1B3C,GAAQ0P,oBACR,IAAIrC,GAAuB,gBAAXrqB,IAAuBpB,OAAS0gC,EAC1C1gC,KAAKoB,GAAUypB,EACjB1nB,EAAK+0B,EAAmB9Z,EAC5B,KACIqN,EAAGvd,MAAMmlB,EAAWsN,EAAa54B,UAAW5E,IAC9C,MAAMG,GACJ8a,EAAQqG,gBAAgB2a,EAAiB97B,IAAI,GAAM,GAEvD,MAAO8a,GAlBX,GAAIsiB,GAAc,WAAa,MAAO1gC,SAClCoB,EAASypB,CAoBb,OAnBsB,gBAAXzpB,KACPypB,EAAW1nB,GAiBfq9B,EAAYb,mBAAoB,EACzBa,EAOX,QAASI,GAAan5B,EAAKo4B,EAAQpO,EAAQoP,GAKvC,IAAK,GAJDZ,GAAe,GAAIj2B,QAAO82B,EAAiBjB,GAAU,KACrDt/B,EACA4/B,EAAqB14B,EAAKo4B,EAAQI,EAAcxO,GAE3CpwB,EAAI,EAAGkM,EAAMhN,EAAQgB,OAAYgM,EAAJlM,EAASA,GAAI,EAAG,CAClD,GAAIc,GAAM5B,EAAQc,GACd8B,EAAK5C,EAAQc,EAAE,GACf0/B,EAAiB5+B,EAAM09B,CAC3Bp4B,GAAIs5B,GAAkBF,IAAgBG,EAC5BA,EAAoB7+B,EAAKs+B,EAAMt+B,EAAKgB,EAAI08B,GACxCgB,EAAY19B,EAAI,WACd,MAAO69B,GAAoB7+B,EAAKs+B,EAAMt+B,EAAKgB,EAAI08B,KAI/D,MADAhgB,GAAK0c,iBAAiB90B,GACfA,EAGX,QAASw5B,GAAUpW,EAAUxL,GACzB,MAAO2hB,GAAoBnW,EAAUxL,EAAUxP,OAAWgb,GApP9D,GA0EIqW,GA1EAT,KACA5gB,EAAO9B,EAAQ,aACfma,EAAqBna,EAAQ,yBAC5Boa,oBACDwI,EAAe9gB,EAAK8gB,aACpBvB,EAAmBvf,EAAKuf,iBACxB7b,EAAc1D,EAAK0D,YACnB/P,EAAYuK,EAAQ,YAAYvK,UAChC2tB,EAAgB,QAChBpB,GAAsBJ,mBAAmB,GACzCF,EACA,iEACAa,EAAgB,SAASt7B,EAAMo8B,GAC/B,MAAOvhB,GAAK2D,aAAaxe,IACF,MAAnBA,EAAK0Q,OAAO,KACXmK,EAAKwhB,QAAQD,IAuDlBN,EAAmB,SAASr4B,GAC5B,MAAOA,GAAItD,QAAQ,QAAS,QAqJ5B67B,EAAsBzd,EACpB2d,EACAX,CAyBN9gC,GAAQwhC,UAAY,SAAU99B,EAAIkc,GAC9B,GAAkB,kBAAPlc,GACP,KAAM,IAAIqQ,GAAU,0DAExB,IAAIksB,EAAcv8B,GACd,MAAOA,EAEX,IAAIkG,GAAM43B,EAAU99B,EAAI4E,UAAUxG,OAAS,EAAIk/B,EAAOphB,EAEtD,OADAQ,GAAKyhB,gBAAgBn+B,EAAIkG,EAAKm2B,GACvBn2B,GAGX5J,EAAQmhC,aAAe,SAAUhf,EAAQ5I,GACrC,GAAsB,kBAAX4I,IAA2C,gBAAXA,GACvC,KAAM,IAAIpO,GAAU,+FAExBwF,GAAUtP,OAAOsP,EACjB,IAAI6mB,GAAS7mB,EAAQ6mB,MACC,iBAAXA,KAAqBA,EAASsB,EACzC,IAAI1P,GAASzY,EAAQyY,MACC,mBAAXA,KAAuBA,EAAS6O,EAC3C,IAAIO,GAAc7nB,EAAQ6nB,WAG1B,IAF2B,kBAAhBA,KAA4BA,EAAcG,IAEhDnhB,EAAK2D,aAAaqc,GACnB,KAAM,IAAIhmB,YAAW,sEAIzB,KAAK,GADDpQ,GAAOoW,EAAKugB,kBAAkBxe,GACzBvgB,EAAI,EAAGA,EAAIoI,EAAKlI,SAAUF,EAAG,CAClC,GAAIgB,GAAQuf,EAAOnY,EAAKpI,GACR,iBAAZoI,EAAKpI,IACLwe,EAAKwhB,QAAQh/B,KACbu+B,EAAav+B,EAAMZ,UAAWo+B,EAAQpO,EAAQoP,GAC9CD,EAAav+B,EAAOw9B,EAAQpO,EAAQoP,IAI5C,MAAOD,GAAahf,EAAQie,EAAQpO,EAAQoP,OAK7CU,WAAW,GAAG1D,wBAAwB,GAAGhd,YAAY,KAAK2gB,IAAI,SAASzjB,EAAQxe,EAAOC,GACzF,YACAD,GAAOC,QAAU,SACbC,EAASy0B,EAAclT,EAAqB4R,GAKhD,QAAS6O,GAAuBh6B,GAI5B,IAAK,GAHDgC,GAAOkmB,EAAIlmB,KAAKhC,GAChB8F,EAAM9D,EAAKlI,OACX2zB,EAAS,GAAIrxB,OAAY,EAAN0J,GACdlM,EAAI,EAAOkM,EAAJlM,IAAWA,EAAG,CAC1B,GAAIc,GAAMsH,EAAKpI,EACf6zB,GAAO7zB,GAAKoG,EAAItF,GAChB+yB,EAAO7zB,EAAIkM,GAAOpL,EAEtBnC,KAAKw0B,aAAaU,GAoCtB,QAASwM,GAAMxjB,GACX,GAAI7U,GACAs4B,EAAY3gB,EAAoB9C,EAEpC,OAAK9R,GAASu1B,IAGVt4B,EADOs4B,YAAqBliC,GACtBkiC,EAAUrgB,MACZ7hB,EAAQiiC,MAAO7xB,OAAWA,OAAWA,OAAWA,QAE9C,GAAI4xB,GAAuBE,GAAWvjB,UAG5CujB,YAAqBliC,IACrB4J,EAAI0Y,eAAe4f,EAAW,GAE3Bt4B,GAXIupB,EAAa,6EAtD5B,GAAI/S,GAAO9B,EAAQ,aACf3R,EAAWyT,EAAKzT,SAChBujB,EAAM5R,EAAQ,WAalB8B,GAAKvf,SAASmhC,EAAwBvN,GAEtCuN,EAAuBhgC,UAAUR,MAAQ,WACrCjB,KAAK80B,OAAOjlB,OAAW,KAG3B4xB,EAAuBhgC,UAAUwzB,kBAAoB,SAAU5yB,EAAOkZ,GAClEvb,KAAKm1B,QAAQ5Z,GAASlZ,CACtB,IAAIqzB,KAAkB11B,KAAK21B,cAC3B,IAAID,GAAiB11B,KAAKwlB,QAAS,CAG/B,IAAK,GAFDvc,MACA24B,EAAY5hC,KAAKuB,SACZF,EAAI,EAAGkM,EAAMvN,KAAKuB,SAAcgM,EAAJlM,IAAWA,EAC5C4H,EAAIjJ,KAAKm1B,QAAQ9zB,EAAIugC,IAAc5hC,KAAKm1B,QAAQ9zB,EAEpDrB,MAAK41B,SAAS3sB,KAItBw4B,EAAuBhgC,UAAU41B,mBAAqB,SAAUh1B,EAAOkZ,GACnEvb,KAAKgrB,SAAS/I,WACV9f,IAAKnC,KAAKm1B,QAAQ5Z,EAAQvb,KAAKuB,UAC/Bc,MAAOA,KAIfo/B,EAAuBhgC,UAAUq9B,iBAAmB,WAChD,OAAO,GAGX2C,EAAuBhgC,UAAUo9B,gBAAkB,SAAUtxB,GACzD,MAAOA,IAAO,GAsBlB9N,EAAQgC,UAAUigC,MAAQ,WACtB,MAAOA,GAAM1hC,OAGjBP,EAAQiiC,MAAQ,SAAUxjB,GACtB,MAAOwjB,GAAMxjB,OAId4N,WAAW,GAAGjL,YAAY,KAAKghB,IAAI,SAAS9jB,EAAQxe,EAAOC,GAC9D,YACA,SAASsiC,GAAUC,EAAKC,EAAUC,EAAKC,EAAU30B,GAC7C,IAAK,GAAIkH,GAAI,EAAOlH,EAAJkH,IAAWA,EACvBwtB,EAAIxtB,EAAIytB,GAAYH,EAAIttB,EAAIutB,GAC5BD,EAAIttB,EAAIutB,GAAY,OAI5B,QAASpjB,GAAMujB,GACXniC,KAAKoiC,UAAYD,EACjBniC,KAAKwlB,QAAU,EACfxlB,KAAKqiC,OAAS,EAGlBzjB,EAAMnd,UAAU6gC,oBAAsB,SAAUC,GAC5C,MAAOviC,MAAKoiC,UAAYG,GAG5B3jB,EAAMnd,UAAUie,SAAW,SAAU1T,GACjC,GAAIzK,GAASvB,KAAKuB,QAClBvB,MAAKwiC,eAAejhC,EAAS,EAC7B,IAAIF,GAAKrB,KAAKqiC,OAAS9gC,EAAWvB,KAAKoiC,UAAY,CACnDpiC,MAAKqB,GAAK2K,EACVhM,KAAKwlB,QAAUjkB,EAAS,GAG5Bqd,EAAMnd,UAAUghC,YAAc,SAASpgC,GACnC,GAAI8/B,GAAWniC,KAAKoiC,SACpBpiC,MAAKwiC,eAAexiC,KAAKuB,SAAW,EACpC,IAAImhC,GAAQ1iC,KAAKqiC,OACbhhC,GAASqhC,EAAQ,EACHP,EAAW,EAAOA,GAAaA,CACjDniC,MAAKqB,GAAKgB,EACVrC,KAAKqiC,OAAShhC,EACdrB,KAAKwlB,QAAUxlB,KAAKuB,SAAW,GAGnCqd,EAAMnd,UAAUsT,QAAU,SAAS5R,EAAIkc,EAAUrT,GAC7ChM,KAAKyiC,YAAYz2B,GACjBhM,KAAKyiC,YAAYpjB,GACjBrf,KAAKyiC,YAAYt/B,IAGrByb,EAAMnd,UAAUD,KAAO,SAAU2B,EAAIkc,EAAUrT,GAC3C,GAAIzK,GAASvB,KAAKuB,SAAW,CAC7B,IAAIvB,KAAKsiC,oBAAoB/gC,GAIzB,MAHAvB,MAAK0f,SAASvc,GACdnD,KAAK0f,SAASL,OACdrf,MAAK0f,SAAS1T,EAGlB,IAAIyI,GAAIzU,KAAKqiC,OAAS9gC,EAAS,CAC/BvB,MAAKwiC,eAAejhC,EACpB,IAAIohC,GAAW3iC,KAAKoiC,UAAY,CAChCpiC,MAAMyU,EAAI,EAAKkuB,GAAYx/B,EAC3BnD,KAAMyU,EAAI,EAAKkuB,GAAYtjB,EAC3Brf,KAAMyU,EAAI,EAAKkuB,GAAY32B,EAC3BhM,KAAKwlB,QAAUjkB,GAGnBqd,EAAMnd,UAAU8D,MAAQ,WACpB,GAAIm9B,GAAQ1iC,KAAKqiC,OACbh5B,EAAMrJ,KAAK0iC,EAKf,OAHA1iC,MAAK0iC,GAAS7yB,OACd7P,KAAKqiC,OAAUK,EAAQ,EAAM1iC,KAAKoiC,UAAY,EAC9CpiC,KAAKwlB,UACEnc,GAGXuV,EAAMnd,UAAUF,OAAS,WACrB,MAAOvB,MAAKwlB,SAGhB5G,EAAMnd,UAAU+gC,eAAiB,SAAUD,GACnCviC,KAAKoiC,UAAYG,GACjBviC,KAAK4iC,UAAU5iC,KAAKoiC,WAAa,IAIzCxjB,EAAMnd,UAAUmhC,UAAY,SAAUT,GAClC,GAAIU,GAAc7iC,KAAKoiC,SACvBpiC,MAAKoiC,UAAYD,CACjB,IAAIO,GAAQ1iC,KAAKqiC,OACb9gC,EAASvB,KAAKwlB,QACdsd,EAAkBJ,EAAQnhC,EAAWshC,EAAc,CACvDf,GAAU9hC,KAAM,EAAGA,KAAM6iC,EAAaC,IAG1CvjC,EAAOC,QAAUof,OAEXmkB,IAAI,SAAShlB,EAAQxe,EAAOC,GAClC,YACAD,GAAOC,QAAU,SACbC,EAASshB,EAAUC,EAAqB4R,GAS5C,QAASoQ,GAAK9kB,EAAUmG,GACpB,GAAIvC,GAAed,EAAoB9C,EAEvC,IAAI4D,YAAwBriB,GACxB,MAAOwjC,GAAUnhB,EACd,KAAKhe,EAAQoa,GAChB,MAAO0U,GAAa,gFAGxB,IAAIvpB,GAAM,GAAI5J,GAAQshB,EACPlR,UAAXwU,GACAhb,EAAI0Y,eAAesC,EAAQ,EAI/B,KAAK,GAFDsW,GAAUtxB,EAAI2xB,SACdx3B,EAAS6F,EAAI6X,QACR7f,EAAI,EAAGkM,EAAM2Q,EAAS3c,OAAYgM,EAAJlM,IAAWA,EAAG,CACjD,GAAI4H,GAAMiV,EAAS7c,IAEPwO,SAAR5G,GAAuB5H,IAAK6c,KAIhCze,EAAQy5B,KAAKjwB,GAAKqY,MAAMqZ,EAASn3B,EAAQqM,OAAWxG,EAAK,MAE7D,MAAOA,GAhCX,GAAIvF,GAAUia,EAAQ,aAAaja,QAE/Bm/B,EAAY,SAAU7kB,GACtB,MAAOA,GAAQjf,KAAK,SAAS2J,GACzB,MAAOk6B,GAAKl6B,EAAOsV,KA+B3B3e,GAAQujC,KAAO,SAAU9kB,GACrB,MAAO8kB,GAAK9kB,EAAUrO,SAG1BpQ,EAAQgC,UAAUuhC,KAAO,WACrB,MAAOA,GAAKhjC,KAAM6P,YAKnBgR,YAAY,KAAKqiB,IAAI,SAASnlB,EAAQxe,EAAOC,GAChD,YACAD,GAAOC,QAAU,SAASC,EACAy0B,EACAtB,EACA5R,EACAD,GAK1B,QAASoiB,GAAsBjlB,EAAU/a,EAAIigC,EAAOC,GAChDrjC,KAAKw0B,aAAatW,GAClBle,KAAKgrB,SAAS8C,qBACd9tB,KAAKy0B,iBAAmB4O,IAAUtiB,KAAgB,KAClD/gB,KAAKsjC,eAA4BzzB,SAAVuzB,EACvBpjC,KAAKujC,WAAY,EACjBvjC,KAAKwjC,eAAkBxjC,KAAKsjC,eAAiB,EAAI,EACjDtjC,KAAKyjC,aAAe5zB,MACpB,IAAIiS,GAAed,EAAoBoiB,EAAOpjC,KAAKgrB,UAC/CqO,GAAW,EACX0C,EAAYja,YAAwBriB,EACpCs8B,KACAja,EAAeA,EAAaE,UACxBF,EAAaJ,aACbI,EAAawT,mBAAmBt1B,KAAM,IAC/B8hB,EAAayT,gBACpB6N,EAAQthB,EAAa2T,SACrBz1B,KAAKujC,WAAY,IAEjBvjC,KAAKkhB,QAAQY,EAAa0T,WAC1B6D,GAAW,IAGb0C,GAAa/7B,KAAKsjC,iBAAiBtjC,KAAKujC,WAAY,GAC1DvjC,KAAK+qB,UAAY5nB,EACjBnD,KAAK0jC,OAASN,EACT/J,GAAUrV,EAAM3D,OAAOnf,EAAMlB,KAAM6P,QAE5C,QAAS3O,KACLlB,KAAK80B,OAAOjlB,OAAW,IA6F3B,QAASjE,GAAOsS,EAAU/a,EAAIwgC,EAAcN,GACxC,GAAkB,kBAAPlgC,GAAmB,MAAOyvB,GAAa,0DAClD,IAAI9pB,GAAQ,GAAIq6B,GAAsBjlB,EAAU/a,EAAIwgC,EAAcN,EAClE,OAAOv6B,GAAMsV,UAjIjB,GAAI4F,GAAQjG,EAAQ,cAChB8B,EAAO9B,EAAQ,aACfsN,EAAWxL,EAAKwL,SAChBC,EAAWzL,EAAKyL,QAgCpBzL,GAAKvf,SAAS6iC,EAAuBjP,GAErCiP,EAAsB1hC,UAAUR,MAAQ,aAExCkiC,EAAsB1hC,UAAUm9B,mBAAqB,YAC7C5+B,KAAKujC,WAAavjC,KAAKsjC,iBACvBtjC,KAAK41B,SAAmC,OAA1B51B,KAAKy0B,oBACIz0B,KAAK0jC,SAIpCP,EAAsB1hC,UAAUwzB,kBAAoB,SAAU5yB,EAAOkZ,GACjE,GAAI2Z,GAASl1B,KAAKm1B,OAClBD,GAAO3Z,GAASlZ,CAChB,IAKIuhC,GALAriC,EAASvB,KAAKuB,SACd6zB,EAAkBp1B,KAAKy0B,iBACvBoP,EAA6B,OAApBzO,EACT0O,EAAW9jC,KAAKujC,UAChBQ,EAAc/jC,KAAKyjC,YAEvB,KAAKM,EAED,IADAA,EAAc/jC,KAAKyjC,aAAe,GAAI5/B,OAAMtC,GACvCqiC,EAAiB,EAAoBriC,EAAjBqiC,IAA2BA,EAChDG,EAAYH,GAAoB,CAqBxC,IAlBAA,EAAmBG,EAAYxoB,GAEjB,IAAVA,GAAevb,KAAKsjC,gBACpBtjC,KAAK0jC,OAASrhC,EACdrC,KAAKujC,UAAYO,GAAW,EAC5BC,EAAYxoB,GAAgC,IAArBqoB,EACjB,EAAI,GACO,KAAVroB,GACPvb,KAAK0jC,OAASrhC,EACdrC,KAAKujC,UAAYO,GAAW,GAEH,IAArBF,EACAG,EAAYxoB,GAAS,GAErBwoB,EAAYxoB,GAAS,EACrBvb,KAAK0jC,OAASrhC,GAGjByhC,EAAL,CAMA,IAAK,GAFDz6B,GAFAwhB,EAAW7qB,KAAK+qB,UAChB1L,EAAWrf,KAAKgrB,SAAS7I,SAGpB9gB,EAAIrB,KAAKwjC,eAAoBjiC,EAAJF,IAAcA,EAE5C,GADAuiC,EAAmBG,EAAY1iC,GACN,IAArBuiC,EAAJ,CAIA,GAAyB,IAArBA,EAAwB,MAa5B,IAZAvhC,EAAQ6yB,EAAO7zB,GACfrB,KAAKgrB,SAASsB,eACVuX,GACAzO,EAAgB5zB,KAAKa,GACrBgH,EAAMgiB,EAASR,GAAUjmB,KAAKya,EAAUhd,EAAOhB,EAAGE,IAGlD8H,EAAMgiB,EAASR,GACVjmB,KAAKya,EAAUrf,KAAK0jC,OAAQrhC,EAAOhB,EAAGE,GAE/CvB,KAAKgrB,SAASuB,cAEVljB,IAAQiiB,EAAU,MAAOtrB,MAAKkhB,QAAQ7X,EAAI/F,EAE9C,IAAIwe,GAAed,EAAoB3X,EAAKrJ,KAAKgrB,SACjD,IAAIlJ,YAAwBriB,GAAS,CAEjC,GADAqiB,EAAeA,EAAaE,UACxBF,EAAaJ,aAEb,MADAqiB,GAAY1iC,GAAK,EACVygB,EAAawT,mBAAmBt1B,KAAMqB,EAC1C,KAAIygB,EAAayT,eAGpB,MAAOv1B,MAAKkhB,QAAQY,EAAa0T,UAFjCnsB,GAAMyY,EAAa2T,SAM3Bz1B,KAAKwjC,eAAiBniC,EAAI,EAC1BrB,KAAK0jC,OAASr6B,MAhCVrJ,MAAKwjC,eAAiBniC,EAAI,CAmClCrB,MAAK41B,SAASiO,EAASzO,EAAkBp1B,KAAK0jC,UASlDjkC,EAAQgC,UAAUmK,OAAS,SAAUzI,EAAIwgC,GACrC,MAAO/3B,GAAO5L,KAAMmD,EAAIwgC,EAAc,OAG1ClkC,EAAQmM,OAAS,SAAUsS,EAAU/a,EAAIwgC,EAAcN,GACnD,MAAOz3B,GAAOsS,EAAU/a,EAAIwgC,EAAcN,OAI3Cle,aAAa,EAAEtE,YAAY,KAAKmjB,IAAI,SAASjmB,EAAQxe,EAAOC,GAC/D,YACA,IAAI0f,GACA+kB,EAAmB,WACnB,KAAM,IAAIhkC,OAAM,kEAEpB,IAAI8d,EAAQ,aAAa4L,OAAQ,CAC7B,GAAIpM,GAAUzP,QAAQo2B,SAASzc,KAAKpiB,MAAM,KAAKqF,IAAIxI,OACnDgd,GAA2B,IAAf3B,EAAQ,IAAYA,EAAQ,GAAK,IAAQA,EAAQ,GAAK,EAC5DpP,OAAO0I,aAAe/I,QAAQ4I,SAE/BwI,IAEGA,EADwB,mBAAjBrI,cACIA,aACkB,mBAAfkB,YACHA,WAEAksB,OAGgB,mBAArBltB,mBACdmI,EAAW,SAAS/b,GAChB,GAAIghC,GAAM9sB,SAASC,cAAc,OAC7BC,EAAW,GAAIR,kBAAiB5T,EAEpC,OADAoU,GAASE,QAAQ0sB,GAAMzsB,YAAY,IAC5B,WAAaysB,EAAIC,UAAUC,OAAO,SAE7CnlB,EAASC,UAAW,GAEpBD,EAD+B,mBAAjBrI,cACH,SAAU1T,GACjB0T,aAAa1T,IAEY,mBAAf4U,YACH,SAAU5U,GACjB4U,WAAW5U,EAAI,IAGR8gC,CAEf1kC,GAAOC,QAAU0f,IAEd2B,YAAY,KAAKyjB,IAAI,SAASvmB,EAAQxe,EAAOC,GAChD,YACAD,GAAOC,QACH,SAASC,EAASy0B,GAItB,QAASqQ,GAAoBrP,GACzBl1B,KAAKw0B,aAAaU,GAJtB,GAAI6C,GAAoBt4B,EAAQs4B,kBAC5BlY,EAAO9B,EAAQ,YAKnB8B,GAAKvf,SAASikC,EAAqBrQ,GAEnCqQ,EAAoB9iC,UAAU+iC,iBAAmB,SAAUjpB,EAAOkpB,GAC9DzkC,KAAKm1B,QAAQ5Z,GAASkpB,CACtB,IAAI/O,KAAkB11B,KAAK21B,cACvBD,IAAiB11B,KAAKwlB,SACtBxlB,KAAK41B,SAAS51B,KAAKm1B,UAI3BoP,EAAoB9iC,UAAUwzB,kBAAoB,SAAU5yB,EAAOkZ,GAC/D,GAAIlS,GAAM,GAAI0uB,EACd1uB,GAAI6Y,UAAY,UAChB7Y,EAAIgkB,cAAgBhrB,EACpBrC,KAAKwkC,iBAAiBjpB,EAAOlS,IAEjCk7B,EAAoB9iC,UAAUw6B,iBAAmB,SAAU9X,EAAQ5I,GAC/D,GAAIlS,GAAM,GAAI0uB,EACd1uB,GAAI6Y,UAAY,UAChB7Y,EAAIgkB,cAAgBlJ,EACpBnkB,KAAKwkC,iBAAiBjpB,EAAOlS,IAGjC5J,EAAQilC,OAAS,SAAUxmB,GACvB,MAAO,IAAIqmB,GAAoBrmB,GAAUE,WAG7C3e,EAAQgC,UAAUijC,OAAS,WACvB,MAAO,IAAIH,GAAoBvkC,MAAMoe,cAItCyC,YAAY,KAAK8jB,IAAI,SAAS5mB,EAAQxe,EAAOC,GAChD,YACAD,GAAOC,QACP,SAASC,EAASy0B,EAActB,GAOhC,QAASzU,GAAiB+W,GACtBl1B,KAAKw0B,aAAaU,GAClBl1B,KAAK4kC,SAAW,EAChB5kC,KAAK6kC,SAAU,EACf7kC,KAAK8kC,cAAe,EA2FxB,QAASC,GAAK7mB,EAAU8mB,GACpB,IAAe,EAAVA,KAAiBA,GAAqB,EAAVA,EAC7B,MAAOpS,GAAa,iEAExB,IAAIvpB,GAAM,GAAI8U,GAAiBD,GAC3BE,EAAU/U,EAAI+U,SAGlB,OAFA/U,GAAIgV,WAAW2mB,GACf37B,EAAInI,OACGkd,EA7GX,GAAIyB,GAAO9B,EAAQ,aACflE,EAAakE,EAAQ,eAAelE,WACpCkW,EAAiBhS,EAAQ,eAAegS,eACxCjsB,EAAU+b,EAAK/b,OASnB+b,GAAKvf,SAAS6d,EAAkB+V,GAEhC/V,EAAiB1c,UAAUR,MAAQ,WAC/B,GAAKjB,KAAK8kC,aAAV,CAGA,GAAsB,IAAlB9kC,KAAK4kC,SAEL,WADA5kC,MAAK41B,YAGT51B,MAAK80B,OAAOjlB,OAAW,GACvB,IAAIo1B,GAAkBnhC,EAAQ9D,KAAKm1B,UAC9Bn1B,KAAKq1B,eACN4P,GACAjlC,KAAK4kC,SAAW5kC,KAAKklC,uBACrBllC,KAAKkhB,QAAQlhB,KAAKmlC,eAAenlC,KAAKuB,aAI9C4c,EAAiB1c,UAAUP,KAAO,WAC9BlB,KAAK8kC,cAAe,EACpB9kC,KAAKiB,SAGTkd,EAAiB1c,UAAU6c,UAAY,WACnCte,KAAK6kC,SAAU,GAGnB1mB,EAAiB1c,UAAUujC,QAAU,WACjC,MAAOhlC,MAAK4kC,UAGhBzmB,EAAiB1c,UAAU4c,WAAa,SAAU+mB,GAC9CplC,KAAK4kC,SAAWQ,GAGpBjnB,EAAiB1c,UAAUwzB,kBAAoB,SAAU5yB,GACrDrC,KAAKqlC,cAAchjC,GACfrC,KAAKslC,eAAiBtlC,KAAKglC,YAC3BhlC,KAAKm1B,QAAQ5zB,OAASvB,KAAKglC,UAEvBhlC,KAAK41B,SADc,IAAnB51B,KAAKglC,WAAmBhlC,KAAK6kC,QACf7kC,KAAKm1B,QAAQ,GAEbn1B,KAAKm1B,WAK/BhX,EAAiB1c,UAAUw6B,iBAAmB,SAAU9X,GAEpD,GADAnkB,KAAKulC,aAAaphB,GACdnkB,KAAKglC,UAAYhlC,KAAKklC,sBAAuB,CAE7C,IAAK,GADD5hC,GAAI,GAAIysB,GACH1uB,EAAIrB,KAAKuB,SAAUF,EAAIrB,KAAKm1B,QAAQ5zB,SAAUF,EACnDiC,EAAE9B,KAAKxB,KAAKm1B,QAAQ9zB,GAExBrB,MAAKkhB,QAAQ5d,KAIrB6a,EAAiB1c,UAAU6jC,WAAa,WACpC,MAAOtlC,MAAK21B,gBAGhBxX,EAAiB1c,UAAU+jC,UAAY,WACnC,MAAOxlC,MAAKm1B,QAAQ5zB,OAASvB,KAAKuB,UAGtC4c,EAAiB1c,UAAU8jC,aAAe,SAAUphB,GAChDnkB,KAAKm1B,QAAQ3zB,KAAK2iB,IAGtBhG,EAAiB1c,UAAU4jC,cAAgB,SAAUhjC,GACjDrC,KAAKm1B,QAAQn1B,KAAK21B,kBAAoBtzB,GAG1C8b,EAAiB1c,UAAUyjC,oBAAsB,WAC7C,MAAOllC,MAAKuB,SAAWvB,KAAKwlC,aAGhCrnB,EAAiB1c,UAAU0jC,eAAiB,SAAUC,GAClD,GAAItlC,GAAU,qCACNE,KAAK4kC,SAAW,4BAA8BQ,EAAQ,QAC9D,OAAO,IAAIvrB,GAAW/Z,IAG1Bqe,EAAiB1c,UAAUm9B,mBAAqB,WAC5C5+B,KAAKkhB,QAAQlhB,KAAKmlC,eAAe,KAcrC1lC,EAAQslC,KAAO,SAAU7mB,EAAU8mB,GAC/B,MAAOD,GAAK7mB,EAAU8mB,IAG1BvlC,EAAQgC,UAAUsjC,KAAO,SAAUC,GAC/B,MAAOD,GAAK/kC,KAAMglC,IAGtBvlC,EAAQ8e,kBAAoBJ,KAGzBiH,cAAc,GAAGvE,YAAY,KAAK4kB,IAAI,SAAS1nB,EAAQxe,EAAOC,GACjE,YACAD,GAAOC,QAAU,SAASC,GAC1B,QAASs4B,GAAkB3Z,GACPvO,SAAZuO,GACAA,EAAUA,EAAQ4D,UAClBhiB,KAAKkiB,UAAY9D,EAAQ8D,UACzBliB,KAAKqtB,cAAgBjP,EAAQiP,gBAG7BrtB,KAAKkiB,UAAY,EACjBliB,KAAKqtB,cAAgBxd,QAI7BkoB,EAAkBt2B,UAAUY,MAAQ,WAChC,IAAKrC,KAAKiyB,cACN,KAAM,IAAIze,WAAU,4FAExB,OAAOxT,MAAKqtB,eAGhB0K,EAAkBt2B,UAAUyE,MAC5B6xB,EAAkBt2B,UAAU0iB,OAAS,WACjC,IAAKnkB,KAAKoyB,aACN,KAAM,IAAI5e,WAAU,0FAExB,OAAOxT,MAAKqtB,eAGhB0K,EAAkBt2B,UAAUwwB,YAC5BxyB,EAAQgC,UAAU8zB,aAAe,WAC7B,OAAyB,UAAjBv1B,KAAKkiB,WAAyB,GAG1C6V,EAAkBt2B,UAAU2wB,WAC5B3yB,EAAQgC,UAAUi6B,YAAc,WAC5B,OAAyB,UAAjB17B,KAAKkiB,WAAyB,GAG1C6V,EAAkBt2B,UAAUikC,UAC5BjmC,EAAQgC,UAAUigB,WAAa,WAC3B,MAAwC,MAAf,UAAjB1hB,KAAKkiB,YAGjB6V,EAAkBt2B,UAAUg3B,WAC5Bh5B,EAAQgC,UAAU4zB,YAAc,WAC5B,OAAyB,UAAjBr1B,KAAKkiB,WAAyB,GAG1CziB,EAAQgC,UAAUikC,UAAY,WAC1B,MAAO1lC,MAAKgiB,UAAUN,cAG1BjiB,EAAQgC,UAAU2wB,WAAa,WAC3B,MAAOpyB,MAAKgiB,UAAU0Z,eAG1Bj8B,EAAQgC,UAAUwwB,YAAc,WAC5B,MAAOjyB,MAAKgiB,UAAUuT,gBAG1B91B,EAAQgC,UAAUg3B,WAAa,WAC3B,MAAOz4B,MAAKgiB,UAAUqT,eAG1B51B,EAAQgC,UAAUg0B,OAAS,WACvB,MAAOz1B,MAAKqtB,eAGhB5tB,EAAQgC,UAAU+zB,QAAU,WAExB,MADAx1B,MAAKytB,6BACEztB,KAAKqtB,eAGhB5tB,EAAQgC,UAAUY,MAAQ,WACtB,GAAIuf,GAAS5hB,KAAKgiB,SAClB,KAAKJ,EAAOqQ,cACR,KAAM,IAAIze,WAAU,4FAExB,OAAOoO,GAAOyL,eAGlB5tB,EAAQgC,UAAU0iB,OAAS,WACvB,GAAIvC,GAAS5hB,KAAKgiB,SAClB,KAAKJ,EAAOwQ,aACR,KAAM,IAAI5e,WAAU,0FAGxB,OADAoO,GAAO6L,6BACA7L,EAAOyL,eAIlB5tB,EAAQs4B,kBAAoBA,QAGtB4N,IAAI,SAAS5nB,EAAQxe,EAAOC,GAClC,YACAD,GAAOC,QAAU,SAASC,EAASshB,GAKnC,QAASC,GAAoBvZ,EAAKtG,GAC9B,GAAIiL,EAAS3E,GAAM,CACf,GAAIA,YAAehI,GACf,MAAOgI,EAEN,IAAIm+B,EAAqBn+B,GAAM,CAChC,GAAI4B,GAAM,GAAI5J,GAAQshB,EAQtB,OAPAtZ,GAAI6Z,MACAjY,EAAI8vB,kBACJ9vB,EAAIgzB,2BACJhzB,EAAIytB,mBACJztB,EACA,MAEGA,EAEX,GAAIlK,GAAO0gB,EAAKwL,SAASwa,GAASp+B,EAClC,IAAItI,IAASmsB,EAAU,CACfnqB,GAASA,EAAQmrB,cACrB,IAAIjjB,GAAM5J,EAAQ+D,OAAOrE,EAAKmE,EAE9B,OADInC,IAASA,EAAQorB,cACdljB,EACJ,GAAoB,kBAATlK,GACd,MAAO2mC,GAAWr+B,EAAKtI,EAAMgC,GAGrC,MAAOsG,GAGX,QAASo+B,GAAQp+B,GACb,MAAOA,GAAItI,KAIf,QAASymC,GAAqBn+B,GAC1B,MAAOs+B,GAAQnhC,KAAK6C,EAAK,aAG7B,QAASq+B,GAAWt4B,EAAGrO,EAAMgC,GAiBzB,QAAS6kC,GAAoB3jC,GACpB+b,IACD5Q,IAAMnL,EACN+b,EAAQqG,gBACJhlB,EAAQ68B,4BAA4B,GAAO,GAE/Cle,EAAQuD,iBAAiBtf,GAE7B+b,EAAU,MAGd,QAAS6nB,GAAmB9hB,GACnB/F,IACLA,EAAQqG,gBAAgBN,EAAQiX,GAAa,GAC7Chd,EAAU,MAGd,QAAS8nB,GAAqB7jC,GACrB+b,GAC4B,kBAAtBA,GAAQ6D,WACf7D,EAAQ6D,UAAU5f,GApC1B,GAAI+b,GAAU,GAAI3e,GAAQshB,GACtB1X,EAAM+U,CACNjd,IAASA,EAAQmrB,eACrBlO,EAAQ0P,qBACJ3sB,GAASA,EAAQorB,aACrB,IAAI6O,IAAc,EACdl2B,EAAS2a,EAAKwL,SAASlsB,GAAMyF,KAAK4I,EACFw4B,EACAC,EACAC,EA8BpC,OA7BA9K,IAAc,EACVhd,GAAWlZ,IAAWomB,IACtBlN,EAAQqG,gBAAgBvf,EAAO5B,GAAG,GAAM,GACxC8a,EAAU,MA0BP/U,EAlFX,GAAIwW,GAAO9B,EAAQ,aACfuN,EAAWzL,EAAKyL,SAChBlf,EAAWyT,EAAKzT,SAmChB25B,KAAa76B,cAgDjB,OAAO8V,MAGJH,YAAY,KAAKslB,IAAI,SAASpoB,EAAQxe,EAAOC,GAChD,YACAD,GAAOC,QAAU,SAASC,EAASshB,GAgCnC,QAASqlB,GAAa/jC,GAClB,GAAIgkC,GAASrmC,IAGb,OAFIqmC,aAAkBnkC,UAAQmkC,GAAUA,GACxCC,aAAaD,GACNhkC,EAGX,QAASkkC,GAAapiB,GAClB,GAAIkiB,GAASrmC,IAGb,MAFIqmC,aAAkBnkC,UAAQmkC,GAAUA,GACxCC,aAAaD,GACPliB,EA1CV,GAAItE,GAAO9B,EAAQ,aACf+R,EAAerwB,EAAQqwB,aAEvB0W,EAAe,SAAUpoB,EAASte,GAClC,GAAKse,EAAQsnB,YAAb,CACuB,gBAAZ5lC,KACPA,EAAU,sBAEd,IAAIqG,GAAM,GAAI2pB,GAAahwB,EAC3B+f,GAAKyb,+BAA+Bn1B,GACpCiY,EAAQ2P,kBAAkB5nB,GAC1BiY,EAAQ8F,QAAQ/d,KAGhBsgC,EAAa,SAASpkC,GAAS,MAAOqkC,IAAO1mC,MAAM6uB,WAAWxsB,IAC9DqkC,EAAQjnC,EAAQinC,MAAQ,SAAUrkC,EAAOskC,GACzC,GAAW92B,SAAP82B,EAAkB,CAClBA,EAAKtkC,EACLA,EAAQwN,MACR,IAAIxG,GAAM,GAAI5J,GAAQshB,EAEtB,OADAhJ,YAAW,WAAa1O,EAAI2xB,YAAe2L,GACpCt9B,EAGX,MADAs9B,IAAMA,EACClnC,EAAQ8D,QAAQlB,GAAOif,MAAMmlB,EAAY,KAAM,KAAME,EAAI92B,QAGpEpQ,GAAQgC,UAAUilC,MAAQ,SAAUC,GAChC,MAAOD,GAAM1mC,KAAM2mC,IAiBvBlnC,EAAQgC,UAAU69B,QAAU,SAAUqH,EAAI7mC,GACtC6mC,GAAMA,CACN,IAAIt9B,GAAMrJ,KAAKb,OAAOwlB,aACtBtb,GAAIkb,oBAAsBvkB,IAC1B,IAAIqmC,GAAStuB,WAAW,WACpByuB,EAAan9B,EAAKvJ,IACnB6mC,EACH,OAAOt9B,GAAIiY,MAAM8kB,EAAcG,EAAc12B,OAAWw2B,EAAQx2B,YAKjEgR,YAAY,KAAK+lB,IAAI,SAAS7oB,EAAQxe,EAAOC,GAChD,YACAD,GAAOC,QAAU,SAAUC,EAASmzB,EAAc5R,EAC9CoL,GAKA,QAASya,GAAiBC,GAEtB,IAAK,GADDv5B,GAAMu5B,EAAYvlC,OACbF,EAAI,EAAOkM,EAAJlM,IAAWA,EAAG,CAC1B,GAAIojC,GAAaqC,EAAYzlC,EAC7B,IAAIojC,EAAWrS,aACX,MAAO3yB,GAAQ+D,OAAOihC,EAAWv+B,QAErC4gC,GAAYzlC,GAAKojC,EAAWpX,cAEhC,MAAOyZ,GAGX,QAASpY,GAAQprB,GACbyU,WAAW,WAAW,KAAMzU,IAAK,GAGrC,QAASyjC,GAAyBC,GAC9B,GAAIllB,GAAed,EAAoBgmB,EAOvC,OANIllB,KAAiBklB,GACiB,kBAA3BA,GAASC,eACiB,kBAA1BD,GAASE,cAChBF,EAASC,iBACTnlB,EAAaqlB,eAAeH,EAASE,gBAElCplB,EAEX,QAASslB,GAAQrmC,EAAW0jC,GAIxB,QAAS4C,KACL,GAAIhmC,GAAKkM,EAAK,MAAOlE,GAAI9F,SACzB,IAAIue,GAAeilB,EAAyBhmC,EAAUM,KACtD,IAAIygB,YAAwBriB,IACxBqiB,EAAamlB,gBAAiB,CAC9B,IACInlB,EAAed,EACXc,EAAaolB,eAAeI,WAAW7C,GACvC1jC,EAAUqd,SAChB,MAAO9a,GACL,MAAOorB,GAAQprB,GAEnB,GAAIwe,YAAwBriB,GACxB,MAAOqiB,GAAaR,MAAM+lB,EAAU3Y,EACV,KAAM,KAAM,MAG9C2Y,IApBJ,GAAIhmC,GAAI,EACJkM,EAAMxM,EAAUQ,OAChB8H,EAAM5J,EAAQu5B,OAqBlB,OADAqO,KACOh+B,EAAI+U,QAGf,QAASmpB,GAAgBllC,GACrB,GAAIoiC,GAAa,GAAI1M,EAGrB,OAFA0M,GAAWpX,cAAgBhrB,EAC3BoiC,EAAWviB,UAAY,UAChBklB,EAAQpnC,KAAMykC,GAAY5V,WAAWxsB,GAGhD,QAASmlC,GAAarjB,GAClB,GAAIsgB,GAAa,GAAI1M,EAGrB,OAFA0M,GAAWpX,cAAgBlJ,EAC3BsgB,EAAWviB,UAAY,UAChBklB,EAAQpnC,KAAMykC,GAAY3V,UAAU3K,GAG/C,QAASsjB,GAAS5vB,EAAMuG,EAASjd,GAC7BnB,KAAK0nC,MAAQ7vB,EACb7X,KAAKgrB,SAAW5M,EAChBpe,KAAK2nC,SAAWxmC,EAoCpB,QAASymC,GAAiBzkC,EAAIib,EAASjd,GACnCnB,KAAKw0B,aAAarxB,EAAIib,EAASjd,GASnC,QAAS0mC,GAAoBxlC,GACzB,MAAIolC,GAASK,WAAWzlC,IACpBrC,KAAKe,UAAUf,KAAKub,OAAO4rB,eAAe9kC,GACnCA,EAAM+b,WAEV/b,EA7HX,GAAImR,GAAYuK,EAAQ,eAAevK,UACnClT,EAAWyd,EAAQ,aAAazd,SAChCy3B,EAAoBt4B,EAAQs4B,iBA2EhC0P,GAAShmC,UAAUoW,KAAO,WACtB,MAAO7X,MAAK0nC,OAGhBD,EAAShmC,UAAU2c,QAAU,WACzB,MAAOpe,MAAKgrB,UAGhByc,EAAShmC,UAAU2C,SAAW,WAC1B,MAAIpE,MAAKoe,UAAU6T,cACRjyB,KAAKoe,UAAU/b,QAEnB,MAGXolC,EAAShmC,UAAU6lC,WAAa,SAAS7C,GACrC,GAAIrgC,GAAWpE,KAAKoE,WAChBjD,EAAUnB,KAAK2nC,QACH93B,UAAZ1O,GAAuBA,EAAQmrB,cACnC,IAAIjjB,GAAmB,OAAbjF,EACJpE,KAAK+nC,UAAU3jC,EAAUqgC,GAAc,IAI7C,OAHgB50B,UAAZ1O,GAAuBA,EAAQorB,cACnCvsB,KAAKgrB,SAASgd,mBACdhoC,KAAK0nC,MAAQ,KACNr+B,GAGXo+B,EAASK,WAAa,SAAUx7B,GAC5B,MAAa,OAALA,GACsB,kBAAfA,GAAElI,UACe,kBAAjBkI,GAAEg7B,YAMrBhnC,EAASsnC,EAAkBH,GAE3BG,EAAiBnmC,UAAUsmC,UAAY,SAAU3jC,EAAUqgC,GACvD,GAAIthC,GAAKnD,KAAK6X,MACd,OAAO1U,GAAGyB,KAAKR,EAAUA,EAAUqgC,IAWvChlC,EAAQwoC,MAAQ,WACZ,GAAI16B,GAAMxF,UAAUxG,MACpB,IAAU,EAANgM,EAAS,MAAOqlB,GACJ,sDAChB,IAAIzvB,GAAK4E,UAAUwF,EAAM,EACzB,IAAkB,kBAAPpK,GAAmB,MAAOyvB,GAAa,0DAClDrlB,IAEA,KAAK,GADDxM,GAAY,GAAI8C,OAAM0J,GACjBlM,EAAI,EAAOkM,EAAJlM,IAAWA,EAAG,CAC1B,GAAI+C,GAAW2D,UAAU1G,EACzB,IAAIomC,EAASK,WAAW1jC,GAAW,CAC/B,GAAI8jC,GAAW9jC,CACfA,GAAWA,EAASga,UACpBha,EAAS+iC,eAAee,OACrB,CACH,GAAIpmB,GAAed,EAAoB5c,EACnC0d,aAAwBriB,KACxB2E,EACI0d,EAAaR,MAAMumB,EAAqB,KAAM,MAC1C9mC,UAAWA,EACXwa,MAAOla,GACZwO,SAGX9O,EAAUM,GAAK+C,EAGnB,GAAIga,GAAU3e,EAAQilC,OAAO3jC,GACxB5B,KAAK0nC,GACL1nC,KAAK,SAASgpC,GACX/pB,EAAQkO,cACR,IAAIjjB,EACJ,KACIA,EAAMlG,EAAG+K,MAAM2B,OAAWs4B,GAC5B,QACE/pB,EAAQmO,cAEZ,MAAOljB,KAEViY,MACGimB,EAAiBC,EAAc33B,OAAW9O,EAAW8O,OAE7D,OADA9O,GAAUqd,QAAUA,EACbA,GAGX3e,EAAQgC,UAAU0lC,eAAiB,SAAUe,GACzCloC,KAAKkiB,UAA6B,OAAjBliB,KAAKkiB,UACtBliB,KAAKooC,UAAYF,GAGrBzoC,EAAQgC,UAAUwlC,cAAgB,WAC9B,OAAyB,OAAjBjnC,KAAKkiB,WAAsB,GAGvCziB,EAAQgC,UAAUylC,aAAe,WAC7B,MAAOlnC,MAAKooC,WAGhB3oC,EAAQgC,UAAUumC,iBAAmB,WACjChoC,KAAKkiB,UAA6B,QAAjBliB,KAAKkiB,UACtBliB,KAAKooC,UAAYv4B,QAGrBpQ,EAAQgC,UAAUymC,SAAW,SAAU/kC,GACnC,GAAkB,kBAAPA,GACP,MAAO,IAAIykC,GAAiBzkC,EAAInD,KAAMosB,IAE1C,MAAM,IAAI5Y,OAKf4R,cAAc,GAAGvE,YAAY,KAAKwnB,IAAI,SAAStqB,EAAQxe,EAAOC,GACjE,YAqBA,SAAS8oC,KACL,IACI,MAAOC,GAAer6B,MAAMlO,KAAM+H,WACpC,MAAOzE,GAEL,MADAgoB,GAAShoB,EAAIA,EACNgoB,GAGf,QAASD,GAASloB,GAEd,MADAolC,GAAiBplC;AACVmlC,EAuBX,QAAS/7B,GAAYtD,GACjB,MAAc,OAAPA,GAAeA,KAAQ,GAAQA,KAAQ,GAC3B,gBAARA,IAAmC,gBAARA,GAI1C,QAASmD,GAAS/J,GACd,OAAQkK,EAAYlK,GAGxB,QAAS+8B,GAAiBoJ,GACtB,MAAKj8B,GAAYi8B,GAEV,GAAIvoC,OAAMwoC,EAAaD,IAFOA,EAKzC,QAAS7H,GAAa/e,EAAQ8mB,GAC1B,GAEIrnC,GAFAkM,EAAMqU,EAAOrgB,OACb8H,EAAM,GAAIxF,OAAM0J,EAAM,EAE1B,KAAKlM,EAAI,EAAOkM,EAAJlM,IAAWA,EACnBgI,EAAIhI,GAAKugB,EAAOvgB,EAGpB,OADAgI,GAAIhI,GAAKqnC,EACFr/B,EAGX,QAASy2B,GAAyBr4B,EAAKtF,EAAKwmC,GACxC,IAAIhZ,EAAIe,MAQJ,SAAUxlB,eAAetG,KAAK6C,EAAKtF,GAAOsF,EAAItF,GAAO0N,MAPrD,IAAIxE,GAAO3B,OAAO4B,yBAAyB7D,EAAKtF,EAChD,OAAY,OAARkJ,EACmB,MAAZA,EAAKE,KAA2B,MAAZF,EAAKG,IACtBH,EAAKhJ,MACLsmC,EAHd,OAUR,QAASzgB,GAAkBzgB,EAAKzC,EAAM3C,GAClC,GAAIkK,EAAY9E,GAAM,MAAOA,EAC7B,IAAIspB,IACA1uB,MAAOA,EACP4tB,cAAc,EACdE,YAAY,EACZD,UAAU,EAGd,OADAP,GAAIK,eAAevoB,EAAKzC,EAAM+rB,GACvBtpB,EAQX,QAASinB,GAAQ7Q,GACb,KAAMA,GA2CV,QAASwjB,GAAQl+B,GACb,IACI,GAAkB,kBAAPA,GAAmB,CAC1B,GAAIsG,GAAOkmB,EAAIiB,MAAMztB,EAAG1B,UACxB,OAAIkuB,GAAIe,MAAcjnB,EAAKlI,OAAS,EAC7BkI,EAAKlI,OAAS,KACI,IAAhBkI,EAAKlI,QAA4B,gBAAZkI,EAAK,IAEvC,OAAO,EACT,MAAOnG,GACL,OAAO,GAIf,QAASi5B,GAAiB90B,GAEtB,QAAS4F,MAET,MADAA,GAAE5L,UAAYgG,EACP4F,EAKX,QAASmW,GAAa/a,GAClB,MAAOmgC,GAAOj6B,KAAKlG,GAGvB,QAASogC,GAAYzD,EAAO0D,EAAQjJ,GAEhC,IAAI,GADAx2B,GAAM,GAAIxF,OAAMuhC,GACZ/jC,EAAI,EAAO+jC,EAAJ/jC,IAAaA,EACxBgI,EAAIhI,GAAKynC,EAASznC,EAAIw+B,CAE1B,OAAOx2B,GAGX,QAASo/B,GAAahhC,GAClB,IACI,MAAOA,GAAM,GACf,MAAOnE,GACL,MAAO,8BAIf,QAASg4B,GAA+Bh4B,GACpC,IACI4kB,EAAkB5kB,EAAG,iBAAiB,GAE1C,MAAMylC,KAGV,QAASlQ,GAAwBv1B,GAC7B,MAAS,OAALA,GAAkB,EACbA,YAAarD,OAA8B,uBAAEsvB,kBAClDjsB,EAAiB,iBAAM,EAG/B,QAASupB,GAAeplB,GACpB,MAAOA,aAAexH,QAAS0vB,EAAImB,mBAAmBrpB,EAAK,SAkB/D,QAASwb,GAAYxb,GACjB,SAAUwC,SAASrF,KAAK6C,GAG5B,QAAS65B,GAAgB0H,EAAMC,EAAIxX,GAE/B,IAAK,GADDhoB,GAAOkmB,EAAIiB,MAAMoY,GACZ3nC,EAAI,EAAGA,EAAIoI,EAAKlI,SAAUF,EAAG,CAClC,GAAIc,GAAMsH,EAAKpI,EACXowB,GAAOtvB,IACPwtB,EAAIK,eAAeiZ,EAAI9mC,EAAKwtB,EAAIgB,cAAcqY,EAAM7mC,KA9OhE,GAAIwtB,GAAM5R,EAAQ,YACdwF,EAAkC,mBAAb2lB,WACrB7J,EAAc,WACd,IACI,GAAI7yB,KAMJ,OALAmjB,GAAIK,eAAexjB,EAAG,KAClBjB,IAAK,WACD,MAAO,MAGA,IAARiB,EAAEa,EAEb,MAAO/J,GACH,OAAO,MAKXgoB,GAAYhoB,MACZilC,EAcAjoC,EAAW,SAAS6oC,EAAOC,GAG3B,QAASC,KACLrpC,KAAK+E,YAAcokC,EACnBnpC,KAAKw0B,aAAe4U,CACpB,KAAK,GAAIzlB,KAAgBylB,GAAO3nC,UACxBskC,EAAQnhC,KAAKwkC,EAAO3nC,UAAWkiB,IACgB,MAA/CA,EAAajO,OAAOiO,EAAapiB,OAAO,KAExCvB,KAAK2jB,EAAe,KAAOylB,EAAO3nC,UAAUkiB,IATxD,GAAIoiB,MAAa76B,cAejB,OAFAm+B,GAAE5nC,UAAY2nC,EAAO3nC,UACrB0nC,EAAM1nC,UAAY,GAAI4nC,GACfF,EAAM1nC,WAyDb+sB,EAAyB,WACzB,MAAgB,WAATxuB,MACR4E,KAAK,UAMJw7B,EAAoB,WACpB,GAAIzQ,EAAIe,MAAO,CACX,GAAI4Y,GAAS5/B,OAAOjI,UAChB8nC,EAAU7/B,OAAOE,mBACrB,OAAO,UAASnC,GAGZ,IAFA,GAAI4B,MACAmgC,EAAc9/B,OAAOkZ,OAAO,MAClB,MAAPnb,GAAeA,IAAQ6hC,GAAQ,CAClC,GAAI7/B,EACJ,KACIA,EAAO8/B,EAAQ9hC,GACjB,MAAOnE,GACL,MAAO+F,GAEX,IAAK,GAAIhI,GAAI,EAAGA,EAAIoI,EAAKlI,SAAUF,EAAG,CAClC,GAAIc,GAAMsH,EAAKpI,EACf,KAAImoC,EAAYrnC,GAAhB,CACAqnC,EAAYrnC,IAAO,CACnB,IAAIkJ,GAAO3B,OAAO4B,yBAAyB7D,EAAKtF,EACpC,OAARkJ,GAA4B,MAAZA,EAAKE,KAA2B,MAAZF,EAAKG,KACzCnC,EAAI7H,KAAKW,IAGjBsF,EAAMkoB,EAAIkB,eAAeppB,GAE7B,MAAO4B,IAGX,MAAO,UAAS5B,GACZ,GAAI4B,KAEJ,KAAK,GAAIlH,KAAOsF,GACZ4B,EAAI7H,KAAKW,EAEb,OAAOkH,OA4Bfu/B,EAAS,wBAsCTrN,EAAoB,WACpB,MAAM,SAAW,IAAIt7B,OAOV,SAASoC,GACZ,MAAIwqB,GAAexqB,GAAeA,EAC3B,GAAIpC,OAAMwoC,EAAapmC,KAR3B,SAASA,GACZ,GAAIwqB,EAAexqB,GAAQ,MAAOA,EAClC,KAAK,KAAM,IAAIpC,OAAMwoC,EAAapmC,IAClC,MAAM8D,GAAM,MAAOA,QAwB3BkD,GACAg4B,QAASA,EACT7d,aAAcA,EACd4c,kBAAmBA,EACnBN,yBAA0BA,EAC1BpR,QAASA,EACT5qB,QAAS6rB,EAAI7rB,QACbu7B,YAAaA,EACbnX,kBAAmBA,EACnB3b,YAAaA,EACbH,SAAUA,EACVmX,YAAaA,EACb+H,SAAUA,EACVD,SAAUA,EACV/qB,SAAUA,EACVqgC,aAAcA,EACdvB,iBAAkBA,EAClB5Q,uBAAwBA,EACxB+N,iBAAkBA,EAClBsM,YAAaA,EACb5+B,SAAUw+B,EACV5b,eAAgBA,EAChB0O,kBAAmBA,EACnB1C,wBAAyBA,EACzByC,+BAAgCA,EAChCrY,YAAaA,EACbqe,gBAAiBA,EACjBvhB,YAA+B,mBAAX0pB,SAA0BA,QACL,kBAArBA,QAAOC,UAC3B/f,OAA2B,mBAAZ7b,UAC4B,qBAAvCmV,EAAYnV,SAASgG,cAE7B,KAAK,KAAM,IAAI7T,OAAW,MAAOqD,GAAI+F,EAAIyf,cAAgBxlB,EACzD/D,EAAOC,QAAU6J,IAEdyiB,WAAW,UAAU,IAAI,KACkB,mBAAXlV,SAAqC,OAAXA,OAAiDA,OAAO+yB,EAAI/yB,OAAOnX,QAAwF,mBAATme,OAAiC,OAATA,OAA6CA,KAAK+rB,EAAI/rB,KAAKne;;;;ACxoJhSF,OAAOC,QAFoB,kBAAlBkK,QAAOkZ,OAEC,SAAkBgnB,EAAMC,GACvCD,EAAKE,OAASD,EACdD,EAAKnoC,UAAYiI,OAAOkZ,OAAOinB,EAAUpoC,WACvCsD,aACE1C,MAAOunC,EACPzZ,YAAY,EACZD,UAAU,EACVD,cAAc,MAMH,SAAkB2Z,EAAMC,GACvCD,EAAKE,OAASD,CACd,IAAIE,GAAW,YACfA,GAAStoC,UAAYooC,EAAUpoC,UAC/BmoC,EAAKnoC,UAAY,GAAIsoC,GACrBH,EAAKnoC,UAAUsD,YAAc6kC;;AL+CjC,QAASnzB,SAjET,GAAI3I,SAAUvO,OAAOC,UAErBsO,SAAQ4I,SAAW,WACf,GAAIC,GAAoC,mBAAXC,SAC1BA,OAAOC,aACNC,EAAwC,mBAAXF,SAC9BA,OAAOG,iBACNC,EAA4B,mBAAXJ,SAClBA,OAAOK,aAAeL,OAAOM,gBAGhC,IAAIP,EACA,MAAO,UAAUtJ,GAAK,MAAOuJ,QAAOC,aAAaxJ,GAGrD,IAAI8J,KAEJ,IAAIL,EAAqB,CACrB,GAAIM,GAAYC,SAASC,cAAc,OACnCC,EAAW,GAAIR,kBAAiB,WAChC,GAAIS,GAAYL,EAAMhD,OACtBgD,GAAM5V,OAAS,EACfiW,EAAUxO,QAAQ,SAAU7F,GACxBA,OAMR,OAFAoU,GAASE,QAAQL,GAAaM,YAAY,IAEnC,SAAkBvU,GAChBgU,EAAM5V,QACP6V,EAAUO,aAAa,MAAO,MAElCR,EAAM3V,KAAK2B,IAInB,MAAI6T,IACAJ,OAAOM,iBAAiB,UAAW,SAAUU,GACzC,GAAInG,GAASmG,EAAGnG,MAChB,KAAKA,IAAWmF,QAAqB,OAAXnF,IAAgC,iBAAZmG,EAAGC,OAC7CD,EAAGE,kBACCX,EAAM5V,OAAS,GAAG,CAClB,GAAI4B,GAAKgU,EAAM5R,OACfpC,QAGT,GAEI,SAAkBA,GACrBgU,EAAM3V,KAAK2B,GACXyT,OAAOK,YAAY,eAAgB,OAIpC,SAAkB9T,GACrB4U,WAAW5U,EAAI,OAIvB2K,QAAQkK,MAAQ,UAChBlK,QAAQmK,SAAU,EAClBnK,QAAQU,OACRV,QAAQoK,QAIRpK,QAAQjI,GAAK4Q,KACb3I,QAAQqK,YAAc1B,KACtB3I,QAAQsK,KAAO3B,KACf3I,QAAQuK,IAAM5B,KACd3I,QAAQwK,eAAiB7B,KACzB3I,QAAQyK,mBAAqB9B,KAC7B3I,QAAQ0K,KAAO/B,KAEf3I,QAAQ2K,QAAU,SAAUzT,GACxB,KAAM,IAAI/E,OAAM,qCAIpB6N,QAAQ4K,IAAM,WAAc,MAAO,KACnC5K,QAAQ6K,MAAQ,SAAUC,GACtB,KAAM,IAAI3Y,OAAM;;CGnFlB,SAAS0Z,GA2DV,QAASzT,GAAM0T,GACd,KAAMC,YAAWC,EAAOF,IAWzB,QAASlP,GAAI5B,EAAO3F,GAEnB,IADA,GAAI5B,GAASuH,EAAMvH,OACZA,KACNuH,EAAMvH,GAAU4B,EAAG2F,EAAMvH,GAE1B,OAAOuH,GAYR,QAASiR,GAAUhK,EAAQ5M,GAC1B,MAAOuH,GAAIqF,EAAO1K,MAAM2U,GAAkB7W,GAAIiE,KAAK,KAgBpD,QAAS6S,GAAWlK,GAMnB,IALA,GAGI1N,GACA6X,EAJA1P,KACA2P,EAAU,EACV5Y,EAASwO,EAAOxO,OAGHA,EAAV4Y,GACN9X,EAAQ0N,EAAO4E,WAAWwF,KACtB9X,GAAS,OAAmB,OAATA,GAA6Bd,EAAV4Y,GAEzCD,EAAQnK,EAAO4E,WAAWwF,KACF,QAAX,MAARD,GACJ1P,EAAOhJ,OAAe,KAARa,IAAkB,KAAe,KAAR6X,GAAiB,QAIxD1P,EAAOhJ,KAAKa,GACZ8X,MAGD3P,EAAOhJ,KAAKa,EAGd,OAAOmI,GAWR,QAAS4P,GAAWtR,GACnB,MAAO4B,GAAI5B,EAAO,SAASzG,GAC1B,GAAImI,GAAS,EAOb,OANInI,GAAQ,QACXA,GAAS,MACTmI,GAAU6P,EAAmBhY,IAAU,GAAK,KAAQ,OACpDA,EAAQ,MAAiB,KAARA,GAElBmI,GAAU6P,EAAmBhY,KAE3B+E,KAAK,IAYT,QAASkT,GAAaC,GACrB,MAAqB,IAAjBA,EAAY,GACRA,EAAY,GAEC,GAAjBA,EAAY,GACRA,EAAY,GAEC,GAAjBA,EAAY,GACRA,EAAY,GAEbnQ,EAcR,QAASoQ,GAAaC,EAAOC,GAG5B,MAAOD,GAAQ,GAAK,IAAc,GAARA,KAAwB,GAARC,IAAc,GAQzD,QAASC,GAAMC,EAAOC,EAAWC,GAChC,GAAIpG,GAAI,CAGR,KAFAkG,EAAQE,EAAYC,EAAMH,EAAQI,GAAQJ,GAAS,EACnDA,GAASG,EAAMH,EAAQC,GACOD,EAAQK,EAAgBC,GAAQ,EAAGxG,GAAKtK,EACrEwQ,EAAQG,EAAMH,EAAQK,EAEvB,OAAOF,GAAMrG,GAAKuG,EAAgB,GAAKL,GAASA,EAAQO,IAUzD,QAAS5K,GAAO6K,GAEf,GAEIC,GAIAC,EACA7G,EACA8G,EACAC,EACAC,EACA/G,EACA+F,EACAiB,EAEAC,EAfAnR,KACAoR,EAAcR,EAAM7Z,OAEpBF,EAAI,EACJiJ,EAAIuR,EACJC,EAAOC,CAqBX,KALAT,EAAQF,EAAMlH,YAAY8H,GACd,EAARV,IACHA,EAAQ,GAGJ7G,EAAI,EAAO6G,EAAJ7G,IAAaA,EAEpB2G,EAAMzG,WAAWF,IAAM,KAC1BvO,EAAM,aAEPsE,EAAOhJ,KAAK4Z,EAAMzG,WAAWF,GAM9B,KAAK8G,EAAQD,EAAQ,EAAIA,EAAQ,EAAI,EAAWM,EAARL,GAAgD,CAOvF,IAAKC,EAAOna,EAAGoa,EAAI,EAAG/G,EAAItK,EAErBmR,GAASK,GACZ1V,EAAM,iBAGPuU,EAAQH,EAAac,EAAMzG,WAAW4G,OAElCd,GAASrQ,GAAQqQ,EAAQM,GAAOkB,EAAS5a,GAAKoa,KACjDvV,EAAM,YAGP7E,GAAKoZ,EAAQgB,EACbC,EAASI,GAALpH,EAAYwH,EAAQxH,GAAKoH,EAAOZ,EAAOA,EAAOxG,EAAIoH,IAE1CJ,EAARjB,GAf+C/F,GAAKtK,EAmBxDuR,EAAavR,EAAOsR,EAChBD,EAAIV,EAAMkB,EAASN,IACtBzV,EAAM,YAGPuV,GAAKE,CAINN,GAAM7Q,EAAOjJ,OAAS,EACtBua,EAAOnB,EAAMtZ,EAAIma,EAAMH,EAAa,GAARG,GAIxBT,EAAM1Z,EAAIga,GAAOY,EAAS3R,GAC7BpE,EAAM,YAGPoE,GAAKyQ,EAAM1Z,EAAIga,GACfha,GAAKga,EAGL7Q,EAAO+L,OAAOlV,IAAK,EAAGiJ,GAIvB,MAAO8P,GAAW5P,GAUnB,QAASgG,GAAO4K,GACf,GAAI9Q,GACAsQ,EACAuB,EACAC,EACAN,EACArH,EACA4H,EACAC,EACA5H,EACAgH,EACAa,EAGAX,EAEAY,EACAb,EACAc,EANAjS,IAoBJ,KAXA4Q,EAAQnB,EAAWmB,GAGnBQ,EAAcR,EAAM7Z,OAGpB+I,EAAIuR,EACJjB,EAAQ,EACRkB,EAAOC,EAGFtH,EAAI,EAAOmH,EAAJnH,IAAmBA,EAC9B8H,EAAenB,EAAM3G,GACF,IAAf8H,GACH/R,EAAOhJ,KAAK6Y,EAAmBkC,GAejC,KAXAJ,EAAiBC,EAAc5R,EAAOjJ,OAMlC6a,GACH5R,EAAOhJ,KAAKwa,GAIWJ,EAAjBO,GAA8B,CAIpC,IAAKE,EAAIJ,EAAQxH,EAAI,EAAOmH,EAAJnH,IAAmBA,EAC1C8H,EAAenB,EAAM3G,GACjB8H,GAAgBjS,GAAoB+R,EAAfE,IACxBF,EAAIE,EAcN,KARAC,EAAwBL,EAAiB,EACrCE,EAAI/R,EAAIyQ,GAAOkB,EAASrB,GAAS4B,IACpCtW,EAAM,YAGP0U,IAAUyB,EAAI/R,GAAKkS,EACnBlS,EAAI+R,EAEC5H,EAAI,EAAOmH,EAAJnH,IAAmBA,EAO9B,GANA8H,EAAenB,EAAM3G,GAEFnK,EAAfiS,KAAsB3B,EAAQqB,GACjC/V,EAAM,YAGHqW,GAAgBjS,EAAG,CAEtB,IAAKgS,EAAI1B,EAAOlG,EAAItK,EACnBsR,EAASI,GAALpH,EAAYwH,EAAQxH,GAAKoH,EAAOZ,EAAOA,EAAOxG,EAAIoH,IAC9CJ,EAAJY,GAFyC5H,GAAKtK,EAKlDqS,EAAUH,EAAIZ,EACdC,EAAavR,EAAOsR,EACpBlR,EAAOhJ,KACN6Y,EAAmBG,EAAakB,EAAIe,EAAUd,EAAY,KAE3DW,EAAIvB,EAAM0B,EAAUd,EAGrBnR,GAAOhJ,KAAK6Y,EAAmBG,EAAa8B,EAAG,KAC/CR,EAAOnB,EAAMC,EAAO4B,EAAuBL,GAAkBC,GAC7DxB,EAAQ,IACNuB,IAIFvB,IACAtQ,EAGH,MAAOE,GAAOpD,KAAK,IAapB,QAASsV,GAAUC,GAClB,MAAO5C,GAAU4C,EAAQ,SAAS5M,GACjC,MAAO6M,GAAcjO,KAAKoB,GACvBQ,EAAOR,EAAOoE,MAAM,GAAGL,eACvB/D,IAYL,QAAS8M,GAAQF,GAChB,MAAO5C,GAAU4C,EAAQ,SAAS5M,GACjC,MAAO+M,GAAcnO,KAAKoB,GACvB,OAASS,EAAOT,GAChBA,IAhcL,GAAIgN,GAAgC,gBAAXvd,UAAuBA,QAC5Cwd,EAA8B,gBAAVzd,SAAsBA,QAC7CA,OAAOC,SAAWud,GAAexd,OAC9B0d,EAA8B,gBAAV9O,SAAsBA,QAC1C8O,EAAW9O,SAAW8O,GAAcA,EAAWrG,SAAWqG,KAC7DtD,EAAOsD,EAQR,IAAIpL,GAiCJ1P,EA9BA8Z,EAAS,WAGT7R,EAAO,GACP8R,EAAO,EACPhB,EAAO,GACPC,EAAO,GACPH,EAAO,IACPe,EAAc,GACdF,EAAW,IACXG,EAAY,IAGZY,EAAgB,QAChBE,EAAgB,SAChB9C,EAAkB,6BAGlBF,GACCoD,SAAY,kDACZC,YAAa,iDACbC,gBAAiB,iBAIlBnC,EAAgB7Q,EAAO8R,EACvBnB,EAAQsC,KAAKtC,MACbV,EAAqBlP,OAAOmS,YAub5B,IA3BAzL,GAMC0L,QAAW,QAQXC,MACCjN,OAAU0J,EACVzJ,OAAU4J,GAEX7J,OAAUA,EACVC,OAAUA,EACVqM,QAAWA,EACXH,UAAaA,GAOI,kBAAVe,SACc,gBAAdA,QAAOC,KACdD,OAAOC,IAEPD,OAAO,WAAY,WAClB,MAAO5L,SAEF,IAAIkL,IAAgBA,EAAYY,SACtC,GAAIX,EACHA,EAAWxd,QAAUqS,MAErB,KAAK1P,IAAO0P,GACXA,EAAS3G,eAAe/I,KAAS4a,EAAY5a,GAAO0P,EAAS1P,QAI/DwX,GAAK9H,SAAWA,GAGhB7R;;;;AFreF,YAKA,SAASkL,gBAAezD,EAAKyF,GAC3B,MAAOxD,QAAOjI,UAAUyJ,eAAetG,KAAK6C,EAAKyF,GAGnD3N,OAAOC,QAAU,SAASqZ,EAAIC,EAAKC,EAAIC,GACrCF,EAAMA,GAAO,IACbC,EAAKA,GAAM,GACX,IAAItR,KAEJ,IAAkB,gBAAPoR,IAAiC,IAAdA,EAAGtX,OAC/B,MAAOkG,EAGT,IAAIwI,GAAS,KACb4I,GAAKA,EAAGxT,MAAMyT,EAEd,IAAIG,GAAU,GACVD,IAAsC,gBAApBA,GAAQC,UAC5BA,EAAUD,EAAQC,QAGpB,IAAI1L,GAAMsL,EAAGtX,MAET0X,GAAU,GAAK1L,EAAM0L,IACvB1L,EAAM0L,EAGR,KAAK,GAAI5X,GAAI,EAAOkM,EAAJlM,IAAWA,EAAG,CAC5B,GAEI6X,GAAMC,EAAMzE,EAAG0E,EAFf5L,EAAIqL,EAAGxX,GAAG8D,QAAQ8K,EAAQ,OAC1B/G,EAAMsE,EAAE7L,QAAQoX,EAGhB7P,IAAO,GACTgQ,EAAO1L,EAAE9B,OAAO,EAAGxC,GACnBiQ,EAAO3L,EAAE9B,OAAOxC,EAAM,KAEtBgQ,EAAO1L,EACP2L,EAAO,IAGTzE,EAAIN,mBAAmB8E,GACvBE,EAAIhF,mBAAmB+E,GAElBjO,eAAezD,EAAKiN,GAEd5Q,QAAQ2D,EAAIiN,IACrBjN,EAAIiN,GAAGlT,KAAK4X,GAEZ3R,EAAIiN,IAAMjN,EAAIiN,GAAI0E,GAJlB3R,EAAIiN,GAAK0E,EAQb,MAAO3R,GAGT,IAAI3D,SAAUD,MAAMC,SAAW,SAAUuV,GACvC,MAA8C,mBAAvC3P,OAAOjI,UAAUwI,SAASrF,KAAKyU;;AC7DxC,YAgDA,SAAS3O,KAAK2O,EAAIhM,GAChB,GAAIgM,EAAG3O,IAAK,MAAO2O,GAAG3O,IAAI2C,EAE1B,KAAK,GADDiM,MACKjY,EAAI,EAAGA,EAAIgY,EAAG9X,OAAQF,IAC7BiY,EAAI9X,KAAK6L,EAAEgM,EAAGhY,GAAIA,GAEpB,OAAOiY,GApDT,GAAIC,oBAAqB,SAASH,GAChC,aAAeA,IACb,IAAK,SACH,MAAOA,EAET,KAAK,UACH,MAAOA,GAAI,OAAS,OAEtB,KAAK,SACH,MAAOI,UAASJ,GAAKA,EAAI,EAE3B,SACE,MAAO,IAIb7Z,QAAOC,QAAU,SAASiI,EAAKqR,EAAKC,EAAI/T,GAOtC,MANA8T,GAAMA,GAAO,IACbC,EAAKA,GAAM,IACC,OAARtR,IACFA,EAAMoI,QAGW,gBAARpI,GACFiD,IAAI+O,WAAWhS,GAAM,SAASiN,GACnC,GAAIgF,GAAKnE,mBAAmBgE,mBAAmB7E,IAAMqE,CACrD,OAAIjV,SAAQ2D,EAAIiN,IACPhK,IAAIjD,EAAIiN,GAAI,SAAS0E,GAC1B,MAAOM,GAAKnE,mBAAmBgE,mBAAmBH,MACjDhS,KAAK0R,GAEDY,EAAKnE,mBAAmBgE,mBAAmB9R,EAAIiN,OAEvDtN,KAAK0R,GAIL9T,EACEuQ,mBAAmBgE,mBAAmBvU,IAAS+T,EAC/CxD,mBAAmBgE,mBAAmB9R,IAF3B,GAKpB,IAAI3D,SAAUD,MAAMC,SAAW,SAAUuV,GACvC,MAA8C,mBAAvC3P,OAAOjI,UAAUwI,SAASrF,KAAKyU,IAYpCI,WAAa/P,OAAOD,MAAQ,SAAUhC,GACxC,GAAI6R,KACJ,KAAK,GAAInX,KAAOsF,GACViC,OAAOjI,UAAUyJ,eAAetG,KAAK6C,EAAKtF,IAAMmX,EAAI9X,KAAKW,EAE/D,OAAOmX;;AJnFT,YAEA9Z,SAAQ+Q,OAAS/Q,QAAQ4D,MAAQtE,QAAQ,YACzCU,QAAQgR,OAAShR,QAAQoD,UAAY9D,QAAQ;;AC2B7C,QAAS2R,OACPzQ,KAAK0Q,SAAW,KAChB1Q,KAAK2Q,QAAU,KACf3Q,KAAK4Q,KAAO,KACZ5Q,KAAK6Q,KAAO,KACZ7Q,KAAK8Q,KAAO,KACZ9Q,KAAK+Q,SAAW,KAChB/Q,KAAK+I,KAAO,KACZ/I,KAAKgR,OAAS,KACdhR,KAAKiR,MAAQ,KACbjR,KAAK8E,SAAW,KAChB9E,KAAKyG,KAAO,KACZzG,KAAKkR,KAAO,KAqDd,QAASC,UAAS1Q,EAAK2Q,EAAkBC,GACvC,GAAI5Q,GAAO2L,SAAS3L,IAAQA,YAAegQ,KAAK,MAAOhQ,EAEvD,IAAI6Q,GAAI,GAAIb,IAEZ,OADAa,GAAElO,MAAM3C,EAAK2Q,EAAkBC,GACxBC,EA6OT,QAASC,WAAU9J,GAMjB,MADI6B,UAAS7B,KAAMA,EAAM0J,SAAS1J,IAC5BA,YAAegJ,KACdhJ,EAAI2F,SADuBqD,IAAIhP,UAAU2L,OAAOxI,KAAK6C,GA4D9D,QAAS+J,YAAWC,EAAQC,GAC1B,MAAOP,UAASM,GAAQ,GAAO,GAAMlO,QAAQmO,GAO/C,QAASC,kBAAiBF,EAAQC,GAChC,MAAKD,GACEN,SAASM,GAAQ,GAAO,GAAMG,cAAcF,GAD/BA,EAyRtB,QAASpI,UAAS0C,GAChB,MAAsB,gBAARA,GAGhB,QAASI,UAASJ,GAChB,MAAsB,gBAARA,IAA4B,OAARA,EAGpC,QAAShB,QAAOgB,GACd,MAAe,QAARA,EAET,QAASC,mBAAkBD,GACzB,MAAe,OAAPA,EA5qBV,GAAI6F,UAAW/S,QAAQ,WAEvBU,SAAQ4D,MAAQ+N,SAChB3R,QAAQ+D,QAAUiO,WAClBhS,QAAQoS,cAAgBD,iBACxBnS,QAAQ4N,OAASmE,UAEjB/R,QAAQiR,IAAMA,GAqBd,IAAIqB,iBAAkB,oBAClBC,YAAc,WAIdC,QAAU,IAAK,IAAK,IAAK,IAAK,IAAK,KAAM,KAAM,KAG/CC,QAAU,IAAK,IAAK,IAAK,KAAM,IAAK,KAAKhL,OAAO+K,QAGhDE,YAAc,KAAMjL,OAAOgL,QAK3BE,cAAgB,IAAK,IAAK,IAAK,IAAK,KAAKlL,OAAOiL,YAChDE,iBAAmB,IAAK,IAAK,KAC7BC,eAAiB,IACjBC,oBAAsB,wBACtBC,kBAAoB,8BAEpBC,gBACEC,YAAc,EACdC,eAAe,GAGjBC,kBACEF,YAAc,EACdC,eAAe,GAGjBE,iBACEC,MAAQ,EACRC,OAAS,EACTC,KAAO,EACPC,QAAU,EACVC,MAAQ,EACRC,SAAS,EACTC,UAAU,EACVC,QAAQ,EACRC,WAAW,EACXC,SAAS,GAEXC,YAAczU,QAAQ,cAU1B2R,KAAIhP,UAAU2B,MAAQ,SAAS3C,EAAK2Q,EAAkBC,GACpD,IAAK/H,SAAS7I,GACZ,KAAM,IAAI+S,WAAU,+CAAkD/S,GAGxE,IAAIgT,GAAOhT,CAIXgT,GAAOA,EAAKC,MAEZ,IAAIC,GAAQ7B,gBAAgB8B,KAAKH,EACjC,IAAIE,EAAO,CACTA,EAAQA,EAAM,EACd,IAAIE,GAAaF,EAAMG,aACvB9T,MAAK0Q,SAAWmD,EAChBJ,EAAOA,EAAK/H,OAAOiI,EAAMpS,QAO3B,GAAI8P,GAAqBsC,GAASF,EAAKrI,MAAM,wBAAyB,CACpE,GAAIuF,GAAgC,OAAtB8C,EAAK/H,OAAO,EAAG,IACzBiF,GAAagD,GAAShB,iBAAiBgB,KACzCF,EAAOA,EAAK/H,OAAO,GACnB1L,KAAK2Q,SAAU,GAInB,IAAKgC,iBAAiBgB,KACjBhD,GAAYgD,IAAUf,gBAAgBe,IAAU,CAmBnD,IAAK,GADDI,GAAU,GACL1S,EAAI,EAAGA,EAAI+Q,gBAAgB7Q,OAAQF,IAAK,CAC/C,GAAI2S,GAAMP,EAAK9R,QAAQyQ,gBAAgB/Q,GAC3B,MAAR2S,IAA2B,KAAZD,GAAwBA,EAANC,KACnCD,EAAUC,GAKd,GAAIpD,GAAMqD,CAGRA,GAFc,KAAZF,EAEON,EAAKS,YAAY,KAIjBT,EAAKS,YAAY,IAAKH,GAKlB,KAAXE,IACFrD,EAAO6C,EAAKU,MAAM,EAAGF,GACrBR,EAAOA,EAAKU,MAAMF,EAAS,GAC3BjU,KAAK4Q,KAAOwD,mBAAmBxD,IAIjCmD,EAAU,EACV,KAAK,GAAI1S,GAAI,EAAGA,EAAI8Q,aAAa5Q,OAAQF,IAAK,CAC5C,GAAI2S,GAAMP,EAAK9R,QAAQwQ,aAAa9Q,GACxB,MAAR2S,IAA2B,KAAZD,GAAwBA,EAANC,KACnCD,EAAUC,GAGE,KAAZD,IACFA,EAAUN,EAAKlS,QAEjBvB,KAAK6Q,KAAO4C,EAAKU,MAAM,EAAGJ,GAC1BN,EAAOA,EAAKU,MAAMJ,GAGlB/T,KAAKqU,YAILrU,KAAK+Q,SAAW/Q,KAAK+Q,UAAY,EAIjC,IAAIuD,GAAoC,MAArBtU,KAAK+Q,SAAS,IACe,MAA5C/Q,KAAK+Q,SAAS/Q,KAAK+Q,SAASxP,OAAS,EAGzC,KAAK+S,EAEH,IAAK,GADDC,GAAYvU,KAAK+Q,SAAS1L,MAAM,MAC3BhE,EAAI,EAAG4J,EAAIsJ,EAAUhT,OAAY0J,EAAJ5J,EAAOA,IAAK,CAChD,GAAIiE,GAAOiP,EAAUlT,EACrB,IAAKiE,IACAA,EAAK8F,MAAMkH,qBAAsB,CAEpC,IAAK,GADDkC,GAAU,GACLC,EAAI,EAAGC,EAAIpP,EAAK/D,OAAYmT,EAAJD,EAAOA,IAKpCD,GAJElP,EAAKqP,WAAWF,GAAK,IAIZ,IAEAnP,EAAKmP,EAIpB,KAAKD,EAAQpJ,MAAMkH,qBAAsB,CACvC,GAAIsC,GAAaL,EAAUJ,MAAM,EAAG9S,GAChCwT,EAAUN,EAAUJ,MAAM9S,EAAI,GAC9ByT,EAAMxP,EAAK8F,MAAMmH,kBACjBuC,KACFF,EAAWpT,KAAKsT,EAAI,IACpBD,EAAQE,QAAQD,EAAI,KAElBD,EAAQtT,SACVkS,EAAO,IAAMoB,EAAQzN,KAAK,KAAOqM,GAEnCzT,KAAK+Q,SAAW6D,EAAWxN,KAAK,IAChC,SAaR,GANEpH,KAAK+Q,SADH/Q,KAAK+Q,SAASxP,OAAS8Q,eACT,GAGArS,KAAK+Q,SAAS+C,eAG3BQ,EAAc,CAOjB,IAAK,GAFDU,GAAchV,KAAK+Q,SAAS1L,MAAM,KAClC4P,KACK5T,EAAI,EAAGA,EAAI2T,EAAYzT,SAAUF,EAAG,CAC3C,GAAI6T,GAAIF,EAAY3T,EACpB4T,GAAOzT,KAAK0T,EAAE9J,MAAM,kBAChB,OAASyG,SAASrB,OAAO0E,GAAKA,GAEpClV,KAAK+Q,SAAWkE,EAAO7N,KAAK,KAG9B,GAAI+N,GAAInV,KAAK8Q,KAAO,IAAM9Q,KAAK8Q,KAAO,GAClCsE,EAAIpV,KAAK+Q,UAAY,EACzB/Q,MAAK6Q,KAAOuE,EAAID,EAChBnV,KAAKkR,MAAQlR,KAAK6Q,KAIdyD,IACFtU,KAAK+Q,SAAW/Q,KAAK+Q,SAASrF,OAAO,EAAG1L,KAAK+Q,SAASxP,OAAS,GAC/C,MAAZkS,EAAK,KACPA,EAAO,IAAMA,IAOnB,IAAKjB,eAAeqB,GAKlB,IAAK,GAAIxS,GAAI,EAAG4J,EAAIiH,WAAW3Q,OAAY0J,EAAJ5J,EAAOA,IAAK,CACjD,GAAIgU,GAAKnD,WAAW7Q,GAChBiU,EAAMC,mBAAmBF,EACzBC,KAAQD,IACVC,EAAME,OAAOH,IAEf5B,EAAOA,EAAKpO,MAAMgQ,GAAIjO,KAAKkO,GAM/B,GAAIvM,GAAO0K,EAAK9R,QAAQ,IACX,MAAToH,IAEF/I,KAAK+I,KAAO0K,EAAK/H,OAAO3C,GACxB0K,EAAOA,EAAKU,MAAM,EAAGpL,GAEvB,IAAI0M,GAAKhC,EAAK9R,QAAQ,IAoBtB,IAnBW,KAAP8T,GACFzV,KAAKgR,OAASyC,EAAK/H,OAAO+J,GAC1BzV,KAAKiR,MAAQwC,EAAK/H,OAAO+J,EAAK,GAC1BrE,IACFpR,KAAKiR,MAAQsC,YAAYnQ,MAAMpD,KAAKiR,QAEtCwC,EAAOA,EAAKU,MAAM,EAAGsB,IACZrE,IAETpR,KAAKgR,OAAS,GACdhR,KAAKiR,UAEHwC,IAAMzT,KAAK8E,SAAW2O,GACtBb,gBAAgBiB,IAChB7T,KAAK+Q,WAAa/Q,KAAK8E,WACzB9E,KAAK8E,SAAW,KAId9E,KAAK8E,UAAY9E,KAAKgR,OAAQ,CAChC,GAAImE,GAAInV,KAAK8E,UAAY,GACrBoQ,EAAIlV,KAAKgR,QAAU,EACvBhR,MAAKyG,KAAO0O,EAAID,EAKlB,MADAlV,MAAKkR,KAAOlR,KAAKoN,SACVpN,MAcTyQ,IAAIhP,UAAU2L,OAAS,WACrB,GAAIwD,GAAO5Q,KAAK4Q,MAAQ,EACpBA,KACFA,EAAO2E,mBAAmB3E,GAC1BA,EAAOA,EAAKzL,QAAQ,OAAQ,KAC5ByL,GAAQ,IAGV,IAAIF,GAAW1Q,KAAK0Q,UAAY,GAC5B5L,EAAW9E,KAAK8E,UAAY,GAC5BiE,EAAO/I,KAAK+I,MAAQ,GACpB8H,GAAO,EACPI,EAAQ,EAERjR,MAAK6Q,KACPA,EAAOD,EAAO5Q,KAAK6Q,KACV7Q,KAAK+Q,WACdF,EAAOD,GAAuC,KAA/B5Q,KAAK+Q,SAASpP,QAAQ,KACjC3B,KAAK+Q,SACL,IAAM/Q,KAAK+Q,SAAW,KACtB/Q,KAAK8Q,OACPD,GAAQ,IAAM7Q,KAAK8Q,OAInB9Q,KAAKiR,OACL7E,SAASpM,KAAKiR,QACdvH,OAAOD,KAAKzJ,KAAKiR,OAAO1P,SAC1B0P,EAAQsC,YAAY3Q,UAAU5C,KAAKiR,OAGrC,IAAID,GAAShR,KAAKgR,QAAWC,GAAU,IAAMA,GAAW,EAsBxD,OApBIP,IAAoC,MAAxBA,EAAShF,OAAO,MAAagF,GAAY,KAIrD1Q,KAAK2Q,WACHD,GAAYkC,gBAAgBlC,KAAcG,KAAS,GACvDA,EAAO,MAAQA,GAAQ,IACnB/L,GAAmC,MAAvBA,EAAS4Q,OAAO,KAAY5Q,EAAW,IAAMA,IACnD+L,IACVA,EAAO,IAGL9H,GAA2B,MAAnBA,EAAK2M,OAAO,KAAY3M,EAAO,IAAMA,GAC7CiI,GAA+B,MAArBA,EAAO0E,OAAO,KAAY1E,EAAS,IAAMA,GAEvDlM,EAAWA,EAASK,QAAQ,QAAS,SAASiG,GAC5C,MAAOmK,oBAAmBnK,KAE5B4F,EAASA,EAAO7L,QAAQ,IAAK,OAEtBuL,EAAWG,EAAO/L,EAAWkM,EAASjI,GAO/C0H,IAAIhP,UAAU8B,QAAU,SAASmO,GAC/B,MAAO1R,MAAK4R,cAAcT,SAASO,GAAU,GAAO,IAAOtE,UAQ7DqD,IAAIhP,UAAUmQ,cAAgB,SAASF,GACrC,GAAIpI,SAASoI,GAAW,CACtB,GAAIiE,GAAM,GAAIlF,IACdkF,GAAIvS,MAAMsO,GAAU,GAAO,GAC3BA,EAAWiE,EAGb,GAAIzQ,GAAS,GAAIuL,IAUjB,IATA/G,OAAOD,KAAKzJ,MAAMgJ,QAAQ,SAAS0L,GACjCxP,EAAOwP,GAAK1U,KAAK0U,IAChB1U,MAIHkF,EAAO6D,KAAO2I,EAAS3I,KAGD,KAAlB2I,EAASR,KAEX,MADAhM,GAAOgM,KAAOhM,EAAOkI,SACdlI,CAIT,IAAIwM,EAASf,UAAYe,EAAShB,SAchC,MAZAhH,QAAOD,KAAKiI,GAAU1I,QAAQ,SAAS0L,GAC3B,aAANA,IACFxP,EAAOwP,GAAKhD,EAASgD,MAIrB9B,gBAAgB1N,EAAOwL,WACvBxL,EAAO6L,WAAa7L,EAAOJ,WAC7BI,EAAOuB,KAAOvB,EAAOJ,SAAW,KAGlCI,EAAOgM,KAAOhM,EAAOkI,SACdlI,CAGT,IAAIwM,EAAShB,UAAYgB,EAAShB,WAAaxL,EAAOwL,SAAU,CAS9D,IAAKkC,gBAAgBlB,EAAShB,UAK5B,MAJAhH,QAAOD,KAAKiI,GAAU1I,QAAQ,SAAS0L,GACrCxP,EAAOwP,GAAKhD,EAASgD,KAEvBxP,EAAOgM,KAAOhM,EAAOkI,SACdlI,CAIT,IADAA,EAAOwL,SAAWgB,EAAShB,SACtBgB,EAASb,MAAS8B,iBAAiBjB,EAAShB,UAS/CxL,EAAOJ,SAAW4M,EAAS5M,aAT+B,CAE1D,IADA,GAAI8Q,IAAWlE,EAAS5M,UAAY,IAAIO,MAAM,KACvCuQ,EAAQrU,UAAYmQ,EAASb,KAAO+E,EAAQrQ,WAC9CmM,EAASb,OAAMa,EAASb,KAAO,IAC/Ba,EAASX,WAAUW,EAASX,SAAW,IACzB,KAAf6E,EAAQ,IAAWA,EAAQb,QAAQ,IACnCa,EAAQrU,OAAS,GAAGqU,EAAQb,QAAQ,IACxC7P,EAAOJ,SAAW8Q,EAAQxO,KAAK,KAWjC,GAPAlC,EAAO8L,OAASU,EAASV,OACzB9L,EAAO+L,MAAQS,EAAST,MACxB/L,EAAO2L,KAAOa,EAASb,MAAQ,GAC/B3L,EAAO0L,KAAOc,EAASd,KACvB1L,EAAO6L,SAAWW,EAASX,UAAYW,EAASb,KAChD3L,EAAO4L,KAAOY,EAASZ,KAEnB5L,EAAOJ,UAAYI,EAAO8L,OAAQ,CACpC,GAAImE,GAAIjQ,EAAOJ,UAAY,GACvBoQ,EAAIhQ,EAAO8L,QAAU,EACzB9L,GAAOuB,KAAO0O,EAAID,EAIpB,MAFAhQ,GAAOyL,QAAUzL,EAAOyL,SAAWe,EAASf,QAC5CzL,EAAOgM,KAAOhM,EAAOkI,SACdlI,EAGT,GAAI2Q,GAAe3Q,EAAOJ,UAA0C,MAA9BI,EAAOJ,SAAS4Q,OAAO,GACzDI,EACIpE,EAASb,MACTa,EAAS5M,UAA4C,MAAhC4M,EAAS5M,SAAS4Q,OAAO,GAElDK,EAAcD,GAAYD,GACX3Q,EAAO2L,MAAQa,EAAS5M,SACvCkR,EAAgBD,EAChBE,EAAU/Q,EAAOJ,UAAYI,EAAOJ,SAASO,MAAM,SACnDuQ,EAAUlE,EAAS5M,UAAY4M,EAAS5M,SAASO,MAAM,SACvD6Q,EAAYhR,EAAOwL,WAAakC,gBAAgB1N,EAAOwL,SA2B3D,IApBIwF,IACFhR,EAAO6L,SAAW,GAClB7L,EAAO4L,KAAO,KACV5L,EAAO2L,OACU,KAAfoF,EAAQ,GAAWA,EAAQ,GAAK/Q,EAAO2L,KACtCoF,EAAQlB,QAAQ7P,EAAO2L,OAE9B3L,EAAO2L,KAAO,GACVa,EAAShB,WACXgB,EAASX,SAAW,KACpBW,EAASZ,KAAO,KACZY,EAASb,OACQ,KAAf+E,EAAQ,GAAWA,EAAQ,GAAKlE,EAASb,KACxC+E,EAAQb,QAAQrD,EAASb,OAEhCa,EAASb,KAAO,MAElBkF,EAAaA,IAA8B,KAAfH,EAAQ,IAA4B,KAAfK,EAAQ,KAGvDH,EAEF5Q,EAAO2L,KAAQa,EAASb,MAA0B,KAAlBa,EAASb,KAC3Ba,EAASb,KAAO3L,EAAO2L,KACrC3L,EAAO6L,SAAYW,EAASX,UAAkC,KAAtBW,EAASX,SAC/BW,EAASX,SAAW7L,EAAO6L,SAC7C7L,EAAO8L,OAASU,EAASV,OACzB9L,EAAO+L,MAAQS,EAAST,MACxBgF,EAAUL,MAEL,IAAIA,EAAQrU,OAGZ0U,IAASA,MACdA,EAAQrL,MACRqL,EAAUA,EAAQhP,OAAO2O,GACzB1Q,EAAO8L,OAASU,EAASV,OACzB9L,EAAO+L,MAAQS,EAAST,UACnB,KAAKhF,kBAAkByF,EAASV,QAAS,CAI9C,GAAIkF,EAAW,CACbhR,EAAO6L,SAAW7L,EAAO2L,KAAOoF,EAAQ1Q,OAIxC,IAAI4Q,GAAajR,EAAO2L,MAAQ3L,EAAO2L,KAAKlP,QAAQ,KAAO,EAC1CuD,EAAO2L,KAAKxL,MAAM,MAAO,CACtC8Q,KACFjR,EAAO0L,KAAOuF,EAAW5Q,QACzBL,EAAO2L,KAAO3L,EAAO6L,SAAWoF,EAAW5Q,SAW/C,MARAL,GAAO8L,OAASU,EAASV,OACzB9L,EAAO+L,MAAQS,EAAST,MAEnBjG,OAAO9F,EAAOJ,WAAckG,OAAO9F,EAAO8L,UAC7C9L,EAAOuB,MAAQvB,EAAOJ,SAAWI,EAAOJ,SAAW,KACpCI,EAAO8L,OAAS9L,EAAO8L,OAAS,KAEjD9L,EAAOgM,KAAOhM,EAAOkI,SACdlI,EAGT,IAAK+Q,EAAQ1U,OAWX,MARA2D,GAAOJ,SAAW,KAGhBI,EAAOuB,KADLvB,EAAO8L,OACK,IAAM9L,EAAO8L,OAEb,KAEhB9L,EAAOgM,KAAOhM,EAAOkI,SACdlI,CAcT,KAAK,GARDkR,GAAOH,EAAQ9B,MAAM,IAAI,GACzBkC,GACCnR,EAAO2L,MAAQa,EAASb,QAAmB,MAATuF,GAAyB,OAATA,IAC1C,KAATA,EAIAE,EAAK,EACAjV,EAAI4U,EAAQ1U,OAAQF,GAAK,EAAGA,IACnC+U,EAAOH,EAAQ5U,GACH,KAAR+U,EACFH,EAAQM,OAAOlV,EAAG,GACA,OAAT+U,GACTH,EAAQM,OAAOlV,EAAG,GAClBiV,KACSA,IACTL,EAAQM,OAAOlV,EAAG,GAClBiV,IAKJ,KAAKP,IAAeC,EAClB,KAAOM,IAAMA,EACXL,EAAQlB,QAAQ,OAIhBgB,GAA6B,KAAfE,EAAQ,IACpBA,EAAQ,IAA+B,MAAzBA,EAAQ,GAAGP,OAAO,IACpCO,EAAQlB,QAAQ,IAGdsB,GAAsD,MAAjCJ,EAAQ7O,KAAK,KAAKsE,OAAO,KAChDuK,EAAQzU,KAAK,GAGf,IAAIgV,GAA4B,KAAfP,EAAQ,IACpBA,EAAQ,IAA+B,MAAzBA,EAAQ,GAAGP,OAAO,EAGrC,IAAIQ,EAAW,CACbhR,EAAO6L,SAAW7L,EAAO2L,KAAO2F,EAAa,GACbP,EAAQ1U,OAAS0U,EAAQ1Q,QAAU,EAInE,IAAI4Q,GAAajR,EAAO2L,MAAQ3L,EAAO2L,KAAKlP,QAAQ,KAAO,EAC1CuD,EAAO2L,KAAKxL,MAAM,MAAO,CACtC8Q,KACFjR,EAAO0L,KAAOuF,EAAW5Q,QACzBL,EAAO2L,KAAO3L,EAAO6L,SAAWoF,EAAW5Q,SAyB/C,MArBAwQ,GAAaA,GAAe7Q,EAAO2L,MAAQoF,EAAQ1U,OAE/CwU,IAAeS,GACjBP,EAAQlB,QAAQ,IAGbkB,EAAQ1U,OAIX2D,EAAOJ,SAAWmR,EAAQ7O,KAAK,MAH/BlC,EAAOJ,SAAW,KAClBI,EAAOuB,KAAO,MAMXuE,OAAO9F,EAAOJ,WAAckG,OAAO9F,EAAO8L,UAC7C9L,EAAOuB,MAAQvB,EAAOJ,SAAWI,EAAOJ,SAAW,KACpCI,EAAO8L,OAAS9L,EAAO8L,OAAS,KAEjD9L,EAAO0L,KAAOc,EAASd,MAAQ1L,EAAO0L,KACtC1L,EAAOyL,QAAUzL,EAAOyL,SAAWe,EAASf,QAC5CzL,EAAOgM,KAAOhM,EAAOkI,SACdlI,GAGTuL,IAAIhP,UAAU4S,UAAY,WACxB,GAAIxD,GAAO7Q,KAAK6Q,KACZC,EAAOiB,YAAY6B,KAAK/C,EACxBC,KACFA,EAAOA,EAAK,GACC,MAATA,IACF9Q,KAAK8Q,KAAOA,EAAKpF,OAAO,IAE1BmF,EAAOA,EAAKnF,OAAO,EAAGmF,EAAKtP,OAASuP,EAAKvP,SAEvCsP,IAAM7Q,KAAK+Q,SAAWF;;AFlrB5BtR,OAAOC,QAAU,SAAkBwM,GACjC,MAAOA,IAAsB,gBAARA,IACI,kBAAbA,GAAIoE,MACS,kBAAbpE,GAAIqE,MACc,kBAAlBrE,GAAIsE;;ADwHlB,QAAS9I,SAAQC,EAAKC,GAEpB,GAAIC,IACFC,QACAC,QAASC,eAkBX,OAfIC,WAAUxG,QAAU,IAAGoG,EAAIK,MAAQD,UAAU,IAC7CA,UAAUxG,QAAU,IAAGoG,EAAIM,OAASF,UAAU,IAC9CG,UAAUR,GAEZC,EAAIQ,WAAaT,EACRA,GAETlI,QAAQ4I,QAAQT,EAAKD,GAGnBW,YAAYV,EAAIQ,cAAaR,EAAIQ,YAAa,GAC9CE,YAAYV,EAAIK,SAAQL,EAAIK,MAAQ,GACpCK,YAAYV,EAAIM,UAASN,EAAIM,QAAS,GACtCI,YAAYV,EAAIW,iBAAgBX,EAAIW,eAAgB,GACpDX,EAAIM,SAAQN,EAAIE,QAAUU,kBACvBC,YAAYb,EAAKF,EAAKE,EAAIK,OAoCnC,QAASO,kBAAiBE,EAAKC,GAC7B,GAAIC,GAAQnB,QAAQoB,OAAOF,EAE3B,OAAIC,GACK,KAAYnB,QAAQS,OAAOU,GAAO,GAAK,IAAMF,EAC7C,KAAYjB,QAAQS,OAAOU,GAAO,GAAK,IAEvCF,EAKX,QAASX,gBAAeW,EAAKC,GAC3B,MAAOD,GAIT,QAASI,aAAYC,GACnB,GAAIC,KAMJ,OAJAD,GAAME,QAAQ,SAASC,EAAKC,GAC1BH,EAAKE,IAAO,IAGPF,EAIT,QAASP,aAAYb,EAAKtF,EAAO8G,GAG/B,GAAIxB,EAAIW,eACJjG,GACA+G,WAAW/G,EAAMmF,UAEjBnF,EAAMmF,UAAYhI,QAAQgI,WAExBnF,EAAM0C,aAAe1C,EAAM0C,YAAYtD,YAAcY,GAAQ,CACjE,GAAIgH,GAAMhH,EAAMmF,QAAQ2B,EAAcxB,EAItC,OAHK2B,UAASD,KACZA,EAAMb,YAAYb,EAAK0B,EAAKF,IAEvBE,EAIT,GAAIE,GAAYC,gBAAgB7B,EAAKtF,EACrC,IAAIkH,EACF,MAAOA,EAIT,IAAIE,GAAOC,OAAOD,KAAKpH,GACnBsH,EAAcd,YAAYY,EAQ9B,IANI9B,EAAIQ,aACNsB,EAAOC,OAAOE,oBAAoBvH,IAKhCwH,QAAQxH,KACJoH,EAAK9H,QAAQ,YAAc,GAAK8H,EAAK9H,QAAQ,gBAAkB,GACrE,MAAOmI,aAAYzH,EAIrB,IAAoB,IAAhBoH,EAAKlI,OAAc,CACrB,GAAI6H,WAAW/G,GAAQ,CACrB,GAAI2C,GAAO3C,EAAM2C,KAAO,KAAO3C,EAAM2C,KAAO,EAC5C,OAAO2C,GAAIE,QAAQ,YAAc7C,EAAO,IAAK,WAE/C,GAAI+E,SAAS1H,GACX,MAAOsF,GAAIE,QAAQmC,OAAOvI,UAAUwI,SAASrF,KAAKvC,GAAQ,SAE5D,IAAI6H,OAAO7H,GACT,MAAOsF,GAAIE,QAAQsC,KAAK1I,UAAUwI,SAASrF,KAAKvC,GAAQ,OAE1D,IAAIwH,QAAQxH,GACV,MAAOyH,aAAYzH,GAIvB,GAAI+H,GAAO,GAAItB,GAAQ,EAAOuB,GAAU,IAAK,IAS7C,IANIvG,QAAQzB,KACVyG,GAAQ,EACRuB,GAAU,IAAK,MAIbjB,WAAW/G,GAAQ,CACrB,GAAIiI,GAAIjI,EAAM2C,KAAO,KAAO3C,EAAM2C,KAAO,EACzCoF,GAAO,aAAeE,EAAI,IAkB5B,GAdIP,SAAS1H,KACX+H,EAAO,IAAMJ,OAAOvI,UAAUwI,SAASrF,KAAKvC,IAI1C6H,OAAO7H,KACT+H,EAAO,IAAMD,KAAK1I,UAAU8I,YAAY3F,KAAKvC,IAI3CwH,QAAQxH,KACV+H,EAAO,IAAMN,YAAYzH,IAGP,IAAhBoH,EAAKlI,UAAkBuH,GAAyB,GAAhBzG,EAAMd,QACxC,MAAO8I,GAAO,GAAKD,EAAOC,EAAO,EAGnC,IAAmB,EAAflB,EACF,MAAIY,UAAS1H,GACJsF,EAAIE,QAAQmC,OAAOvI,UAAUwI,SAASrF,KAAKvC,GAAQ,UAEnDsF,EAAIE,QAAQ,WAAY,UAInCF,GAAIC,KAAKpG,KAAKa,EAEd,IAAImI,EAWJ,OATEA,GADE1B,EACO2B,YAAY9C,EAAKtF,EAAO8G,EAAcQ,EAAaF,GAEnDA,EAAKiB,IAAI,SAASvI,GACzB,MAAOwI,gBAAehD,EAAKtF,EAAO8G,EAAcQ,EAAaxH,EAAK2G,KAItEnB,EAAIC,KAAKgD,MAEFC,qBAAqBL,EAAQJ,EAAMC,GAI5C,QAASb,iBAAgB7B,EAAKtF,GAC5B,GAAIgG,YAAYhG,GACd,MAAOsF,GAAIE,QAAQ,YAAa,YAClC,IAAIyB,SAASjH,GAAQ,CACnB,GAAIyI,GAAS,IAAOnI,KAAKC,UAAUP,GAAO8C,QAAQ,SAAU,IAClBA,QAAQ,KAAM,OACdA,QAAQ,OAAQ,KAAO,GACjE,OAAOwC,GAAIE,QAAQiD,EAAQ,UAE7B,MAAIC,UAAS1I,GACJsF,EAAIE,QAAQ,GAAKxF,EAAO,UAC7B6F,UAAU7F,GACLsF,EAAIE,QAAQ,GAAKxF,EAAO,WAE7B2I,OAAO3I,GACFsF,EAAIE,QAAQ,OAAQ,QAD7B,OAKF,QAASiC,aAAYzH,GACnB,MAAO,IAAMpC,MAAMwB,UAAUwI,SAASrF,KAAKvC,GAAS,IAItD,QAASoI,aAAY9C,EAAKtF,EAAO8G,EAAcQ,EAAaF,GAE1D,IAAK,GADDe,MACKnJ,EAAI,EAAG4J,EAAI5I,EAAMd,OAAY0J,EAAJ5J,IAASA,EAEvCmJ,EAAOhJ,KADL0J,eAAe7I,EAAO8I,OAAO9J,IACnBsJ,eAAehD,EAAKtF,EAAO8G,EAAcQ,EACjDwB,OAAO9J,IAAI,GAEH,GAShB,OANAoI,GAAKT,QAAQ,SAAS7G,GACfA,EAAIiJ,MAAM,UACbZ,EAAOhJ,KAAKmJ,eAAehD,EAAKtF,EAAO8G,EAAcQ,EACjDxH,GAAK,MAGNqI,EAIT,QAASG,gBAAehD,EAAKtF,EAAO8G,EAAcQ,EAAaxH,EAAK2G,GAClE,GAAI9D,GAAMyD,EAAK4C,CAsCf,IArCAA,EAAO3B,OAAO4B,yBAAyBjJ,EAAOF,KAAUE,MAAOA,EAAMF,IACjEkJ,EAAKE,IAEL9C,EADE4C,EAAKG,IACD7D,EAAIE,QAAQ,kBAAmB,WAE/BF,EAAIE,QAAQ,WAAY,WAG5BwD,EAAKG,MACP/C,EAAMd,EAAIE,QAAQ,WAAY,YAG7BqD,eAAevB,EAAaxH,KAC/B6C,EAAO,IAAM7C,EAAM,KAEhBsG,IACCd,EAAIC,KAAKjG,QAAQ0J,EAAKhJ,OAAS,GAE/BoG,EADEuC,OAAO7B,GACHX,YAAYb,EAAK0D,EAAKhJ,MAAO,MAE7BmG,YAAYb,EAAK0D,EAAKhJ,MAAO8G,EAAe,GAEhDV,EAAI9G,QAAQ,MAAQ,KAEpB8G,EADEK,EACIL,EAAIpD,MAAM,MAAMqF,IAAI,SAASe,GACjC,MAAO,KAAOA,IACbrE,KAAK,MAAMsE,OAAO,GAEf,KAAOjD,EAAIpD,MAAM,MAAMqF,IAAI,SAASe,GACxC,MAAO,MAAQA,IACdrE,KAAK,QAIZqB,EAAMd,EAAIE,QAAQ,aAAc,YAGhCQ,YAAYrD,GAAO,CACrB,GAAI8D,GAAS3G,EAAIiJ,MAAM,SACrB,MAAO3C,EAETzD,GAAOrC,KAAKC,UAAU,GAAKT,GACvB6C,EAAKoG,MAAM,iCACbpG,EAAOA,EAAK0G,OAAO,EAAG1G,EAAKzD,OAAS,GACpCyD,EAAO2C,EAAIE,QAAQ7C,EAAM,UAEzBA,EAAOA,EAAKG,QAAQ,KAAM,OACdA,QAAQ,OAAQ,KAChBA,QAAQ,WAAY,KAChCH,EAAO2C,EAAIE,QAAQ7C,EAAM,WAI7B,MAAOA,GAAO,KAAOyD,EAIvB,QAASoC,sBAAqBL,EAAQJ,EAAMC,GAC1C,GAAIsB,GAAc,EACdpK,EAASiJ,EAAOoB,OAAO,SAASC,EAAMC,GAGxC,MAFAH,KACIG,EAAInK,QAAQ,OAAS,GAAGgK,IACrBE,EAAOC,EAAI3G,QAAQ,kBAAmB,IAAI5D,OAAS,GACzD,EAEH,OAAIA,GAAS,GACJ8I,EAAO,IACG,KAATD,EAAc,GAAKA,EAAO,OAC3B,IACAI,EAAOpD,KAAK,SACZ,IACAiD,EAAO,GAGTA,EAAO,GAAKD,EAAO,IAAMI,EAAOpD,KAAK,MAAQ,IAAMiD,EAAO,GAMnE,QAASvG,SAAQiI,GACf,MAAOlI,OAAMC,QAAQiI,GAIvB,QAAS7D,WAAU8D,GACjB,MAAsB,iBAARA,GAIhB,QAAShB,QAAOgB,GACd,MAAe,QAARA,EAIT,QAASC,mBAAkBD,GACzB,MAAc,OAAPA,EAIT,QAASjB,UAASiB,GAChB,MAAsB,gBAARA,GAIhB,QAAS1C,UAAS0C,GAChB,MAAsB,gBAARA,GAIhB,QAASE,UAASF,GAChB,MAAsB,gBAARA,GAIhB,QAAS3D,aAAY2D,GACnB,MAAe,UAARA,EAIT,QAASjC,UAASoC,GAChB,MAAOC,UAASD,IAA8B,oBAAvBE,eAAeF,GAIxC,QAASC,UAASJ,GAChB,MAAsB,gBAARA,IAA4B,OAARA,EAIpC,QAAS9B,QAAOoC,GACd,MAAOF,UAASE,IAA4B,kBAAtBD,eAAeC,GAIvC,QAASzC,SAAQvG,GACf,MAAO8I,UAAS9I,KACW,mBAAtB+I,eAAe/I,IAA2BA,YAAarD,QAI9D,QAASmJ,YAAW4C,GAClB,MAAsB,kBAARA,GAIhB,QAASO,aAAYP,GACnB,MAAe,QAARA,GACe,iBAARA,IACQ,gBAARA,IACQ,gBAARA,IACQ,gBAARA,IACQ,mBAARA,GAMhB,QAASK,gBAAeG,GACtB,MAAO9C,QAAOjI,UAAUwI,SAASrF,KAAK4H,GAIxC,QAASC,KAAInC,GACX,MAAW,IAAJA,EAAS,IAAMA,EAAEL,SAAS,IAAMK,EAAEL,SAAS,IAQpD,QAASyC,aACP,GAAIJ,GAAI,GAAInC,MACRwC,GAAQF,IAAIH,EAAEM,YACNH,IAAIH,EAAEO,cACNJ,IAAIH,EAAEQ,eAAe1F,KAAK,IACtC,QAAQkF,EAAES,UAAWC,OAAOV,EAAEW,YAAaN,GAAMvF,KAAK,KAqCxD,QAAS8D,gBAAezD,EAAKyF,GAC3B,MAAOxD,QAAOjI,UAAUyJ,eAAetG,KAAK6C,EAAKyF,GAnjBnD,GAAIC,cAAe,UACnB3N,SAAQ4N,OAAS,SAASC,GACxB,IAAK/D,SAAS+D,GAAI,CAEhB,IAAK,GADDC,MACKjM,EAAI,EAAGA,EAAI0G,UAAUxG,OAAQF,IACpCiM,EAAQ9L,KAAKgG,QAAQO,UAAU1G,IAEjC,OAAOiM,GAAQlG,KAAK,KAsBtB,IAAK,GAnBD/F,GAAI,EACJoE,EAAOsC,UACPwF,EAAM9H,EAAKlE,OACXkH,EAAM0C,OAAOkC,GAAGlI,QAAQgI,aAAc,SAASK,GACjD,GAAU,OAANA,EAAY,MAAO,GACvB,IAAInM,GAAKkM,EAAK,MAAOC,EACrB,QAAQA,GACN,IAAK,KAAM,MAAOrC,QAAO1F,EAAKpE,KAC9B,KAAK,KAAM,MAAOa,QAAOuD,EAAKpE,KAC9B,KAAK,KACH,IACE,MAAOsB,MAAKC,UAAU6C,EAAKpE,MAC3B,MAAOoM,GACP,MAAO,aAEX,QACE,MAAOD,MAGJA,EAAI/H,EAAKpE,GAAQkM,EAAJlM,EAASmM,EAAI/H,IAAOpE,GAEtCoH,GADEuC,OAAOwC,KAAOpB,SAASoB,GAClB,IAAMA,EAEN,IAAMhG,QAAQgG,EAGzB,OAAO/E,IAOTjJ,QAAQkO,UAAY,SAASvK,EAAIwK,GAa/B,QAASC,KACP,IAAKC,EAAQ,CACX,GAAIC,QAAQC,iBACV,KAAM,IAAI9N,OAAM0N,EACPG,SAAQE,iBACjB3O,QAAQ4O,MAAMN,GAEdtO,QAAQ6G,MAAMyH,GAEhBE,GAAS,EAEX,MAAO1K,GAAG+K,MAAMlO,KAAM+H,WAtBxB,GAAIM,YAAY8F,OAAOL,SACrB,MAAO,YACL,MAAOtO,SAAQkO,UAAUvK,EAAIwK,GAAKO,MAAMlO,KAAM+H,WAIlD,IAAI+F,QAAQM,iBAAkB,EAC5B,MAAOjL,EAGT,IAAI0K,IAAS,CAeb,OAAOD,GAIT,IAAIS,WACAC,YACJ9O,SAAQ+O,SAAW,SAAS/C,GAI1B,GAHInD,YAAYiG,gBACdA,aAAeR,QAAQU,IAAIC,YAAc,IAC3CjD,EAAMA,EAAIkD,eACLL,OAAO7C,GACV,GAAI,GAAIxB,QAAO,MAAQwB,EAAM,MAAO,KAAKmD,KAAKL,cAAe,CAC3D,GAAIM,GAAMd,QAAQc,GAClBP,QAAO7C,GAAO,WACZ,GAAImC,GAAMnO,QAAQ4N,OAAOc,MAAM1O,QAASuI,UACxC1I,SAAQ6G,MAAM,YAAasF,EAAKoD,EAAKjB,QAGvCU,QAAO7C,GAAO,YAGlB,OAAO6C,QAAO7C,IAoChBhM,QAAQgI,QAAUA,QAIlBA,QAAQS,QACN4G,MAAU,EAAG,IACbC,QAAY,EAAG,IACfC,WAAe,EAAG,IAClBC,SAAa,EAAG,IAChBC,OAAW,GAAI,IACfC,MAAU,GAAI,IACdC,OAAW,GAAI,IACfC,MAAU,GAAI,IACdC,MAAU,GAAI,IACdC,OAAW,GAAI,IACfC,SAAa,GAAI,IACjBC,KAAS,GAAI,IACbC,QAAY,GAAI,KAIlBjI,QAAQoB,QACN8G,QAAW,OACXC,OAAU,SACVC,UAAW,SACXC,UAAa,OACbC,OAAQ,OACRC,OAAU,QACVC,KAAQ,UAERC,OAAU,OAkRZzQ,QAAQsE,QAAUA,QAKlBtE,QAAQ0I,UAAYA,UAKpB1I,QAAQwL,OAASA,OAKjBxL,QAAQyM,kBAAoBA,kBAK5BzM,QAAQuL,SAAWA,SAKnBvL,QAAQ8J,SAAWA,SAKnB9J,QAAQ0M,SAAWA,SAKnB1M,QAAQ6I,YAAcA,YAKtB7I,QAAQuK,SAAWA,SAKnBvK,QAAQ4M,SAAWA,SAKnB5M,QAAQ0K,OAASA,OAMjB1K,QAAQqK,QAAUA,QAKlBrK,QAAQ4J,WAAaA,WAUrB5J,QAAQ+M,YAAcA,YAEtB/M,QAAQ0Q,SAAWpR,QAAQ,qBAY3B,IAAIkO,SAAU,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MAAO,MACxD,MAAO,MAAO,MAa5BxN,SAAQF,IAAM,WACZD,QAAQC,IAAI,UAAWoN,YAAalN,QAAQ4N,OAAOc,MAAM1O,QAASuI,aAiBpEvI,QAAQc,SAAWxB,QAAQ,YAE3BU,QAAQ4I,QAAU,SAAS/B,EAAQ8J,GAEjC,IAAKA,IAAQ/D,SAAS+D,GAAM,MAAO9J,EAInC,KAFA,GAAIoD,GAAOC,OAAOD,KAAK0G,GACnB9O,EAAIoI,EAAKlI,OACNF,KACLgF,EAAOoD,EAAKpI,IAAM8O,EAAI1G,EAAKpI,GAE7B,OAAOgF","file":"bundle.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","\"use strict\";\n\nvar roads = require('../../index');\nvar road = new roads.Road(require('./resources/root').many);\n\nroad.request('GET', '/')\n\t.then(function (response) {\n\t\tconsole.log(response);\n\t});","\"use strict\";\n\nmodule.exports.Promise = Promise;\nmodule.exports.Resource = require('./lib/resource');\nmodule.exports.Response = require('./lib/response');\nmodule.exports.Road = require('./lib/road');\n\nmodule.exports.middleware = require('./lib/middleware');\n\nmodule.exports.HttpError = function HttpError(message, code) {\n\tthis.message = message;\n\tthis.code = code;\n\tError.captureStackTrace(this, HttpError);\n};\n\nmodule.exports.HttpError.invalid_request = 400;\nmodule.exports.HttpError.unauthorized = 401;\nmodule.exports.HttpError.not_found = 404;\n\nrequire('util').inherits(module.exports.HttpError, Error);\n","\"use strict\";\n\nvar roads = require('../../../index');\nvar Resource = roads.Resource;\n\n/**\n * [one description]\n * @type {Resource}\n */\nmodule.exports.many = new Resource({\n\tmethods : {\n\t\tGET : function (url, body, headers) {\n\t\t\t// In the real world the body of the response should be created from a template engine.\n\t\t\treturn new this.Response('<!DOCTYPE html>\\\n<html>\\\n<body>\\\n<script src=\"/client.brws.js\"></script>\\\nHello!\\\n</body>\\\n</html>');\n\t\t}\n\t}\n});","\"use strict\";\n\n/**\n* resource.js\n* Copyright(c) 2014 Aaron Hedges <aaron@dashron.com>\n* MIT Licensed\n */\nvar VALID_METHODS = ['GET','HEAD','POST','PUT','DELETE','OPTIONS', 'PATCH'];\nvar roads = require('../index.js');\n\n//TODO: add direct spec references\nvar Resource = module.exports = function Resource (definition) {\n\tthis.routes = definition.resources;\n\tthis.valid_methods = [];\n\tthis._init = definition.init;\n\tthis.context = definition.context;\n\n\tif (definition.methods) {\n\t\tvar method = null;\n\t\tfor (var i = 0, meth_len = VALID_METHODS.length; i < meth_len; i++) {\n\t\t\tmethod = VALID_METHODS[i];\n\n\t\t\tif (definition.methods[method]) {\n\t\t\t\tthis[method] = definition.methods[method];\n\t\t\t\tthis.valid_methods.push(method);\n\t\t\t}\n\t\t}\n\t}\n};\n\n/**\n * [allowedMethod description]\n * @param  {[type]} method [description]\n * @return {[type]}        [description]\n */\nResource.prototype.allowsMethod = function (method) {\n\treturn this.valid_methods.indexOf(method) !== -1;\n};\n\n/**\n * [getValidMethods description]\n * @return {[type]} [description]\n */\nResource.prototype.getValidMethods = function () {\n\treturn this.valid_methods;\n};\n\n/**\n * [getResource description]\n * @param  {[type]} request_url [description]\n * @return {[type]}             [description]\n */\nResource.prototype.getResourceKey = function (request_url) {\n\tif (!request_url) {\n\t\treturn false;\n\t}\n\n\tfor (var url_part in this.routes) {\n\t\tif (request_url === url_part) {\n\t\t\treturn {\n\t\t\t\troute : this.routes[url_part]\n\t\t\t};\n\t\t}\n\n\t\tif (url_part[0] === '#') {\n\t\t\tif (isNaN(Number(request_url))) {\n\t\t\t\tcontinue;\n\t\t\t} else {\n\t\t\t\treturn {\n\t\t\t\t\tkey : url_part.substring(1),\n\t\t\t\t\tvalue : Number(request_url),\n\t\t\t\t\troute : this.routes[url_part]\n\t\t\t\t};\n\t\t\t}\n\t\t\tcontinue;\n\t\t}\n\n\t\tif (url_part[0] === '$') {\n\t\t\treturn {\n\t\t\t\tkey : url_part.substring(1),\n\t\t\t\tvalue : request_url,\n\t\t\t\troute : this.routes[url_part]\n\t\t\t};\n\t\t}\n\t}\n\n\treturn false;\n};\n","\"use strict\";\n\n/**\n* response.js\n* Copyright(c) 2014 Aaron Hedges <aaron@dashron.com>\n* MIT Licensed\n */\n\nvar roads = require('../index.js');\n\nvar Response = module.exports = function Response (body, status, headers) {\n\tthis.body = body;\n\tthis.status = status || 200;\n\tthis.headers = headers || {};\n};\n\n/**\n * Holds all response information\n * @type Object\n */\nResponse.prototype.body = null;\n\n/**\n * All response headers\n * @type Object\n */\nResponse.prototype.headers = null;\n\n/**\n * The HTTP Status code\n * @type number\n */\nResponse.prototype.status = null;\n\n/**\n * Helper function to write this response to the server\n * \n * @param dynamic data\n * @param {[type]} http_response\n * @param boolean end\n */\nResponse.prototype.writeToServer = function(http_response) {\n\tif (typeof this.headers['content-type'] !== \"string\" && typeof this.body === \"object\") {\n\t\tthis.headers['content-type'] = 'application/json';\n\t}\n\n\thttp_response.writeHead(this.status, this.headers);\n\t\n\tif (typeof(this.body) === \"object\") {\n\t\thttp_response.write(JSON.stringify(this.body));\n\t} else {\n\t\thttp_response.write(this.body);\n\t}\n};","\"use strict\";\n\n/**\n* api.js\n* Copyright(c) 2014 Aaron Hedges <aaron@dashron.com>\n* MIT Licensed\n */\n\nvar url_module = require('url');\nvar qs_module = require('querystring');\nvar roads = require('../index');\nvar Bluebird = require('bluebird');\n\n/**\n * Road Constructor\n *\n * Creates your Road object, so you can use it directly or bind it to an [HTTP server](http://nodejs.org/api/http.html#http_http_createserver_requestlistener). \n * \n * @param  {Resource} root_resource Used to generate the response for the root endpoint ( [protocol]://[host]/ ).\n */\nvar Road = module.exports = function Road (root_resource) {\n\tvar _self = this;\n\t// Coroutine creation should happen here or in the resource\n\tthis.root_resource = root_resource;\n\n\t// ensure we have at least one resource to route to\n\tif (!this.root_resource) {\n\t\tthrow new Error('You must configure a root resource before making requests');\n\t}\n\n\tthis._request_chain = [];\n};\n\nRoad.prototype.root_resource = null;\nRoad.prototype._request_chain = null;\n\n/**\n * Use allows you to register functions to be executed before your core route is executed\n *\n * The parameters of the callback are as follows:\n *  method  | string    | The HTTP method that was provided to the request\n *  url     | string    | The url that was provided to the request\n *  body    | object    | The body that was provided to the request, after it was properly parsed into an object\n *  headers | object    | The headers that were provided to the request\n *  next    | function  | The next function in the request chain, or the final route.\n *  \n * @param {Function} fn A callback (function or generator function) that will be executed every time a request is made.\n */\nRoad.prototype.use = function (fn) {\n\tif (!fn) {\n\t\tthrow new Error('You must provide a valid function to the use method');\n\t}\n\t\n\tthis._request_chain.push(fn);\n};\n\n/**\n * Make a request\n *\n * This function will locate the appropriate resource method for the provided parameters, execute it and return a thenable (Promises/A compatible promise, http://wiki.commonjs.org/wiki/Promises/A).\n * On success, you will receive the result of the resource method\n * On failure, you should receive an error. This error might be an HttpError\n * \n * @param  string method\n * @param  string url     \n * @param  string body    \n * @param  array headers \n * @return string\n */\nRoad.prototype.request = function (method, url, body, headers) {\n\tvar next = null;\n\tvar route = null;\n\tvar _self = this;\n\n\tif (typeof method !== \"string\") {\n\t\tthrow new Error('You must provide an HTTP method when making a request');\n\t}\n\n\tif (typeof url !== \"string\") {\n\t\tthrow new Error('You must provide a url when making a request');\n\t}\n\n\t// Create an empty headers object if no value is provided\n\tif (!headers) {\n\t\theaders = {};\n\t}\n\n\ttry {\n\t\turl = url_module.parse(url, true);\n\t\tbody = this._parseBody(body, headers['content-type']);\n\t} catch (e) {\n\t\t// todo: maybe we can make this better, and incorporate it with the _locateRoute method\n\t\treturn new roads.Promise(function (resolve, reject) {\n\t\t\treject(e);\n\t\t});\n\t}\n\n\troute = this._buildRoute(method, url, body, headers);\n\t\n\t// execute the route and ensure the promise resolves to a Response object\n\treturn this._executeRoute(route)\t\t\t\n\t\t.then(function (route_response) {\n\t\t\tif (typeof(route_response) !== \"object\" || !(route_response instanceof roads.Response)) {\n\t\t\t\t// we should always return a response object\n\t\t\t\troute_response = new roads.Response(route_response);\n\t\t\t}\n\n\t\t\treturn route_response;\n\t\t});\n};\n\n/**\n * Translate the request body into a usable object or array\n * \n * @param  mixed  body         \n * @param  string content_type\n * @return mixed  parsed body\n */\nRoad.prototype._parseBody = function (body, content_type) {\n\tif (typeof body === \"object\" || Array.isArray(body) || !body) {\n\t\t// no need to parse if it's already an object\n\t\treturn body;\n\t}\n\n\tif (content_type === 'application/json') {\n\t\t// parse json\n\t\treturn JSON.parse(body);\n\t} else if (content_type === 'application/x-www-form-urlencoded') {\n\t\t// parse form encoded\n\t\treturn qs_module.parse(body);\n\t} else {\n\t\t// maybe it's supposed to be literal \n\t\treturn body;\n\t}\n};\n\n/**\n * Turn an HTTP request into an executable function with a useful request context. Will also incorporate the entire\n * request handler chain\n * \n * @param  object parsed_url\n * @param  string request_method\n * @param  object request_body\n * @param  object request_headers\n * @return function\n */\nRoad.prototype._buildRoute = function (request_method, parsed_url, request_body, request_headers) {\n\tvar _self = this;\n\tvar chain = null;\n\tvar resource = this._locateResource(parsed_url);\n\n\tvar context = {\n\t\trequest : function (method, url, body, headers) {\n\t\t\treturn _self.request(method, url, body, headers);\n\t\t},\n\t\thttp_methods : resource ? resource.getValidMethods() : [],\n\t\tResponse : roads.Response\n\t};\n\n\tif (resource) {\n\t\tcontext.resource_context = resource.context;\n\t}\n\n\treturn _self._buildRequestChainQueue(context, resource, request_method, parsed_url, request_body, request_headers);\n};\n\n/**\n * Builds a single executable function that will initiate the entire request handling chain.\n * \"next\" will be the final parameter of every request in the chain, and the next function will\n * only execute when \"next\" is called.\n * \n * @param  object context The request context\n * @param  Resource resource The request resource\n * @param  string method   The request's HTTP method\n * @param  object url      The request's parsed HTTP url\n * @param  object body     The request's HTTP body\n * @param  object headers  The request's HTTP headers\n * @return function\n */\nRoad.prototype._buildRequestChainQueue = function (context, resource, method, url, body, headers) {\n\tvar progress = 0;\n\tvar _self = this;\n\tvar route = null;\n\n\tvar next = function () {\n\t\tif (_self._request_chain[progress]) {\n\t\t\treturn _self._createCoroutine(_self._request_chain[progress]).call(context, method, url, body, headers, function () {\n\t\t\t\tprogress += 1;\n\t\t\t\treturn _self._executeRoute(next);\n\t\t\t});\n\t\t}\n\n\t\troute = _self._locateRoute(resource, method, url);\n\t\treturn route.call(context, url, body, headers);\n\t};\n\n\treturn next;\n};\n\n/**\n * Find the appropriate route for the requested pathname and method.\n *\n * @param  Resource resource The resource that the parsed_url is mapped to.\n * @param  string parsed_url The requested url to route, after it has gone through url.parse\n * @param  sring method   The requested HTTP method.\n * @return function\n */\nRoad.prototype._locateRoute = function (resource, method, parsed_url) {\n\t// If we could not find the appropriate resource, 404 not found\n\tif (!resource) {\n\t\treturn function () {\n\t\t\t// we throw this so that it lines up with how all errors are handled\n\t\t\tthrow new roads.HttpError(parsed_url.pathname, 404);\n\t\t};\n\t}\n\n\t// If we could not find the appropriate route, 405 Method not allowed\n\tif (!resource[method]) {\n\t\treturn function () {\n\t\t\t// todo: this gives a really bad error message when called directly\n\t\t\t// we throw this so that it lines up with how all errors are handled\n\t\t\tthrow new roads.HttpError(resource.getValidMethods(), 405);\n\t\t};\n\t}\n\n\t// We have to check if the function is a generator or not before we bind it, otherwise the new function doesn't pass our current \"is a generator\" test.\n\treturn this._createCoroutine(resource[method]);\n};\n\n/**\n * Identify if a function is a generator, and if so translate it into a coroutine\n *\n * @todo kill bluebird dependency and use async functions\n * @param  Function fn\n * @return Function\n */\nRoad.prototype._createCoroutine = function (fn) {\n\t// iojs logged GeneratorFunctionPrototype for some reason.....\n\tif (fn.constructor.name === 'GeneratorFunction' || fn.constructor.name === 'GeneratorFunctionPrototype') {\n\t\treturn Bluebird.coroutine(fn);\n\t} else {\n\t\treturn fn;\n\t}\n};\n\n/**\n * Execute a resource method, and ensure that a promise is always returned\n * \n * @param  Function   route\n * @param  string   url\n * @param  Object   body\n * @param  Object   headers\n * @return Promise\n */\nRoad.prototype._executeRoute = function (route) {\n\tvar result = null;\n\n\t// Handle errors properly\n\ttry {\n\t\tresult = route();\n\t} catch (e) {\n\t\t// this should never be reached if route is a coroutine\n\t\treturn new roads.Promise(function (resolve, reject) {\n\t\t\treject(e);\n\t\t});\n\t}\n\n\t// If the result isn't a promise already, make it one\n\tif (!(result instanceof roads.Promise)) {\n\t\treturn Promise.resolve(result);\n\t}\n\n\t// otherwise give the user what they want\n\treturn result;\n};\n\n/**\n * Route the pathname directly to a resource object\n * \n * @param  string pathname\n * @return Resource\n */\nRoad.prototype._locateResource = function (parsed_url) {\n\tvar pathname = parsed_url.pathname.replace(/\\/$/, '');\n\n\t// this will cause issues\n\tvar parts = pathname.split('/');\n\n\t// the uri starts with a forward slash, so we will have an empty string at the start of the array\n\tvar part = parts.shift();\n\n\tvar resource = this.root_resource;\n\tvar resource_info = null;\n\n\t// Define the object that will hold all url arguments\n\tif (!parsed_url.args) {\n\t\tparsed_url.args = {};\n\t}\n\n\t// loop through every part separated by slashes and incrementally check them against the routes\n\twhile (parts.length) {\n\t\tpart = parts.shift();\n\t\tresource_info = resource.getResourceKey(part);\n\n\t\tif (!resource_info) {\n\t\t\treturn null;\n\t\t} else {\n\t\t\tresource = resource_info.route;\n\t\t\t// apply the route parts to the url arguments field\n\t\t\tif (resource_info.key) {\n\t\t\t\tparsed_url.args[resource_info.key] = resource_info.value;\n\t\t\t}\n\t\t}\n\t}\n\t\n\treturn resource;\n};\n\n/**\n * Helper function so the api can be thrown directly into http.createServer\n * \n * @param  IncomingMessage http_request\n * @param  ServerResponse http_response\n */\nRoad.prototype.server = function (http_request, http_response) {\n\tvar api = this;\n\tvar body = '';\n\tvar _self = this;\n\n\thttp_request.on('readable', function () {\n  \t\tvar chunk;\n\t\twhile (null !== (chunk = http_request.read())) {\n\t\t\tbody += chunk;\n\t\t}\n\t});\n\n\tvar writeResponse = function (response) {\n\t\t// wrap up and write the response to the server\n\t\tresponse.writeToServer(http_response);\n\n\t\t// easy curl terminal readout\n\t\tif (http_request.headers['user-agent'] && http_request.headers['user-agent'].indexOf('curl') !== -1) {\n\t\t\thttp_response.write(\"\\n\");\n\t\t}\n\n\t\thttp_response.end();\n\t};\n\n\thttp_request.on('end', function () {\n\t\t// execute the api logic and retrieve the appropriate response object\n\t\tapi.request(http_request.method, http_request.url, body, http_request.headers)\n\t\t\t.then(writeResponse)\n\t\t\t.catch(function (error) {\n\t\t\t\tconsole.log(error);\n\t\t\t\tif (error instanceof roads.HttpError) {\n\t\t\t\t\twriteResponse(new roads.Response({\"error\": error.message}, error.code));\n\t\t\t\t} else {\n\t\t\t\t\twriteResponse(new roads.Response({\"error\" : \"An unknown error has occured\"}, 500));\n\t\t\t\t}\n\t\t\t});\n\t});\n\n\t// server request errors go to the unknown error representation\n\thttp_request.on('error', function (err) {\n\t\tconsole.log(err);\n\t\twriteResponse(new roads.Response({\"error\" : \"An unknown error has occured\"}, 500));\n\t});\n};\n","\"use strict\";\nvar roads = require('../index.js');\n\n/**\n * Any requests with trailing slashes will immediately return a Response object redirecting to a non-trailing-slash path\n */\nmodule.exports.killSlash = function (method, url, body, headers, next) {\n\tvar _self = this;\n\n\t// kill trailing slash as long as we aren't at the root level\n\tif (url.path !== '/' && url.path[url.path.length - 1] === '/') {\n\t\treturn new Promise(function (accept, reject) {\n\t\t\taccept (new _self.Response(null, 302, {\n\t\t\t\tlocation : url.path.substring(0, url.path.length - 1)\n\t\t\t}));\n\t\t});\n\t}\n\n\treturn next();\n};\n\n/**\n * Apply proper cors headers\n */\nmodule.exports.cors = function (allow_origins, allow_headers) {\n\tif (!allow_origins || (allow_origins !== '*' && !Array.isArray(allow_origins))) {\n\t\tthrow new Error('You must define the origins allowed by these cors requests as \"*\" or an array of valid origins');\n\t}\n\n\tallow_headers = allow_headers ? allow_headers : [];\n\n\treturn function (method, uri, body, headers, next) {\n\t\tvar _self = this;\n\t\tvar cors_methods = this.http_methods;\n\t\tvar cors_headers = allow_headers;\n\n\t\tif (this.resource_context && this.resource_context.cors) {\n\t\t\tif (this.resource_context.cors.methods) {\n\t\t\t\tcors_methods = this.resource_context.cors.methods;\n\t\t\t}\n\n\t\t\tif (this.resource_context.cors.headers) {\n\t\t\t\tcors_headers.concat(this.resource_context.cors.headers);\n\t\t\t}\n\t\t}\n\n\t\t// http://www.html5rocks.com/static/images/cors_server_flowchart.png\n\t\tif (headers.origin) {\n\t\t\tif (method === 'OPTIONS') {\n\t\t\t\tif (headers.origin && headers['access-control-request-method']) {\n\t\t\t\t\tvar allowed_origin = locateOrigin(headers.origin, allow_origins, cors_methods);\n\n\t\t\t\t\t// if the requested method is not an allowed cors method, fail\n\t\t\t\t\tif (!allowed_origin || cors_methods.indexOf(headers['access-control-request-method']) === -1) {\n\t\t\t\t\t\treturn new Promise(function (resolve, reject) {\n\t\t\t\t\t\t\treject(new roads.HttpError(cors_methods, 405));\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\n\t\t\t\t\t// todo: find a good way to properly validate 'access-control-request-headers'\n\n\t\t\t\t\treturn new Promise(function (resolve, reject) {\n\t\t\t\t\t\tresolve(new _self.Response(null, 200, {\n\t\t\t\t\t\t\t'Access-Control-Allow-Methods' : _self.http_methods.join(', '),\n\t\t\t\t\t\t\t'Access-Control-Allow-Headers' : cors_headers.join(', '),\n\t\t\t\t\t\t\t'Access-Control-Allow-Origin' : allowed_origin,\n\t\t\t\t\t\t\t'Access-Control-Allow-Credentials' : true\n\t\t\t\t\t\t}));\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn next()\n\t\t.then(function (response) {\n\t\t\tif (!headers.origin) {\n\t\t\t\treturn response;\n\t\t\t}\n\n\t\t\tif (cors_headers.length) {\n\t\t\t\tresponse.headers['Access-Control-Expose-Headers'] = cors_headers.join(', ');\n\t\t\t}\n\n\t\t\tresponse.headers['Access-Control-Allow-Origin'] = locateOrigin(headers.origin, allow_origins, cors_methods);\n\t\t\tresponse.headers['Access-Control-Allow-Credentials'] = true;\n\t\t\treturn response;\n\t\t});\n\t};\n};\n\nfunction locateOrigin(origin, allowed_origins, cors_methods) {\n\tif (allowed_origins === '*') {\n\t\treturn '*';\n\t} else if (Array.isArray(allowed_origins)) {\n\t\tvar i = allowed_origins.indexOf(origin);\n\t\tif (i === -1) {\n\t\t\t// Origin not allowed\n\t\t\treturn false\n\t\t}\n\t\treturn allowed_origins[i];\n\t} else {\n\t\tthrow new Error('Misconfigured CORS middleware. allow_origins must be * or an array');\n\t}\n}","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nvar formatRegExp = /%[sdj%]/g;\nexports.format = function(f) {\n  if (!isString(f)) {\n    var objects = [];\n    for (var i = 0; i < arguments.length; i++) {\n      objects.push(inspect(arguments[i]));\n    }\n    return objects.join(' ');\n  }\n\n  var i = 1;\n  var args = arguments;\n  var len = args.length;\n  var str = String(f).replace(formatRegExp, function(x) {\n    if (x === '%%') return '%';\n    if (i >= len) return x;\n    switch (x) {\n      case '%s': return String(args[i++]);\n      case '%d': return Number(args[i++]);\n      case '%j':\n        try {\n          return JSON.stringify(args[i++]);\n        } catch (_) {\n          return '[Circular]';\n        }\n      default:\n        return x;\n    }\n  });\n  for (var x = args[i]; i < len; x = args[++i]) {\n    if (isNull(x) || !isObject(x)) {\n      str += ' ' + x;\n    } else {\n      str += ' ' + inspect(x);\n    }\n  }\n  return str;\n};\n\n\n// Mark that a method should not be used.\n// Returns a modified function which warns once by default.\n// If --no-deprecation is set, then it is a no-op.\nexports.deprecate = function(fn, msg) {\n  // Allow for deprecating things in the process of starting up.\n  if (isUndefined(global.process)) {\n    return function() {\n      return exports.deprecate(fn, msg).apply(this, arguments);\n    };\n  }\n\n  if (process.noDeprecation === true) {\n    return fn;\n  }\n\n  var warned = false;\n  function deprecated() {\n    if (!warned) {\n      if (process.throwDeprecation) {\n        throw new Error(msg);\n      } else if (process.traceDeprecation) {\n        console.trace(msg);\n      } else {\n        console.error(msg);\n      }\n      warned = true;\n    }\n    return fn.apply(this, arguments);\n  }\n\n  return deprecated;\n};\n\n\nvar debugs = {};\nvar debugEnviron;\nexports.debuglog = function(set) {\n  if (isUndefined(debugEnviron))\n    debugEnviron = process.env.NODE_DEBUG || '';\n  set = set.toUpperCase();\n  if (!debugs[set]) {\n    if (new RegExp('\\\\b' + set + '\\\\b', 'i').test(debugEnviron)) {\n      var pid = process.pid;\n      debugs[set] = function() {\n        var msg = exports.format.apply(exports, arguments);\n        console.error('%s %d: %s', set, pid, msg);\n      };\n    } else {\n      debugs[set] = function() {};\n    }\n  }\n  return debugs[set];\n};\n\n\n/**\n * Echos the value of a value. Trys to print the value out\n * in the best way possible given the different types.\n *\n * @param {Object} obj The object to print out.\n * @param {Object} opts Optional options object that alters the output.\n */\n/* legacy: obj, showHidden, depth, colors*/\nfunction inspect(obj, opts) {\n  // default options\n  var ctx = {\n    seen: [],\n    stylize: stylizeNoColor\n  };\n  // legacy...\n  if (arguments.length >= 3) ctx.depth = arguments[2];\n  if (arguments.length >= 4) ctx.colors = arguments[3];\n  if (isBoolean(opts)) {\n    // legacy...\n    ctx.showHidden = opts;\n  } else if (opts) {\n    // got an \"options\" object\n    exports._extend(ctx, opts);\n  }\n  // set default options\n  if (isUndefined(ctx.showHidden)) ctx.showHidden = false;\n  if (isUndefined(ctx.depth)) ctx.depth = 2;\n  if (isUndefined(ctx.colors)) ctx.colors = false;\n  if (isUndefined(ctx.customInspect)) ctx.customInspect = true;\n  if (ctx.colors) ctx.stylize = stylizeWithColor;\n  return formatValue(ctx, obj, ctx.depth);\n}\nexports.inspect = inspect;\n\n\n// http://en.wikipedia.org/wiki/ANSI_escape_code#graphics\ninspect.colors = {\n  'bold' : [1, 22],\n  'italic' : [3, 23],\n  'underline' : [4, 24],\n  'inverse' : [7, 27],\n  'white' : [37, 39],\n  'grey' : [90, 39],\n  'black' : [30, 39],\n  'blue' : [34, 39],\n  'cyan' : [36, 39],\n  'green' : [32, 39],\n  'magenta' : [35, 39],\n  'red' : [31, 39],\n  'yellow' : [33, 39]\n};\n\n// Don't use 'blue' not visible on cmd.exe\ninspect.styles = {\n  'special': 'cyan',\n  'number': 'yellow',\n  'boolean': 'yellow',\n  'undefined': 'grey',\n  'null': 'bold',\n  'string': 'green',\n  'date': 'magenta',\n  // \"name\": intentionally not styling\n  'regexp': 'red'\n};\n\n\nfunction stylizeWithColor(str, styleType) {\n  var style = inspect.styles[styleType];\n\n  if (style) {\n    return '\\u001b[' + inspect.colors[style][0] + 'm' + str +\n           '\\u001b[' + inspect.colors[style][1] + 'm';\n  } else {\n    return str;\n  }\n}\n\n\nfunction stylizeNoColor(str, styleType) {\n  return str;\n}\n\n\nfunction arrayToHash(array) {\n  var hash = {};\n\n  array.forEach(function(val, idx) {\n    hash[val] = true;\n  });\n\n  return hash;\n}\n\n\nfunction formatValue(ctx, value, recurseTimes) {\n  // Provide a hook for user-specified inspect functions.\n  // Check that value is an object with an inspect function on it\n  if (ctx.customInspect &&\n      value &&\n      isFunction(value.inspect) &&\n      // Filter out the util module, it's inspect function is special\n      value.inspect !== exports.inspect &&\n      // Also filter out any prototype objects using the circular check.\n      !(value.constructor && value.constructor.prototype === value)) {\n    var ret = value.inspect(recurseTimes, ctx);\n    if (!isString(ret)) {\n      ret = formatValue(ctx, ret, recurseTimes);\n    }\n    return ret;\n  }\n\n  // Primitive types cannot have properties\n  var primitive = formatPrimitive(ctx, value);\n  if (primitive) {\n    return primitive;\n  }\n\n  // Look up the keys of the object.\n  var keys = Object.keys(value);\n  var visibleKeys = arrayToHash(keys);\n\n  if (ctx.showHidden) {\n    keys = Object.getOwnPropertyNames(value);\n  }\n\n  // IE doesn't make error fields non-enumerable\n  // http://msdn.microsoft.com/en-us/library/ie/dww52sbt(v=vs.94).aspx\n  if (isError(value)\n      && (keys.indexOf('message') >= 0 || keys.indexOf('description') >= 0)) {\n    return formatError(value);\n  }\n\n  // Some type of object without properties can be shortcutted.\n  if (keys.length === 0) {\n    if (isFunction(value)) {\n      var name = value.name ? ': ' + value.name : '';\n      return ctx.stylize('[Function' + name + ']', 'special');\n    }\n    if (isRegExp(value)) {\n      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');\n    }\n    if (isDate(value)) {\n      return ctx.stylize(Date.prototype.toString.call(value), 'date');\n    }\n    if (isError(value)) {\n      return formatError(value);\n    }\n  }\n\n  var base = '', array = false, braces = ['{', '}'];\n\n  // Make Array say that they are Array\n  if (isArray(value)) {\n    array = true;\n    braces = ['[', ']'];\n  }\n\n  // Make functions say that they are functions\n  if (isFunction(value)) {\n    var n = value.name ? ': ' + value.name : '';\n    base = ' [Function' + n + ']';\n  }\n\n  // Make RegExps say that they are RegExps\n  if (isRegExp(value)) {\n    base = ' ' + RegExp.prototype.toString.call(value);\n  }\n\n  // Make dates with properties first say the date\n  if (isDate(value)) {\n    base = ' ' + Date.prototype.toUTCString.call(value);\n  }\n\n  // Make error with message first say the error\n  if (isError(value)) {\n    base = ' ' + formatError(value);\n  }\n\n  if (keys.length === 0 && (!array || value.length == 0)) {\n    return braces[0] + base + braces[1];\n  }\n\n  if (recurseTimes < 0) {\n    if (isRegExp(value)) {\n      return ctx.stylize(RegExp.prototype.toString.call(value), 'regexp');\n    } else {\n      return ctx.stylize('[Object]', 'special');\n    }\n  }\n\n  ctx.seen.push(value);\n\n  var output;\n  if (array) {\n    output = formatArray(ctx, value, recurseTimes, visibleKeys, keys);\n  } else {\n    output = keys.map(function(key) {\n      return formatProperty(ctx, value, recurseTimes, visibleKeys, key, array);\n    });\n  }\n\n  ctx.seen.pop();\n\n  return reduceToSingleString(output, base, braces);\n}\n\n\nfunction formatPrimitive(ctx, value) {\n  if (isUndefined(value))\n    return ctx.stylize('undefined', 'undefined');\n  if (isString(value)) {\n    var simple = '\\'' + JSON.stringify(value).replace(/^\"|\"$/g, '')\n                                             .replace(/'/g, \"\\\\'\")\n                                             .replace(/\\\\\"/g, '\"') + '\\'';\n    return ctx.stylize(simple, 'string');\n  }\n  if (isNumber(value))\n    return ctx.stylize('' + value, 'number');\n  if (isBoolean(value))\n    return ctx.stylize('' + value, 'boolean');\n  // For some reason typeof null is \"object\", so special case here.\n  if (isNull(value))\n    return ctx.stylize('null', 'null');\n}\n\n\nfunction formatError(value) {\n  return '[' + Error.prototype.toString.call(value) + ']';\n}\n\n\nfunction formatArray(ctx, value, recurseTimes, visibleKeys, keys) {\n  var output = [];\n  for (var i = 0, l = value.length; i < l; ++i) {\n    if (hasOwnProperty(value, String(i))) {\n      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,\n          String(i), true));\n    } else {\n      output.push('');\n    }\n  }\n  keys.forEach(function(key) {\n    if (!key.match(/^\\d+$/)) {\n      output.push(formatProperty(ctx, value, recurseTimes, visibleKeys,\n          key, true));\n    }\n  });\n  return output;\n}\n\n\nfunction formatProperty(ctx, value, recurseTimes, visibleKeys, key, array) {\n  var name, str, desc;\n  desc = Object.getOwnPropertyDescriptor(value, key) || { value: value[key] };\n  if (desc.get) {\n    if (desc.set) {\n      str = ctx.stylize('[Getter/Setter]', 'special');\n    } else {\n      str = ctx.stylize('[Getter]', 'special');\n    }\n  } else {\n    if (desc.set) {\n      str = ctx.stylize('[Setter]', 'special');\n    }\n  }\n  if (!hasOwnProperty(visibleKeys, key)) {\n    name = '[' + key + ']';\n  }\n  if (!str) {\n    if (ctx.seen.indexOf(desc.value) < 0) {\n      if (isNull(recurseTimes)) {\n        str = formatValue(ctx, desc.value, null);\n      } else {\n        str = formatValue(ctx, desc.value, recurseTimes - 1);\n      }\n      if (str.indexOf('\\n') > -1) {\n        if (array) {\n          str = str.split('\\n').map(function(line) {\n            return '  ' + line;\n          }).join('\\n').substr(2);\n        } else {\n          str = '\\n' + str.split('\\n').map(function(line) {\n            return '   ' + line;\n          }).join('\\n');\n        }\n      }\n    } else {\n      str = ctx.stylize('[Circular]', 'special');\n    }\n  }\n  if (isUndefined(name)) {\n    if (array && key.match(/^\\d+$/)) {\n      return str;\n    }\n    name = JSON.stringify('' + key);\n    if (name.match(/^\"([a-zA-Z_][a-zA-Z_0-9]*)\"$/)) {\n      name = name.substr(1, name.length - 2);\n      name = ctx.stylize(name, 'name');\n    } else {\n      name = name.replace(/'/g, \"\\\\'\")\n                 .replace(/\\\\\"/g, '\"')\n                 .replace(/(^\"|\"$)/g, \"'\");\n      name = ctx.stylize(name, 'string');\n    }\n  }\n\n  return name + ': ' + str;\n}\n\n\nfunction reduceToSingleString(output, base, braces) {\n  var numLinesEst = 0;\n  var length = output.reduce(function(prev, cur) {\n    numLinesEst++;\n    if (cur.indexOf('\\n') >= 0) numLinesEst++;\n    return prev + cur.replace(/\\u001b\\[\\d\\d?m/g, '').length + 1;\n  }, 0);\n\n  if (length > 60) {\n    return braces[0] +\n           (base === '' ? '' : base + '\\n ') +\n           ' ' +\n           output.join(',\\n  ') +\n           ' ' +\n           braces[1];\n  }\n\n  return braces[0] + base + ' ' + output.join(', ') + ' ' + braces[1];\n}\n\n\n// NOTE: These type checking functions intentionally don't use `instanceof`\n// because it is fragile and can be easily faked with `Object.create()`.\nfunction isArray(ar) {\n  return Array.isArray(ar);\n}\nexports.isArray = isArray;\n\nfunction isBoolean(arg) {\n  return typeof arg === 'boolean';\n}\nexports.isBoolean = isBoolean;\n\nfunction isNull(arg) {\n  return arg === null;\n}\nexports.isNull = isNull;\n\nfunction isNullOrUndefined(arg) {\n  return arg == null;\n}\nexports.isNullOrUndefined = isNullOrUndefined;\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\nexports.isNumber = isNumber;\n\nfunction isString(arg) {\n  return typeof arg === 'string';\n}\nexports.isString = isString;\n\nfunction isSymbol(arg) {\n  return typeof arg === 'symbol';\n}\nexports.isSymbol = isSymbol;\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\nexports.isUndefined = isUndefined;\n\nfunction isRegExp(re) {\n  return isObject(re) && objectToString(re) === '[object RegExp]';\n}\nexports.isRegExp = isRegExp;\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\nexports.isObject = isObject;\n\nfunction isDate(d) {\n  return isObject(d) && objectToString(d) === '[object Date]';\n}\nexports.isDate = isDate;\n\nfunction isError(e) {\n  return isObject(e) &&\n      (objectToString(e) === '[object Error]' || e instanceof Error);\n}\nexports.isError = isError;\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\nexports.isFunction = isFunction;\n\nfunction isPrimitive(arg) {\n  return arg === null ||\n         typeof arg === 'boolean' ||\n         typeof arg === 'number' ||\n         typeof arg === 'string' ||\n         typeof arg === 'symbol' ||  // ES6 symbol\n         typeof arg === 'undefined';\n}\nexports.isPrimitive = isPrimitive;\n\nexports.isBuffer = require('./support/isBuffer');\n\nfunction objectToString(o) {\n  return Object.prototype.toString.call(o);\n}\n\n\nfunction pad(n) {\n  return n < 10 ? '0' + n.toString(10) : n.toString(10);\n}\n\n\nvar months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep',\n              'Oct', 'Nov', 'Dec'];\n\n// 26 Feb 16:19:34\nfunction timestamp() {\n  var d = new Date();\n  var time = [pad(d.getHours()),\n              pad(d.getMinutes()),\n              pad(d.getSeconds())].join(':');\n  return [d.getDate(), months[d.getMonth()], time].join(' ');\n}\n\n\n// log is just a thin wrapper to console.log that prepends a timestamp\nexports.log = function() {\n  console.log('%s - %s', timestamp(), exports.format.apply(exports, arguments));\n};\n\n\n/**\n * Inherit the prototype methods from one constructor into another.\n *\n * The Function.prototype.inherits from lang.js rewritten as a standalone\n * function (not on Function.prototype). NOTE: If this file is to be loaded\n * during bootstrapping this function needs to be rewritten using some native\n * functions as prototype setup using normal JavaScript does not work as\n * expected during bootstrapping (see mirror.js in r114903).\n *\n * @param {function} ctor Constructor function which needs to inherit the\n *     prototype.\n * @param {function} superCtor Constructor function to inherit prototype from.\n */\nexports.inherits = require('inherits');\n\nexports._extend = function(origin, add) {\n  // Don't do anything if add isn't an object\n  if (!add || !isObject(add)) return origin;\n\n  var keys = Object.keys(add);\n  var i = keys.length;\n  while (i--) {\n    origin[keys[i]] = add[keys[i]];\n  }\n  return origin;\n};\n\nfunction hasOwnProperty(obj, prop) {\n  return Object.prototype.hasOwnProperty.call(obj, prop);\n}\n","module.exports = function isBuffer(arg) {\n  return arg && typeof arg === 'object'\n    && typeof arg.copy === 'function'\n    && typeof arg.fill === 'function'\n    && typeof arg.readUInt8 === 'function';\n}","'use strict';\n\nexports.decode = exports.parse = require('./decode');\nexports.encode = exports.stringify = require('./encode');\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nvar punycode = require('punycode');\n\nexports.parse = urlParse;\nexports.resolve = urlResolve;\nexports.resolveObject = urlResolveObject;\nexports.format = urlFormat;\n\nexports.Url = Url;\n\nfunction Url() {\n  this.protocol = null;\n  this.slashes = null;\n  this.auth = null;\n  this.host = null;\n  this.port = null;\n  this.hostname = null;\n  this.hash = null;\n  this.search = null;\n  this.query = null;\n  this.pathname = null;\n  this.path = null;\n  this.href = null;\n}\n\n// Reference: RFC 3986, RFC 1808, RFC 2396\n\n// define these here so at least they only have to be\n// compiled once on the first module load.\nvar protocolPattern = /^([a-z0-9.+-]+:)/i,\n    portPattern = /:[0-9]*$/,\n\n    // RFC 2396: characters reserved for delimiting URLs.\n    // We actually just auto-escape these.\n    delims = ['<', '>', '\"', '`', ' ', '\\r', '\\n', '\\t'],\n\n    // RFC 2396: characters not allowed for various reasons.\n    unwise = ['{', '}', '|', '\\\\', '^', '`'].concat(delims),\n\n    // Allowed by RFCs, but cause of XSS attacks.  Always escape these.\n    autoEscape = ['\\''].concat(unwise),\n    // Characters that are never ever allowed in a hostname.\n    // Note that any invalid chars are also handled, but these\n    // are the ones that are *expected* to be seen, so we fast-path\n    // them.\n    nonHostChars = ['%', '/', '?', ';', '#'].concat(autoEscape),\n    hostEndingChars = ['/', '?', '#'],\n    hostnameMaxLen = 255,\n    hostnamePartPattern = /^[a-z0-9A-Z_-]{0,63}$/,\n    hostnamePartStart = /^([a-z0-9A-Z_-]{0,63})(.*)$/,\n    // protocols that can allow \"unsafe\" and \"unwise\" chars.\n    unsafeProtocol = {\n      'javascript': true,\n      'javascript:': true\n    },\n    // protocols that never have a hostname.\n    hostlessProtocol = {\n      'javascript': true,\n      'javascript:': true\n    },\n    // protocols that always contain a // bit.\n    slashedProtocol = {\n      'http': true,\n      'https': true,\n      'ftp': true,\n      'gopher': true,\n      'file': true,\n      'http:': true,\n      'https:': true,\n      'ftp:': true,\n      'gopher:': true,\n      'file:': true\n    },\n    querystring = require('querystring');\n\nfunction urlParse(url, parseQueryString, slashesDenoteHost) {\n  if (url && isObject(url) && url instanceof Url) return url;\n\n  var u = new Url;\n  u.parse(url, parseQueryString, slashesDenoteHost);\n  return u;\n}\n\nUrl.prototype.parse = function(url, parseQueryString, slashesDenoteHost) {\n  if (!isString(url)) {\n    throw new TypeError(\"Parameter 'url' must be a string, not \" + typeof url);\n  }\n\n  var rest = url;\n\n  // trim before proceeding.\n  // This is to support parse stuff like \"  http://foo.com  \\n\"\n  rest = rest.trim();\n\n  var proto = protocolPattern.exec(rest);\n  if (proto) {\n    proto = proto[0];\n    var lowerProto = proto.toLowerCase();\n    this.protocol = lowerProto;\n    rest = rest.substr(proto.length);\n  }\n\n  // figure out if it's got a host\n  // user@server is *always* interpreted as a hostname, and url\n  // resolution will treat //foo/bar as host=foo,path=bar because that's\n  // how the browser resolves relative URLs.\n  if (slashesDenoteHost || proto || rest.match(/^\\/\\/[^@\\/]+@[^@\\/]+/)) {\n    var slashes = rest.substr(0, 2) === '//';\n    if (slashes && !(proto && hostlessProtocol[proto])) {\n      rest = rest.substr(2);\n      this.slashes = true;\n    }\n  }\n\n  if (!hostlessProtocol[proto] &&\n      (slashes || (proto && !slashedProtocol[proto]))) {\n\n    // there's a hostname.\n    // the first instance of /, ?, ;, or # ends the host.\n    //\n    // If there is an @ in the hostname, then non-host chars *are* allowed\n    // to the left of the last @ sign, unless some host-ending character\n    // comes *before* the @-sign.\n    // URLs are obnoxious.\n    //\n    // ex:\n    // http://a@b@c/ => user:a@b host:c\n    // http://a@b?@c => user:a host:c path:/?@c\n\n    // v0.12 TODO(isaacs): This is not quite how Chrome does things.\n    // Review our test case against browsers more comprehensively.\n\n    // find the first instance of any hostEndingChars\n    var hostEnd = -1;\n    for (var i = 0; i < hostEndingChars.length; i++) {\n      var hec = rest.indexOf(hostEndingChars[i]);\n      if (hec !== -1 && (hostEnd === -1 || hec < hostEnd))\n        hostEnd = hec;\n    }\n\n    // at this point, either we have an explicit point where the\n    // auth portion cannot go past, or the last @ char is the decider.\n    var auth, atSign;\n    if (hostEnd === -1) {\n      // atSign can be anywhere.\n      atSign = rest.lastIndexOf('@');\n    } else {\n      // atSign must be in auth portion.\n      // http://a@b/c@d => host:b auth:a path:/c@d\n      atSign = rest.lastIndexOf('@', hostEnd);\n    }\n\n    // Now we have a portion which is definitely the auth.\n    // Pull that off.\n    if (atSign !== -1) {\n      auth = rest.slice(0, atSign);\n      rest = rest.slice(atSign + 1);\n      this.auth = decodeURIComponent(auth);\n    }\n\n    // the host is the remaining to the left of the first non-host char\n    hostEnd = -1;\n    for (var i = 0; i < nonHostChars.length; i++) {\n      var hec = rest.indexOf(nonHostChars[i]);\n      if (hec !== -1 && (hostEnd === -1 || hec < hostEnd))\n        hostEnd = hec;\n    }\n    // if we still have not hit it, then the entire thing is a host.\n    if (hostEnd === -1)\n      hostEnd = rest.length;\n\n    this.host = rest.slice(0, hostEnd);\n    rest = rest.slice(hostEnd);\n\n    // pull out port.\n    this.parseHost();\n\n    // we've indicated that there is a hostname,\n    // so even if it's empty, it has to be present.\n    this.hostname = this.hostname || '';\n\n    // if hostname begins with [ and ends with ]\n    // assume that it's an IPv6 address.\n    var ipv6Hostname = this.hostname[0] === '[' &&\n        this.hostname[this.hostname.length - 1] === ']';\n\n    // validate a little.\n    if (!ipv6Hostname) {\n      var hostparts = this.hostname.split(/\\./);\n      for (var i = 0, l = hostparts.length; i < l; i++) {\n        var part = hostparts[i];\n        if (!part) continue;\n        if (!part.match(hostnamePartPattern)) {\n          var newpart = '';\n          for (var j = 0, k = part.length; j < k; j++) {\n            if (part.charCodeAt(j) > 127) {\n              // we replace non-ASCII char with a temporary placeholder\n              // we need this to make sure size of hostname is not\n              // broken by replacing non-ASCII by nothing\n              newpart += 'x';\n            } else {\n              newpart += part[j];\n            }\n          }\n          // we test again with ASCII char only\n          if (!newpart.match(hostnamePartPattern)) {\n            var validParts = hostparts.slice(0, i);\n            var notHost = hostparts.slice(i + 1);\n            var bit = part.match(hostnamePartStart);\n            if (bit) {\n              validParts.push(bit[1]);\n              notHost.unshift(bit[2]);\n            }\n            if (notHost.length) {\n              rest = '/' + notHost.join('.') + rest;\n            }\n            this.hostname = validParts.join('.');\n            break;\n          }\n        }\n      }\n    }\n\n    if (this.hostname.length > hostnameMaxLen) {\n      this.hostname = '';\n    } else {\n      // hostnames are always lower case.\n      this.hostname = this.hostname.toLowerCase();\n    }\n\n    if (!ipv6Hostname) {\n      // IDNA Support: Returns a puny coded representation of \"domain\".\n      // It only converts the part of the domain name that\n      // has non ASCII characters. I.e. it dosent matter if\n      // you call it with a domain that already is in ASCII.\n      var domainArray = this.hostname.split('.');\n      var newOut = [];\n      for (var i = 0; i < domainArray.length; ++i) {\n        var s = domainArray[i];\n        newOut.push(s.match(/[^A-Za-z0-9_-]/) ?\n            'xn--' + punycode.encode(s) : s);\n      }\n      this.hostname = newOut.join('.');\n    }\n\n    var p = this.port ? ':' + this.port : '';\n    var h = this.hostname || '';\n    this.host = h + p;\n    this.href += this.host;\n\n    // strip [ and ] from the hostname\n    // the host field still retains them, though\n    if (ipv6Hostname) {\n      this.hostname = this.hostname.substr(1, this.hostname.length - 2);\n      if (rest[0] !== '/') {\n        rest = '/' + rest;\n      }\n    }\n  }\n\n  // now rest is set to the post-host stuff.\n  // chop off any delim chars.\n  if (!unsafeProtocol[lowerProto]) {\n\n    // First, make 100% sure that any \"autoEscape\" chars get\n    // escaped, even if encodeURIComponent doesn't think they\n    // need to be.\n    for (var i = 0, l = autoEscape.length; i < l; i++) {\n      var ae = autoEscape[i];\n      var esc = encodeURIComponent(ae);\n      if (esc === ae) {\n        esc = escape(ae);\n      }\n      rest = rest.split(ae).join(esc);\n    }\n  }\n\n\n  // chop off from the tail first.\n  var hash = rest.indexOf('#');\n  if (hash !== -1) {\n    // got a fragment string.\n    this.hash = rest.substr(hash);\n    rest = rest.slice(0, hash);\n  }\n  var qm = rest.indexOf('?');\n  if (qm !== -1) {\n    this.search = rest.substr(qm);\n    this.query = rest.substr(qm + 1);\n    if (parseQueryString) {\n      this.query = querystring.parse(this.query);\n    }\n    rest = rest.slice(0, qm);\n  } else if (parseQueryString) {\n    // no query string, but parseQueryString still requested\n    this.search = '';\n    this.query = {};\n  }\n  if (rest) this.pathname = rest;\n  if (slashedProtocol[lowerProto] &&\n      this.hostname && !this.pathname) {\n    this.pathname = '/';\n  }\n\n  //to support http.request\n  if (this.pathname || this.search) {\n    var p = this.pathname || '';\n    var s = this.search || '';\n    this.path = p + s;\n  }\n\n  // finally, reconstruct the href based on what has been validated.\n  this.href = this.format();\n  return this;\n};\n\n// format a parsed object into a url string\nfunction urlFormat(obj) {\n  // ensure it's an object, and not a string url.\n  // If it's an obj, this is a no-op.\n  // this way, you can call url_format() on strings\n  // to clean up potentially wonky urls.\n  if (isString(obj)) obj = urlParse(obj);\n  if (!(obj instanceof Url)) return Url.prototype.format.call(obj);\n  return obj.format();\n}\n\nUrl.prototype.format = function() {\n  var auth = this.auth || '';\n  if (auth) {\n    auth = encodeURIComponent(auth);\n    auth = auth.replace(/%3A/i, ':');\n    auth += '@';\n  }\n\n  var protocol = this.protocol || '',\n      pathname = this.pathname || '',\n      hash = this.hash || '',\n      host = false,\n      query = '';\n\n  if (this.host) {\n    host = auth + this.host;\n  } else if (this.hostname) {\n    host = auth + (this.hostname.indexOf(':') === -1 ?\n        this.hostname :\n        '[' + this.hostname + ']');\n    if (this.port) {\n      host += ':' + this.port;\n    }\n  }\n\n  if (this.query &&\n      isObject(this.query) &&\n      Object.keys(this.query).length) {\n    query = querystring.stringify(this.query);\n  }\n\n  var search = this.search || (query && ('?' + query)) || '';\n\n  if (protocol && protocol.substr(-1) !== ':') protocol += ':';\n\n  // only the slashedProtocols get the //.  Not mailto:, xmpp:, etc.\n  // unless they had them to begin with.\n  if (this.slashes ||\n      (!protocol || slashedProtocol[protocol]) && host !== false) {\n    host = '//' + (host || '');\n    if (pathname && pathname.charAt(0) !== '/') pathname = '/' + pathname;\n  } else if (!host) {\n    host = '';\n  }\n\n  if (hash && hash.charAt(0) !== '#') hash = '#' + hash;\n  if (search && search.charAt(0) !== '?') search = '?' + search;\n\n  pathname = pathname.replace(/[?#]/g, function(match) {\n    return encodeURIComponent(match);\n  });\n  search = search.replace('#', '%23');\n\n  return protocol + host + pathname + search + hash;\n};\n\nfunction urlResolve(source, relative) {\n  return urlParse(source, false, true).resolve(relative);\n}\n\nUrl.prototype.resolve = function(relative) {\n  return this.resolveObject(urlParse(relative, false, true)).format();\n};\n\nfunction urlResolveObject(source, relative) {\n  if (!source) return relative;\n  return urlParse(source, false, true).resolveObject(relative);\n}\n\nUrl.prototype.resolveObject = function(relative) {\n  if (isString(relative)) {\n    var rel = new Url();\n    rel.parse(relative, false, true);\n    relative = rel;\n  }\n\n  var result = new Url();\n  Object.keys(this).forEach(function(k) {\n    result[k] = this[k];\n  }, this);\n\n  // hash is always overridden, no matter what.\n  // even href=\"\" will remove it.\n  result.hash = relative.hash;\n\n  // if the relative url is empty, then there's nothing left to do here.\n  if (relative.href === '') {\n    result.href = result.format();\n    return result;\n  }\n\n  // hrefs like //foo/bar always cut to the protocol.\n  if (relative.slashes && !relative.protocol) {\n    // take everything except the protocol from relative\n    Object.keys(relative).forEach(function(k) {\n      if (k !== 'protocol')\n        result[k] = relative[k];\n    });\n\n    //urlParse appends trailing / to urls like http://www.example.com\n    if (slashedProtocol[result.protocol] &&\n        result.hostname && !result.pathname) {\n      result.path = result.pathname = '/';\n    }\n\n    result.href = result.format();\n    return result;\n  }\n\n  if (relative.protocol && relative.protocol !== result.protocol) {\n    // if it's a known url protocol, then changing\n    // the protocol does weird things\n    // first, if it's not file:, then we MUST have a host,\n    // and if there was a path\n    // to begin with, then we MUST have a path.\n    // if it is file:, then the host is dropped,\n    // because that's known to be hostless.\n    // anything else is assumed to be absolute.\n    if (!slashedProtocol[relative.protocol]) {\n      Object.keys(relative).forEach(function(k) {\n        result[k] = relative[k];\n      });\n      result.href = result.format();\n      return result;\n    }\n\n    result.protocol = relative.protocol;\n    if (!relative.host && !hostlessProtocol[relative.protocol]) {\n      var relPath = (relative.pathname || '').split('/');\n      while (relPath.length && !(relative.host = relPath.shift()));\n      if (!relative.host) relative.host = '';\n      if (!relative.hostname) relative.hostname = '';\n      if (relPath[0] !== '') relPath.unshift('');\n      if (relPath.length < 2) relPath.unshift('');\n      result.pathname = relPath.join('/');\n    } else {\n      result.pathname = relative.pathname;\n    }\n    result.search = relative.search;\n    result.query = relative.query;\n    result.host = relative.host || '';\n    result.auth = relative.auth;\n    result.hostname = relative.hostname || relative.host;\n    result.port = relative.port;\n    // to support http.request\n    if (result.pathname || result.search) {\n      var p = result.pathname || '';\n      var s = result.search || '';\n      result.path = p + s;\n    }\n    result.slashes = result.slashes || relative.slashes;\n    result.href = result.format();\n    return result;\n  }\n\n  var isSourceAbs = (result.pathname && result.pathname.charAt(0) === '/'),\n      isRelAbs = (\n          relative.host ||\n          relative.pathname && relative.pathname.charAt(0) === '/'\n      ),\n      mustEndAbs = (isRelAbs || isSourceAbs ||\n                    (result.host && relative.pathname)),\n      removeAllDots = mustEndAbs,\n      srcPath = result.pathname && result.pathname.split('/') || [],\n      relPath = relative.pathname && relative.pathname.split('/') || [],\n      psychotic = result.protocol && !slashedProtocol[result.protocol];\n\n  // if the url is a non-slashed url, then relative\n  // links like ../.. should be able\n  // to crawl up to the hostname, as well.  This is strange.\n  // result.protocol has already been set by now.\n  // Later on, put the first path part into the host field.\n  if (psychotic) {\n    result.hostname = '';\n    result.port = null;\n    if (result.host) {\n      if (srcPath[0] === '') srcPath[0] = result.host;\n      else srcPath.unshift(result.host);\n    }\n    result.host = '';\n    if (relative.protocol) {\n      relative.hostname = null;\n      relative.port = null;\n      if (relative.host) {\n        if (relPath[0] === '') relPath[0] = relative.host;\n        else relPath.unshift(relative.host);\n      }\n      relative.host = null;\n    }\n    mustEndAbs = mustEndAbs && (relPath[0] === '' || srcPath[0] === '');\n  }\n\n  if (isRelAbs) {\n    // it's absolute.\n    result.host = (relative.host || relative.host === '') ?\n                  relative.host : result.host;\n    result.hostname = (relative.hostname || relative.hostname === '') ?\n                      relative.hostname : result.hostname;\n    result.search = relative.search;\n    result.query = relative.query;\n    srcPath = relPath;\n    // fall through to the dot-handling below.\n  } else if (relPath.length) {\n    // it's relative\n    // throw away the existing file, and take the new path instead.\n    if (!srcPath) srcPath = [];\n    srcPath.pop();\n    srcPath = srcPath.concat(relPath);\n    result.search = relative.search;\n    result.query = relative.query;\n  } else if (!isNullOrUndefined(relative.search)) {\n    // just pull out the search.\n    // like href='?foo'.\n    // Put this after the other two cases because it simplifies the booleans\n    if (psychotic) {\n      result.hostname = result.host = srcPath.shift();\n      //occationaly the auth can get stuck only in host\n      //this especialy happens in cases like\n      //url.resolveObject('mailto:local1@domain1', 'local2@domain2')\n      var authInHost = result.host && result.host.indexOf('@') > 0 ?\n                       result.host.split('@') : false;\n      if (authInHost) {\n        result.auth = authInHost.shift();\n        result.host = result.hostname = authInHost.shift();\n      }\n    }\n    result.search = relative.search;\n    result.query = relative.query;\n    //to support http.request\n    if (!isNull(result.pathname) || !isNull(result.search)) {\n      result.path = (result.pathname ? result.pathname : '') +\n                    (result.search ? result.search : '');\n    }\n    result.href = result.format();\n    return result;\n  }\n\n  if (!srcPath.length) {\n    // no path at all.  easy.\n    // we've already handled the other stuff above.\n    result.pathname = null;\n    //to support http.request\n    if (result.search) {\n      result.path = '/' + result.search;\n    } else {\n      result.path = null;\n    }\n    result.href = result.format();\n    return result;\n  }\n\n  // if a url ENDs in . or .., then it must get a trailing slash.\n  // however, if it ends in anything else non-slashy,\n  // then it must NOT get a trailing slash.\n  var last = srcPath.slice(-1)[0];\n  var hasTrailingSlash = (\n      (result.host || relative.host) && (last === '.' || last === '..') ||\n      last === '');\n\n  // strip single dots, resolve double dots to parent dir\n  // if the path tries to go above the root, `up` ends up > 0\n  var up = 0;\n  for (var i = srcPath.length; i >= 0; i--) {\n    last = srcPath[i];\n    if (last == '.') {\n      srcPath.splice(i, 1);\n    } else if (last === '..') {\n      srcPath.splice(i, 1);\n      up++;\n    } else if (up) {\n      srcPath.splice(i, 1);\n      up--;\n    }\n  }\n\n  // if the path is allowed to go above the root, restore leading ..s\n  if (!mustEndAbs && !removeAllDots) {\n    for (; up--; up) {\n      srcPath.unshift('..');\n    }\n  }\n\n  if (mustEndAbs && srcPath[0] !== '' &&\n      (!srcPath[0] || srcPath[0].charAt(0) !== '/')) {\n    srcPath.unshift('');\n  }\n\n  if (hasTrailingSlash && (srcPath.join('/').substr(-1) !== '/')) {\n    srcPath.push('');\n  }\n\n  var isAbsolute = srcPath[0] === '' ||\n      (srcPath[0] && srcPath[0].charAt(0) === '/');\n\n  // put the host back\n  if (psychotic) {\n    result.hostname = result.host = isAbsolute ? '' :\n                                    srcPath.length ? srcPath.shift() : '';\n    //occationaly the auth can get stuck only in host\n    //this especialy happens in cases like\n    //url.resolveObject('mailto:local1@domain1', 'local2@domain2')\n    var authInHost = result.host && result.host.indexOf('@') > 0 ?\n                     result.host.split('@') : false;\n    if (authInHost) {\n      result.auth = authInHost.shift();\n      result.host = result.hostname = authInHost.shift();\n    }\n  }\n\n  mustEndAbs = mustEndAbs || (result.host && srcPath.length);\n\n  if (mustEndAbs && !isAbsolute) {\n    srcPath.unshift('');\n  }\n\n  if (!srcPath.length) {\n    result.pathname = null;\n    result.path = null;\n  } else {\n    result.pathname = srcPath.join('/');\n  }\n\n  //to support request.http\n  if (!isNull(result.pathname) || !isNull(result.search)) {\n    result.path = (result.pathname ? result.pathname : '') +\n                  (result.search ? result.search : '');\n  }\n  result.auth = relative.auth || result.auth;\n  result.slashes = result.slashes || relative.slashes;\n  result.href = result.format();\n  return result;\n};\n\nUrl.prototype.parseHost = function() {\n  var host = this.host;\n  var port = portPattern.exec(host);\n  if (port) {\n    port = port[0];\n    if (port !== ':') {\n      this.port = port.substr(1);\n    }\n    host = host.substr(0, host.length - port.length);\n  }\n  if (host) this.hostname = host;\n};\n\nfunction isString(arg) {\n  return typeof arg === \"string\";\n}\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\n\nfunction isNull(arg) {\n  return arg === null;\n}\nfunction isNullOrUndefined(arg) {\n  return  arg == null;\n}\n","// shim for using process in browser\n\nvar process = module.exports = {};\n\nprocess.nextTick = (function () {\n    var canSetImmediate = typeof window !== 'undefined'\n    && window.setImmediate;\n    var canMutationObserver = typeof window !== 'undefined'\n    && window.MutationObserver;\n    var canPost = typeof window !== 'undefined'\n    && window.postMessage && window.addEventListener\n    ;\n\n    if (canSetImmediate) {\n        return function (f) { return window.setImmediate(f) };\n    }\n\n    var queue = [];\n\n    if (canMutationObserver) {\n        var hiddenDiv = document.createElement(\"div\");\n        var observer = new MutationObserver(function () {\n            var queueList = queue.slice();\n            queue.length = 0;\n            queueList.forEach(function (fn) {\n                fn();\n            });\n        });\n\n        observer.observe(hiddenDiv, { attributes: true });\n\n        return function nextTick(fn) {\n            if (!queue.length) {\n                hiddenDiv.setAttribute('yes', 'no');\n            }\n            queue.push(fn);\n        };\n    }\n\n    if (canPost) {\n        window.addEventListener('message', function (ev) {\n            var source = ev.source;\n            if ((source === window || source === null) && ev.data === 'process-tick') {\n                ev.stopPropagation();\n                if (queue.length > 0) {\n                    var fn = queue.shift();\n                    fn();\n                }\n            }\n        }, true);\n\n        return function nextTick(fn) {\n            queue.push(fn);\n            window.postMessage('process-tick', '*');\n        };\n    }\n\n    return function nextTick(fn) {\n        setTimeout(fn, 0);\n    };\n})();\n\nprocess.title = 'browser';\nprocess.browser = true;\nprocess.env = {};\nprocess.argv = [];\n\nfunction noop() {}\n\nprocess.on = noop;\nprocess.addListener = noop;\nprocess.once = noop;\nprocess.off = noop;\nprocess.removeListener = noop;\nprocess.removeAllListeners = noop;\nprocess.emit = noop;\n\nprocess.binding = function (name) {\n    throw new Error('process.binding is not supported');\n};\n\n// TODO(shtylman)\nprocess.cwd = function () { return '/' };\nprocess.chdir = function (dir) {\n    throw new Error('process.chdir is not supported');\n};\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\n// If obj.hasOwnProperty has been overridden, then calling\n// obj.hasOwnProperty(prop) will break.\n// See: https://github.com/joyent/node/issues/1707\nfunction hasOwnProperty(obj, prop) {\n  return Object.prototype.hasOwnProperty.call(obj, prop);\n}\n\nmodule.exports = function(qs, sep, eq, options) {\n  sep = sep || '&';\n  eq = eq || '=';\n  var obj = {};\n\n  if (typeof qs !== 'string' || qs.length === 0) {\n    return obj;\n  }\n\n  var regexp = /\\+/g;\n  qs = qs.split(sep);\n\n  var maxKeys = 1000;\n  if (options && typeof options.maxKeys === 'number') {\n    maxKeys = options.maxKeys;\n  }\n\n  var len = qs.length;\n  // maxKeys <= 0 means that we should not limit keys count\n  if (maxKeys > 0 && len > maxKeys) {\n    len = maxKeys;\n  }\n\n  for (var i = 0; i < len; ++i) {\n    var x = qs[i].replace(regexp, '%20'),\n        idx = x.indexOf(eq),\n        kstr, vstr, k, v;\n\n    if (idx >= 0) {\n      kstr = x.substr(0, idx);\n      vstr = x.substr(idx + 1);\n    } else {\n      kstr = x;\n      vstr = '';\n    }\n\n    k = decodeURIComponent(kstr);\n    v = decodeURIComponent(vstr);\n\n    if (!hasOwnProperty(obj, k)) {\n      obj[k] = v;\n    } else if (isArray(obj[k])) {\n      obj[k].push(v);\n    } else {\n      obj[k] = [obj[k], v];\n    }\n  }\n\n  return obj;\n};\n\nvar isArray = Array.isArray || function (xs) {\n  return Object.prototype.toString.call(xs) === '[object Array]';\n};\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar stringifyPrimitive = function(v) {\n  switch (typeof v) {\n    case 'string':\n      return v;\n\n    case 'boolean':\n      return v ? 'true' : 'false';\n\n    case 'number':\n      return isFinite(v) ? v : '';\n\n    default:\n      return '';\n  }\n};\n\nmodule.exports = function(obj, sep, eq, name) {\n  sep = sep || '&';\n  eq = eq || '=';\n  if (obj === null) {\n    obj = undefined;\n  }\n\n  if (typeof obj === 'object') {\n    return map(objectKeys(obj), function(k) {\n      var ks = encodeURIComponent(stringifyPrimitive(k)) + eq;\n      if (isArray(obj[k])) {\n        return map(obj[k], function(v) {\n          return ks + encodeURIComponent(stringifyPrimitive(v));\n        }).join(sep);\n      } else {\n        return ks + encodeURIComponent(stringifyPrimitive(obj[k]));\n      }\n    }).join(sep);\n\n  }\n\n  if (!name) return '';\n  return encodeURIComponent(stringifyPrimitive(name)) + eq +\n         encodeURIComponent(stringifyPrimitive(obj));\n};\n\nvar isArray = Array.isArray || function (xs) {\n  return Object.prototype.toString.call(xs) === '[object Array]';\n};\n\nfunction map (xs, f) {\n  if (xs.map) return xs.map(f);\n  var res = [];\n  for (var i = 0; i < xs.length; i++) {\n    res.push(f(xs[i], i));\n  }\n  return res;\n}\n\nvar objectKeys = Object.keys || function (obj) {\n  var res = [];\n  for (var key in obj) {\n    if (Object.prototype.hasOwnProperty.call(obj, key)) res.push(key);\n  }\n  return res;\n};\n","/*! http://mths.be/punycode v1.2.4 by @mathias */\n;(function(root) {\n\n\t/** Detect free variables */\n\tvar freeExports = typeof exports == 'object' && exports;\n\tvar freeModule = typeof module == 'object' && module &&\n\t\tmodule.exports == freeExports && module;\n\tvar freeGlobal = typeof global == 'object' && global;\n\tif (freeGlobal.global === freeGlobal || freeGlobal.window === freeGlobal) {\n\t\troot = freeGlobal;\n\t}\n\n\t/**\n\t * The `punycode` object.\n\t * @name punycode\n\t * @type Object\n\t */\n\tvar punycode,\n\n\t/** Highest positive signed 32-bit float value */\n\tmaxInt = 2147483647, // aka. 0x7FFFFFFF or 2^31-1\n\n\t/** Bootstring parameters */\n\tbase = 36,\n\ttMin = 1,\n\ttMax = 26,\n\tskew = 38,\n\tdamp = 700,\n\tinitialBias = 72,\n\tinitialN = 128, // 0x80\n\tdelimiter = '-', // '\\x2D'\n\n\t/** Regular expressions */\n\tregexPunycode = /^xn--/,\n\tregexNonASCII = /[^ -~]/, // unprintable ASCII chars + non-ASCII chars\n\tregexSeparators = /\\x2E|\\u3002|\\uFF0E|\\uFF61/g, // RFC 3490 separators\n\n\t/** Error messages */\n\terrors = {\n\t\t'overflow': 'Overflow: input needs wider integers to process',\n\t\t'not-basic': 'Illegal input >= 0x80 (not a basic code point)',\n\t\t'invalid-input': 'Invalid input'\n\t},\n\n\t/** Convenience shortcuts */\n\tbaseMinusTMin = base - tMin,\n\tfloor = Math.floor,\n\tstringFromCharCode = String.fromCharCode,\n\n\t/** Temporary variable */\n\tkey;\n\n\t/*--------------------------------------------------------------------------*/\n\n\t/**\n\t * A generic error utility function.\n\t * @private\n\t * @param {String} type The error type.\n\t * @returns {Error} Throws a `RangeError` with the applicable error message.\n\t */\n\tfunction error(type) {\n\t\tthrow RangeError(errors[type]);\n\t}\n\n\t/**\n\t * A generic `Array#map` utility function.\n\t * @private\n\t * @param {Array} array The array to iterate over.\n\t * @param {Function} callback The function that gets called for every array\n\t * item.\n\t * @returns {Array} A new array of values returned by the callback function.\n\t */\n\tfunction map(array, fn) {\n\t\tvar length = array.length;\n\t\twhile (length--) {\n\t\t\tarray[length] = fn(array[length]);\n\t\t}\n\t\treturn array;\n\t}\n\n\t/**\n\t * A simple `Array#map`-like wrapper to work with domain name strings.\n\t * @private\n\t * @param {String} domain The domain name.\n\t * @param {Function} callback The function that gets called for every\n\t * character.\n\t * @returns {Array} A new string of characters returned by the callback\n\t * function.\n\t */\n\tfunction mapDomain(string, fn) {\n\t\treturn map(string.split(regexSeparators), fn).join('.');\n\t}\n\n\t/**\n\t * Creates an array containing the numeric code points of each Unicode\n\t * character in the string. While JavaScript uses UCS-2 internally,\n\t * this function will convert a pair of surrogate halves (each of which\n\t * UCS-2 exposes as separate characters) into a single code point,\n\t * matching UTF-16.\n\t * @see `punycode.ucs2.encode`\n\t * @see <http://mathiasbynens.be/notes/javascript-encoding>\n\t * @memberOf punycode.ucs2\n\t * @name decode\n\t * @param {String} string The Unicode input string (UCS-2).\n\t * @returns {Array} The new array of code points.\n\t */\n\tfunction ucs2decode(string) {\n\t\tvar output = [],\n\t\t    counter = 0,\n\t\t    length = string.length,\n\t\t    value,\n\t\t    extra;\n\t\twhile (counter < length) {\n\t\t\tvalue = string.charCodeAt(counter++);\n\t\t\tif (value >= 0xD800 && value <= 0xDBFF && counter < length) {\n\t\t\t\t// high surrogate, and there is a next character\n\t\t\t\textra = string.charCodeAt(counter++);\n\t\t\t\tif ((extra & 0xFC00) == 0xDC00) { // low surrogate\n\t\t\t\t\toutput.push(((value & 0x3FF) << 10) + (extra & 0x3FF) + 0x10000);\n\t\t\t\t} else {\n\t\t\t\t\t// unmatched surrogate; only append this code unit, in case the next\n\t\t\t\t\t// code unit is the high surrogate of a surrogate pair\n\t\t\t\t\toutput.push(value);\n\t\t\t\t\tcounter--;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\toutput.push(value);\n\t\t\t}\n\t\t}\n\t\treturn output;\n\t}\n\n\t/**\n\t * Creates a string based on an array of numeric code points.\n\t * @see `punycode.ucs2.decode`\n\t * @memberOf punycode.ucs2\n\t * @name encode\n\t * @param {Array} codePoints The array of numeric code points.\n\t * @returns {String} The new Unicode string (UCS-2).\n\t */\n\tfunction ucs2encode(array) {\n\t\treturn map(array, function(value) {\n\t\t\tvar output = '';\n\t\t\tif (value > 0xFFFF) {\n\t\t\t\tvalue -= 0x10000;\n\t\t\t\toutput += stringFromCharCode(value >>> 10 & 0x3FF | 0xD800);\n\t\t\t\tvalue = 0xDC00 | value & 0x3FF;\n\t\t\t}\n\t\t\toutput += stringFromCharCode(value);\n\t\t\treturn output;\n\t\t}).join('');\n\t}\n\n\t/**\n\t * Converts a basic code point into a digit/integer.\n\t * @see `digitToBasic()`\n\t * @private\n\t * @param {Number} codePoint The basic numeric code point value.\n\t * @returns {Number} The numeric value of a basic code point (for use in\n\t * representing integers) in the range `0` to `base - 1`, or `base` if\n\t * the code point does not represent a value.\n\t */\n\tfunction basicToDigit(codePoint) {\n\t\tif (codePoint - 48 < 10) {\n\t\t\treturn codePoint - 22;\n\t\t}\n\t\tif (codePoint - 65 < 26) {\n\t\t\treturn codePoint - 65;\n\t\t}\n\t\tif (codePoint - 97 < 26) {\n\t\t\treturn codePoint - 97;\n\t\t}\n\t\treturn base;\n\t}\n\n\t/**\n\t * Converts a digit/integer into a basic code point.\n\t * @see `basicToDigit()`\n\t * @private\n\t * @param {Number} digit The numeric value of a basic code point.\n\t * @returns {Number} The basic code point whose value (when used for\n\t * representing integers) is `digit`, which needs to be in the range\n\t * `0` to `base - 1`. If `flag` is non-zero, the uppercase form is\n\t * used; else, the lowercase form is used. The behavior is undefined\n\t * if `flag` is non-zero and `digit` has no uppercase form.\n\t */\n\tfunction digitToBasic(digit, flag) {\n\t\t//  0..25 map to ASCII a..z or A..Z\n\t\t// 26..35 map to ASCII 0..9\n\t\treturn digit + 22 + 75 * (digit < 26) - ((flag != 0) << 5);\n\t}\n\n\t/**\n\t * Bias adaptation function as per section 3.4 of RFC 3492.\n\t * http://tools.ietf.org/html/rfc3492#section-3.4\n\t * @private\n\t */\n\tfunction adapt(delta, numPoints, firstTime) {\n\t\tvar k = 0;\n\t\tdelta = firstTime ? floor(delta / damp) : delta >> 1;\n\t\tdelta += floor(delta / numPoints);\n\t\tfor (/* no initialization */; delta > baseMinusTMin * tMax >> 1; k += base) {\n\t\t\tdelta = floor(delta / baseMinusTMin);\n\t\t}\n\t\treturn floor(k + (baseMinusTMin + 1) * delta / (delta + skew));\n\t}\n\n\t/**\n\t * Converts a Punycode string of ASCII-only symbols to a string of Unicode\n\t * symbols.\n\t * @memberOf punycode\n\t * @param {String} input The Punycode string of ASCII-only symbols.\n\t * @returns {String} The resulting string of Unicode symbols.\n\t */\n\tfunction decode(input) {\n\t\t// Don't use UCS-2\n\t\tvar output = [],\n\t\t    inputLength = input.length,\n\t\t    out,\n\t\t    i = 0,\n\t\t    n = initialN,\n\t\t    bias = initialBias,\n\t\t    basic,\n\t\t    j,\n\t\t    index,\n\t\t    oldi,\n\t\t    w,\n\t\t    k,\n\t\t    digit,\n\t\t    t,\n\t\t    /** Cached calculation results */\n\t\t    baseMinusT;\n\n\t\t// Handle the basic code points: let `basic` be the number of input code\n\t\t// points before the last delimiter, or `0` if there is none, then copy\n\t\t// the first basic code points to the output.\n\n\t\tbasic = input.lastIndexOf(delimiter);\n\t\tif (basic < 0) {\n\t\t\tbasic = 0;\n\t\t}\n\n\t\tfor (j = 0; j < basic; ++j) {\n\t\t\t// if it's not a basic code point\n\t\t\tif (input.charCodeAt(j) >= 0x80) {\n\t\t\t\terror('not-basic');\n\t\t\t}\n\t\t\toutput.push(input.charCodeAt(j));\n\t\t}\n\n\t\t// Main decoding loop: start just after the last delimiter if any basic code\n\t\t// points were copied; start at the beginning otherwise.\n\n\t\tfor (index = basic > 0 ? basic + 1 : 0; index < inputLength; /* no final expression */) {\n\n\t\t\t// `index` is the index of the next character to be consumed.\n\t\t\t// Decode a generalized variable-length integer into `delta`,\n\t\t\t// which gets added to `i`. The overflow checking is easier\n\t\t\t// if we increase `i` as we go, then subtract off its starting\n\t\t\t// value at the end to obtain `delta`.\n\t\t\tfor (oldi = i, w = 1, k = base; /* no condition */; k += base) {\n\n\t\t\t\tif (index >= inputLength) {\n\t\t\t\t\terror('invalid-input');\n\t\t\t\t}\n\n\t\t\t\tdigit = basicToDigit(input.charCodeAt(index++));\n\n\t\t\t\tif (digit >= base || digit > floor((maxInt - i) / w)) {\n\t\t\t\t\terror('overflow');\n\t\t\t\t}\n\n\t\t\t\ti += digit * w;\n\t\t\t\tt = k <= bias ? tMin : (k >= bias + tMax ? tMax : k - bias);\n\n\t\t\t\tif (digit < t) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tbaseMinusT = base - t;\n\t\t\t\tif (w > floor(maxInt / baseMinusT)) {\n\t\t\t\t\terror('overflow');\n\t\t\t\t}\n\n\t\t\t\tw *= baseMinusT;\n\n\t\t\t}\n\n\t\t\tout = output.length + 1;\n\t\t\tbias = adapt(i - oldi, out, oldi == 0);\n\n\t\t\t// `i` was supposed to wrap around from `out` to `0`,\n\t\t\t// incrementing `n` each time, so we'll fix that now:\n\t\t\tif (floor(i / out) > maxInt - n) {\n\t\t\t\terror('overflow');\n\t\t\t}\n\n\t\t\tn += floor(i / out);\n\t\t\ti %= out;\n\n\t\t\t// Insert `n` at position `i` of the output\n\t\t\toutput.splice(i++, 0, n);\n\n\t\t}\n\n\t\treturn ucs2encode(output);\n\t}\n\n\t/**\n\t * Converts a string of Unicode symbols to a Punycode string of ASCII-only\n\t * symbols.\n\t * @memberOf punycode\n\t * @param {String} input The string of Unicode symbols.\n\t * @returns {String} The resulting Punycode string of ASCII-only symbols.\n\t */\n\tfunction encode(input) {\n\t\tvar n,\n\t\t    delta,\n\t\t    handledCPCount,\n\t\t    basicLength,\n\t\t    bias,\n\t\t    j,\n\t\t    m,\n\t\t    q,\n\t\t    k,\n\t\t    t,\n\t\t    currentValue,\n\t\t    output = [],\n\t\t    /** `inputLength` will hold the number of code points in `input`. */\n\t\t    inputLength,\n\t\t    /** Cached calculation results */\n\t\t    handledCPCountPlusOne,\n\t\t    baseMinusT,\n\t\t    qMinusT;\n\n\t\t// Convert the input in UCS-2 to Unicode\n\t\tinput = ucs2decode(input);\n\n\t\t// Cache the length\n\t\tinputLength = input.length;\n\n\t\t// Initialize the state\n\t\tn = initialN;\n\t\tdelta = 0;\n\t\tbias = initialBias;\n\n\t\t// Handle the basic code points\n\t\tfor (j = 0; j < inputLength; ++j) {\n\t\t\tcurrentValue = input[j];\n\t\t\tif (currentValue < 0x80) {\n\t\t\t\toutput.push(stringFromCharCode(currentValue));\n\t\t\t}\n\t\t}\n\n\t\thandledCPCount = basicLength = output.length;\n\n\t\t// `handledCPCount` is the number of code points that have been handled;\n\t\t// `basicLength` is the number of basic code points.\n\n\t\t// Finish the basic string - if it is not empty - with a delimiter\n\t\tif (basicLength) {\n\t\t\toutput.push(delimiter);\n\t\t}\n\n\t\t// Main encoding loop:\n\t\twhile (handledCPCount < inputLength) {\n\n\t\t\t// All non-basic code points < n have been handled already. Find the next\n\t\t\t// larger one:\n\t\t\tfor (m = maxInt, j = 0; j < inputLength; ++j) {\n\t\t\t\tcurrentValue = input[j];\n\t\t\t\tif (currentValue >= n && currentValue < m) {\n\t\t\t\t\tm = currentValue;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Increase `delta` enough to advance the decoder's <n,i> state to <m,0>,\n\t\t\t// but guard against overflow\n\t\t\thandledCPCountPlusOne = handledCPCount + 1;\n\t\t\tif (m - n > floor((maxInt - delta) / handledCPCountPlusOne)) {\n\t\t\t\terror('overflow');\n\t\t\t}\n\n\t\t\tdelta += (m - n) * handledCPCountPlusOne;\n\t\t\tn = m;\n\n\t\t\tfor (j = 0; j < inputLength; ++j) {\n\t\t\t\tcurrentValue = input[j];\n\n\t\t\t\tif (currentValue < n && ++delta > maxInt) {\n\t\t\t\t\terror('overflow');\n\t\t\t\t}\n\n\t\t\t\tif (currentValue == n) {\n\t\t\t\t\t// Represent delta as a generalized variable-length integer\n\t\t\t\t\tfor (q = delta, k = base; /* no condition */; k += base) {\n\t\t\t\t\t\tt = k <= bias ? tMin : (k >= bias + tMax ? tMax : k - bias);\n\t\t\t\t\t\tif (q < t) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tqMinusT = q - t;\n\t\t\t\t\t\tbaseMinusT = base - t;\n\t\t\t\t\t\toutput.push(\n\t\t\t\t\t\t\tstringFromCharCode(digitToBasic(t + qMinusT % baseMinusT, 0))\n\t\t\t\t\t\t);\n\t\t\t\t\t\tq = floor(qMinusT / baseMinusT);\n\t\t\t\t\t}\n\n\t\t\t\t\toutput.push(stringFromCharCode(digitToBasic(q, 0)));\n\t\t\t\t\tbias = adapt(delta, handledCPCountPlusOne, handledCPCount == basicLength);\n\t\t\t\t\tdelta = 0;\n\t\t\t\t\t++handledCPCount;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t++delta;\n\t\t\t++n;\n\n\t\t}\n\t\treturn output.join('');\n\t}\n\n\t/**\n\t * Converts a Punycode string representing a domain name to Unicode. Only the\n\t * Punycoded parts of the domain name will be converted, i.e. it doesn't\n\t * matter if you call it on a string that has already been converted to\n\t * Unicode.\n\t * @memberOf punycode\n\t * @param {String} domain The Punycode domain name to convert to Unicode.\n\t * @returns {String} The Unicode representation of the given Punycode\n\t * string.\n\t */\n\tfunction toUnicode(domain) {\n\t\treturn mapDomain(domain, function(string) {\n\t\t\treturn regexPunycode.test(string)\n\t\t\t\t? decode(string.slice(4).toLowerCase())\n\t\t\t\t: string;\n\t\t});\n\t}\n\n\t/**\n\t * Converts a Unicode string representing a domain name to Punycode. Only the\n\t * non-ASCII parts of the domain name will be converted, i.e. it doesn't\n\t * matter if you call it with a domain that's already in ASCII.\n\t * @memberOf punycode\n\t * @param {String} domain The domain name to convert, as a Unicode string.\n\t * @returns {String} The Punycode representation of the given domain name.\n\t */\n\tfunction toASCII(domain) {\n\t\treturn mapDomain(domain, function(string) {\n\t\t\treturn regexNonASCII.test(string)\n\t\t\t\t? 'xn--' + encode(string)\n\t\t\t\t: string;\n\t\t});\n\t}\n\n\t/*--------------------------------------------------------------------------*/\n\n\t/** Define the public API */\n\tpunycode = {\n\t\t/**\n\t\t * A string representing the current Punycode.js version number.\n\t\t * @memberOf punycode\n\t\t * @type String\n\t\t */\n\t\t'version': '1.2.4',\n\t\t/**\n\t\t * An object of methods to convert from JavaScript's internal character\n\t\t * representation (UCS-2) to Unicode code points, and back.\n\t\t * @see <http://mathiasbynens.be/notes/javascript-encoding>\n\t\t * @memberOf punycode\n\t\t * @type Object\n\t\t */\n\t\t'ucs2': {\n\t\t\t'decode': ucs2decode,\n\t\t\t'encode': ucs2encode\n\t\t},\n\t\t'decode': decode,\n\t\t'encode': encode,\n\t\t'toASCII': toASCII,\n\t\t'toUnicode': toUnicode\n\t};\n\n\t/** Expose `punycode` */\n\t// Some AMD build optimizers, like r.js, check for specific condition patterns\n\t// like the following:\n\tif (\n\t\ttypeof define == 'function' &&\n\t\ttypeof define.amd == 'object' &&\n\t\tdefine.amd\n\t) {\n\t\tdefine('punycode', function() {\n\t\t\treturn punycode;\n\t\t});\n\t} else if (freeExports && !freeExports.nodeType) {\n\t\tif (freeModule) { // in Node.js or RingoJS v0.8.0+\n\t\t\tfreeModule.exports = punycode;\n\t\t} else { // in Narwhal or RingoJS v0.7.0-\n\t\t\tfor (key in punycode) {\n\t\t\t\tpunycode.hasOwnProperty(key) && (freeExports[key] = punycode[key]);\n\t\t\t}\n\t\t}\n\t} else { // in Rhino or a web browser\n\t\troot.punycode = punycode;\n\t}\n\n}(this));\n","/* @preserve\n * The MIT License (MIT)\n * \n * Copyright (c) 2014 Petka Antonov\n * \n * Permission is hereby granted, free of charge, to any person obtaining a copy\n * of this software and associated documentation files (the \"Software\"), to deal\n * in the Software without restriction, including without limitation the rights\n * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n * copies of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:</p>\n * \n * The above copyright notice and this permission notice shall be included in\n * all copies or substantial portions of the Software.\n * \n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT.  IN NO EVENT SHALL THE\n * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n * THE SOFTWARE.\n * \n */\n/**\n * bluebird build version 2.9.21\n * Features enabled: core, race, call_get, generators, map, nodeify, promisify, props, reduce, settle, some, cancel, using, filter, any, each, timers\n*/\n!function(e){if(\"object\"==typeof exports&&\"undefined\"!=typeof module)module.exports=e();else if(\"function\"==typeof define&&define.amd)define([],e);else{var f;\"undefined\"!=typeof window?f=window:\"undefined\"!=typeof global?f=global:\"undefined\"!=typeof self&&(f=self),f.Promise=e()}}(function(){var define,module,exports;return (function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof _dereq_==\"function\"&&_dereq_;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof _dereq_==\"function\"&&_dereq_;for(var o=0;o<r.length;o++)s(r[o]);return s})({1:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise) {\nvar SomePromiseArray = Promise._SomePromiseArray;\nfunction any(promises) {\n    var ret = new SomePromiseArray(promises);\n    var promise = ret.promise();\n    ret.setHowMany(1);\n    ret.setUnwrap();\n    ret.init();\n    return promise;\n}\n\nPromise.any = function (promises) {\n    return any(promises);\n};\n\nPromise.prototype.any = function () {\n    return any(this);\n};\n\n};\n\n},{}],2:[function(_dereq_,module,exports){\n\"use strict\";\nvar firstLineError;\ntry {throw new Error(); } catch (e) {firstLineError = e;}\nvar schedule = _dereq_(\"./schedule.js\");\nvar Queue = _dereq_(\"./queue.js\");\nvar _process = typeof process !== \"undefined\" ? process : undefined;\nvar util = _dereq_(\"./util.js\");\n\nfunction Async() {\n    this._isTickUsed = false;\n    this._lateQueue = new Queue(16);\n    this._normalQueue = new Queue(16);\n    this._trampolineEnabled = true;\n    var self = this;\n    this.drainQueues = function () {\n        self._drainQueues();\n    };\n    this._schedule =\n        schedule.isStatic ? schedule(this.drainQueues) : schedule;\n}\n\nAsync.prototype.disableTrampolineIfNecessary = function() {\n    if (util.hasDevTools) {\n        this._trampolineEnabled = false;\n    }\n};\n\nAsync.prototype.enableTrampoline = function() {\n    if (!this._trampolineEnabled) {\n        this._trampolineEnabled = true;\n        this._schedule = function(fn) {\n            setTimeout(fn, 0);\n        };\n    }\n};\n\nAsync.prototype.haveItemsQueued = function () {\n    return this._normalQueue.length() > 0;\n};\n\nAsync.prototype._withDomain = function(fn) {\n    if (_process !== undefined &&\n        _process.domain != null &&\n        !fn.domain) {\n        fn = _process.domain.bind(fn);\n    }\n    return fn;\n};\n\nAsync.prototype.throwLater = function(fn, arg) {\n    if (arguments.length === 1) {\n        arg = fn;\n        fn = function () { throw arg; };\n    }\n    fn = this._withDomain(fn);\n    if (typeof setTimeout !== \"undefined\") {\n        setTimeout(function() {\n            fn(arg);\n        }, 0);\n    } else try {\n        this._schedule(function() {\n            fn(arg);\n        });\n    } catch (e) {\n        throw new Error(\"No async scheduler available\\u000a\\u000a    See http://goo.gl/m3OTXk\\u000a\");\n    }\n};\n\nfunction AsyncInvokeLater(fn, receiver, arg) {\n    fn = this._withDomain(fn);\n    this._lateQueue.push(fn, receiver, arg);\n    this._queueTick();\n}\n\nfunction AsyncInvoke(fn, receiver, arg) {\n    fn = this._withDomain(fn);\n    this._normalQueue.push(fn, receiver, arg);\n    this._queueTick();\n}\n\nfunction AsyncSettlePromises(promise) {\n    this._normalQueue._pushOne(promise);\n    this._queueTick();\n}\n\nif (!util.hasDevTools) {\n    Async.prototype.invokeLater = AsyncInvokeLater;\n    Async.prototype.invoke = AsyncInvoke;\n    Async.prototype.settlePromises = AsyncSettlePromises;\n} else {\n    Async.prototype.invokeLater = function (fn, receiver, arg) {\n        if (this._trampolineEnabled) {\n            AsyncInvokeLater.call(this, fn, receiver, arg);\n        } else {\n            setTimeout(function() {\n                fn.call(receiver, arg);\n            }, 100);\n        }\n    };\n\n    Async.prototype.invoke = function (fn, receiver, arg) {\n        if (this._trampolineEnabled) {\n            AsyncInvoke.call(this, fn, receiver, arg);\n        } else {\n            setTimeout(function() {\n                fn.call(receiver, arg);\n            }, 0);\n        }\n    };\n\n    Async.prototype.settlePromises = function(promise) {\n        if (this._trampolineEnabled) {\n            AsyncSettlePromises.call(this, promise);\n        } else {\n            setTimeout(function() {\n                promise._settlePromises();\n            }, 0);\n        }\n    };\n}\n\nAsync.prototype.invokeFirst = function (fn, receiver, arg) {\n    fn = this._withDomain(fn);\n    this._normalQueue.unshift(fn, receiver, arg);\n    this._queueTick();\n};\n\nAsync.prototype._drainQueue = function(queue) {\n    while (queue.length() > 0) {\n        var fn = queue.shift();\n        if (typeof fn !== \"function\") {\n            fn._settlePromises();\n            continue;\n        }\n        var receiver = queue.shift();\n        var arg = queue.shift();\n        fn.call(receiver, arg);\n    }\n};\n\nAsync.prototype._drainQueues = function () {\n    this._drainQueue(this._normalQueue);\n    this._reset();\n    this._drainQueue(this._lateQueue);\n};\n\nAsync.prototype._queueTick = function () {\n    if (!this._isTickUsed) {\n        this._isTickUsed = true;\n        this._schedule(this.drainQueues);\n    }\n};\n\nAsync.prototype._reset = function () {\n    this._isTickUsed = false;\n};\n\nmodule.exports = new Async();\nmodule.exports.firstLineError = firstLineError;\n\n},{\"./queue.js\":28,\"./schedule.js\":31,\"./util.js\":38}],3:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise, INTERNAL, tryConvertToPromise) {\nvar rejectThis = function(_, e) {\n    this._reject(e);\n};\n\nvar targetRejected = function(e, context) {\n    context.promiseRejectionQueued = true;\n    context.bindingPromise._then(rejectThis, rejectThis, null, this, e);\n};\n\nvar bindingResolved = function(thisArg, context) {\n    this._setBoundTo(thisArg);\n    if (this._isPending()) {\n        this._resolveCallback(context.target);\n    }\n};\n\nvar bindingRejected = function(e, context) {\n    if (!context.promiseRejectionQueued) this._reject(e);\n};\n\nPromise.prototype.bind = function (thisArg) {\n    var maybePromise = tryConvertToPromise(thisArg);\n    var ret = new Promise(INTERNAL);\n    ret._propagateFrom(this, 1);\n    var target = this._target();\n    if (maybePromise instanceof Promise) {\n        var context = {\n            promiseRejectionQueued: false,\n            promise: ret,\n            target: target,\n            bindingPromise: maybePromise\n        };\n        target._then(INTERNAL, targetRejected, ret._progress, ret, context);\n        maybePromise._then(\n            bindingResolved, bindingRejected, ret._progress, ret, context);\n    } else {\n        ret._setBoundTo(thisArg);\n        ret._resolveCallback(target);\n    }\n    return ret;\n};\n\nPromise.prototype._setBoundTo = function (obj) {\n    if (obj !== undefined) {\n        this._bitField = this._bitField | 131072;\n        this._boundTo = obj;\n    } else {\n        this._bitField = this._bitField & (~131072);\n    }\n};\n\nPromise.prototype._isBound = function () {\n    return (this._bitField & 131072) === 131072;\n};\n\nPromise.bind = function (thisArg, value) {\n    var maybePromise = tryConvertToPromise(thisArg);\n    var ret = new Promise(INTERNAL);\n\n    if (maybePromise instanceof Promise) {\n        maybePromise._then(function(thisArg) {\n            ret._setBoundTo(thisArg);\n            ret._resolveCallback(value);\n        }, ret._reject, ret._progress, ret, null);\n    } else {\n        ret._setBoundTo(thisArg);\n        ret._resolveCallback(value);\n    }\n    return ret;\n};\n};\n\n},{}],4:[function(_dereq_,module,exports){\n\"use strict\";\nvar old;\nif (typeof Promise !== \"undefined\") old = Promise;\nfunction noConflict() {\n    try { if (Promise === bluebird) Promise = old; }\n    catch (e) {}\n    return bluebird;\n}\nvar bluebird = _dereq_(\"./promise.js\")();\nbluebird.noConflict = noConflict;\nmodule.exports = bluebird;\n\n},{\"./promise.js\":23}],5:[function(_dereq_,module,exports){\n\"use strict\";\nvar cr = Object.create;\nif (cr) {\n    var callerCache = cr(null);\n    var getterCache = cr(null);\n    callerCache[\" size\"] = getterCache[\" size\"] = 0;\n}\n\nmodule.exports = function(Promise) {\nvar util = _dereq_(\"./util.js\");\nvar canEvaluate = util.canEvaluate;\nvar isIdentifier = util.isIdentifier;\n\nvar getMethodCaller;\nvar getGetter;\nif (!true) {\nvar makeMethodCaller = function (methodName) {\n    return new Function(\"ensureMethod\", \"                                    \\n\\\n        return function(obj) {                                               \\n\\\n            'use strict'                                                     \\n\\\n            var len = this.length;                                           \\n\\\n            ensureMethod(obj, 'methodName');                                 \\n\\\n            switch(len) {                                                    \\n\\\n                case 1: return obj.methodName(this[0]);                      \\n\\\n                case 2: return obj.methodName(this[0], this[1]);             \\n\\\n                case 3: return obj.methodName(this[0], this[1], this[2]);    \\n\\\n                case 0: return obj.methodName();                             \\n\\\n                default:                                                     \\n\\\n                    return obj.methodName.apply(obj, this);                  \\n\\\n            }                                                                \\n\\\n        };                                                                   \\n\\\n        \".replace(/methodName/g, methodName))(ensureMethod);\n};\n\nvar makeGetter = function (propertyName) {\n    return new Function(\"obj\", \"                                             \\n\\\n        'use strict';                                                        \\n\\\n        return obj.propertyName;                                             \\n\\\n        \".replace(\"propertyName\", propertyName));\n};\n\nvar getCompiled = function(name, compiler, cache) {\n    var ret = cache[name];\n    if (typeof ret !== \"function\") {\n        if (!isIdentifier(name)) {\n            return null;\n        }\n        ret = compiler(name);\n        cache[name] = ret;\n        cache[\" size\"]++;\n        if (cache[\" size\"] > 512) {\n            var keys = Object.keys(cache);\n            for (var i = 0; i < 256; ++i) delete cache[keys[i]];\n            cache[\" size\"] = keys.length - 256;\n        }\n    }\n    return ret;\n};\n\ngetMethodCaller = function(name) {\n    return getCompiled(name, makeMethodCaller, callerCache);\n};\n\ngetGetter = function(name) {\n    return getCompiled(name, makeGetter, getterCache);\n};\n}\n\nfunction ensureMethod(obj, methodName) {\n    var fn;\n    if (obj != null) fn = obj[methodName];\n    if (typeof fn !== \"function\") {\n        var message = \"Object \" + util.classString(obj) + \" has no method '\" +\n            util.toString(methodName) + \"'\";\n        throw new Promise.TypeError(message);\n    }\n    return fn;\n}\n\nfunction caller(obj) {\n    var methodName = this.pop();\n    var fn = ensureMethod(obj, methodName);\n    return fn.apply(obj, this);\n}\nPromise.prototype.call = function (methodName) {\n    var $_len = arguments.length;var args = new Array($_len - 1); for(var $_i = 1; $_i < $_len; ++$_i) {args[$_i - 1] = arguments[$_i];}\n    if (!true) {\n        if (canEvaluate) {\n            var maybeCaller = getMethodCaller(methodName);\n            if (maybeCaller !== null) {\n                return this._then(\n                    maybeCaller, undefined, undefined, args, undefined);\n            }\n        }\n    }\n    args.push(methodName);\n    return this._then(caller, undefined, undefined, args, undefined);\n};\n\nfunction namedGetter(obj) {\n    return obj[this];\n}\nfunction indexedGetter(obj) {\n    var index = +this;\n    if (index < 0) index = Math.max(0, index + obj.length);\n    return obj[index];\n}\nPromise.prototype.get = function (propertyName) {\n    var isIndex = (typeof propertyName === \"number\");\n    var getter;\n    if (!isIndex) {\n        if (canEvaluate) {\n            var maybeGetter = getGetter(propertyName);\n            getter = maybeGetter !== null ? maybeGetter : namedGetter;\n        } else {\n            getter = namedGetter;\n        }\n    } else {\n        getter = indexedGetter;\n    }\n    return this._then(getter, undefined, undefined, propertyName, undefined);\n};\n};\n\n},{\"./util.js\":38}],6:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise) {\nvar errors = _dereq_(\"./errors.js\");\nvar async = _dereq_(\"./async.js\");\nvar CancellationError = errors.CancellationError;\n\nPromise.prototype._cancel = function (reason) {\n    if (!this.isCancellable()) return this;\n    var parent;\n    var promiseToReject = this;\n    while ((parent = promiseToReject._cancellationParent) !== undefined &&\n        parent.isCancellable()) {\n        promiseToReject = parent;\n    }\n    this._unsetCancellable();\n    promiseToReject._target()._rejectCallback(reason, false, true);\n};\n\nPromise.prototype.cancel = function (reason) {\n    if (!this.isCancellable()) return this;\n    if (reason === undefined) reason = new CancellationError();\n    async.invokeLater(this._cancel, this, reason);\n    return this;\n};\n\nPromise.prototype.cancellable = function () {\n    if (this._cancellable()) return this;\n    async.enableTrampoline();\n    this._setCancellable();\n    this._cancellationParent = undefined;\n    return this;\n};\n\nPromise.prototype.uncancellable = function () {\n    var ret = this.then();\n    ret._unsetCancellable();\n    return ret;\n};\n\nPromise.prototype.fork = function (didFulfill, didReject, didProgress) {\n    var ret = this._then(didFulfill, didReject, didProgress,\n                         undefined, undefined);\n\n    ret._setCancellable();\n    ret._cancellationParent = undefined;\n    return ret;\n};\n};\n\n},{\"./async.js\":2,\"./errors.js\":13}],7:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function() {\nvar async = _dereq_(\"./async.js\");\nvar util = _dereq_(\"./util.js\");\nvar bluebirdFramePattern =\n    /[\\\\\\/]bluebird[\\\\\\/]js[\\\\\\/](main|debug|zalgo|instrumented)/;\nvar stackFramePattern = null;\nvar formatStack = null;\nvar indentStackFrames = false;\nvar warn;\n\nfunction CapturedTrace(parent) {\n    this._parent = parent;\n    var length = this._length = 1 + (parent === undefined ? 0 : parent._length);\n    captureStackTrace(this, CapturedTrace);\n    if (length > 32) this.uncycle();\n}\nutil.inherits(CapturedTrace, Error);\n\nCapturedTrace.prototype.uncycle = function() {\n    var length = this._length;\n    if (length < 2) return;\n    var nodes = [];\n    var stackToIndex = {};\n\n    for (var i = 0, node = this; node !== undefined; ++i) {\n        nodes.push(node);\n        node = node._parent;\n    }\n    length = this._length = i;\n    for (var i = length - 1; i >= 0; --i) {\n        var stack = nodes[i].stack;\n        if (stackToIndex[stack] === undefined) {\n            stackToIndex[stack] = i;\n        }\n    }\n    for (var i = 0; i < length; ++i) {\n        var currentStack = nodes[i].stack;\n        var index = stackToIndex[currentStack];\n        if (index !== undefined && index !== i) {\n            if (index > 0) {\n                nodes[index - 1]._parent = undefined;\n                nodes[index - 1]._length = 1;\n            }\n            nodes[i]._parent = undefined;\n            nodes[i]._length = 1;\n            var cycleEdgeNode = i > 0 ? nodes[i - 1] : this;\n\n            if (index < length - 1) {\n                cycleEdgeNode._parent = nodes[index + 1];\n                cycleEdgeNode._parent.uncycle();\n                cycleEdgeNode._length =\n                    cycleEdgeNode._parent._length + 1;\n            } else {\n                cycleEdgeNode._parent = undefined;\n                cycleEdgeNode._length = 1;\n            }\n            var currentChildLength = cycleEdgeNode._length + 1;\n            for (var j = i - 2; j >= 0; --j) {\n                nodes[j]._length = currentChildLength;\n                currentChildLength++;\n            }\n            return;\n        }\n    }\n};\n\nCapturedTrace.prototype.parent = function() {\n    return this._parent;\n};\n\nCapturedTrace.prototype.hasParent = function() {\n    return this._parent !== undefined;\n};\n\nCapturedTrace.prototype.attachExtraTrace = function(error) {\n    if (error.__stackCleaned__) return;\n    this.uncycle();\n    var parsed = CapturedTrace.parseStackAndMessage(error);\n    var message = parsed.message;\n    var stacks = [parsed.stack];\n\n    var trace = this;\n    while (trace !== undefined) {\n        stacks.push(cleanStack(trace.stack.split(\"\\n\")));\n        trace = trace._parent;\n    }\n    removeCommonRoots(stacks);\n    removeDuplicateOrEmptyJumps(stacks);\n    util.notEnumerableProp(error, \"stack\", reconstructStack(message, stacks));\n    util.notEnumerableProp(error, \"__stackCleaned__\", true);\n};\n\nfunction reconstructStack(message, stacks) {\n    for (var i = 0; i < stacks.length - 1; ++i) {\n        stacks[i].push(\"From previous event:\");\n        stacks[i] = stacks[i].join(\"\\n\");\n    }\n    if (i < stacks.length) {\n        stacks[i] = stacks[i].join(\"\\n\");\n    }\n    return message + \"\\n\" + stacks.join(\"\\n\");\n}\n\nfunction removeDuplicateOrEmptyJumps(stacks) {\n    for (var i = 0; i < stacks.length; ++i) {\n        if (stacks[i].length === 0 ||\n            ((i + 1 < stacks.length) && stacks[i][0] === stacks[i+1][0])) {\n            stacks.splice(i, 1);\n            i--;\n        }\n    }\n}\n\nfunction removeCommonRoots(stacks) {\n    var current = stacks[0];\n    for (var i = 1; i < stacks.length; ++i) {\n        var prev = stacks[i];\n        var currentLastIndex = current.length - 1;\n        var currentLastLine = current[currentLastIndex];\n        var commonRootMeetPoint = -1;\n\n        for (var j = prev.length - 1; j >= 0; --j) {\n            if (prev[j] === currentLastLine) {\n                commonRootMeetPoint = j;\n                break;\n            }\n        }\n\n        for (var j = commonRootMeetPoint; j >= 0; --j) {\n            var line = prev[j];\n            if (current[currentLastIndex] === line) {\n                current.pop();\n                currentLastIndex--;\n            } else {\n                break;\n            }\n        }\n        current = prev;\n    }\n}\n\nfunction cleanStack(stack) {\n    var ret = [];\n    for (var i = 0; i < stack.length; ++i) {\n        var line = stack[i];\n        var isTraceLine = stackFramePattern.test(line) ||\n            \"    (No stack trace)\" === line;\n        var isInternalFrame = isTraceLine && shouldIgnore(line);\n        if (isTraceLine && !isInternalFrame) {\n            if (indentStackFrames && line.charAt(0) !== \" \") {\n                line = \"    \" + line;\n            }\n            ret.push(line);\n        }\n    }\n    return ret;\n}\n\nfunction stackFramesAsArray(error) {\n    var stack = error.stack.replace(/\\s+$/g, \"\").split(\"\\n\");\n    for (var i = 0; i < stack.length; ++i) {\n        var line = stack[i];\n        if (\"    (No stack trace)\" === line || stackFramePattern.test(line)) {\n            break;\n        }\n    }\n    if (i > 0) {\n        stack = stack.slice(i);\n    }\n    return stack;\n}\n\nCapturedTrace.parseStackAndMessage = function(error) {\n    var stack = error.stack;\n    var message = error.toString();\n    stack = typeof stack === \"string\" && stack.length > 0\n                ? stackFramesAsArray(error) : [\"    (No stack trace)\"];\n    return {\n        message: message,\n        stack: cleanStack(stack)\n    };\n};\n\nCapturedTrace.formatAndLogError = function(error, title) {\n    if (typeof console !== \"undefined\") {\n        var message;\n        if (typeof error === \"object\" || typeof error === \"function\") {\n            var stack = error.stack;\n            message = title + formatStack(stack, error);\n        } else {\n            message = title + String(error);\n        }\n        if (typeof warn === \"function\") {\n            warn(message);\n        } else if (typeof console.log === \"function\" ||\n            typeof console.log === \"object\") {\n            console.log(message);\n        }\n    }\n};\n\nCapturedTrace.unhandledRejection = function (reason) {\n    CapturedTrace.formatAndLogError(reason, \"^--- With additional stack trace: \");\n};\n\nCapturedTrace.isSupported = function () {\n    return typeof captureStackTrace === \"function\";\n};\n\nCapturedTrace.fireRejectionEvent =\nfunction(name, localHandler, reason, promise) {\n    var localEventFired = false;\n    try {\n        if (typeof localHandler === \"function\") {\n            localEventFired = true;\n            if (name === \"rejectionHandled\") {\n                localHandler(promise);\n            } else {\n                localHandler(reason, promise);\n            }\n        }\n    } catch (e) {\n        async.throwLater(e);\n    }\n\n    var globalEventFired = false;\n    try {\n        globalEventFired = fireGlobalEvent(name, reason, promise);\n    } catch (e) {\n        globalEventFired = true;\n        async.throwLater(e);\n    }\n\n    var domEventFired = false;\n    if (fireDomEvent) {\n        try {\n            domEventFired = fireDomEvent(name.toLowerCase(), {\n                reason: reason,\n                promise: promise\n            });\n        } catch (e) {\n            domEventFired = true;\n            async.throwLater(e);\n        }\n    }\n\n    if (!globalEventFired && !localEventFired && !domEventFired &&\n        name === \"unhandledRejection\") {\n        CapturedTrace.formatAndLogError(reason, \"Unhandled rejection \");\n    }\n};\n\nfunction formatNonError(obj) {\n    var str;\n    if (typeof obj === \"function\") {\n        str = \"[function \" +\n            (obj.name || \"anonymous\") +\n            \"]\";\n    } else {\n        str = obj.toString();\n        var ruselessToString = /\\[object [a-zA-Z0-9$_]+\\]/;\n        if (ruselessToString.test(str)) {\n            try {\n                var newStr = JSON.stringify(obj);\n                str = newStr;\n            }\n            catch(e) {\n\n            }\n        }\n        if (str.length === 0) {\n            str = \"(empty array)\";\n        }\n    }\n    return (\"(<\" + snip(str) + \">, no stack trace)\");\n}\n\nfunction snip(str) {\n    var maxChars = 41;\n    if (str.length < maxChars) {\n        return str;\n    }\n    return str.substr(0, maxChars - 3) + \"...\";\n}\n\nvar shouldIgnore = function() { return false; };\nvar parseLineInfoRegex = /[\\/<\\(]([^:\\/]+):(\\d+):(?:\\d+)\\)?\\s*$/;\nfunction parseLineInfo(line) {\n    var matches = line.match(parseLineInfoRegex);\n    if (matches) {\n        return {\n            fileName: matches[1],\n            line: parseInt(matches[2], 10)\n        };\n    }\n}\nCapturedTrace.setBounds = function(firstLineError, lastLineError) {\n    if (!CapturedTrace.isSupported()) return;\n    var firstStackLines = firstLineError.stack.split(\"\\n\");\n    var lastStackLines = lastLineError.stack.split(\"\\n\");\n    var firstIndex = -1;\n    var lastIndex = -1;\n    var firstFileName;\n    var lastFileName;\n    for (var i = 0; i < firstStackLines.length; ++i) {\n        var result = parseLineInfo(firstStackLines[i]);\n        if (result) {\n            firstFileName = result.fileName;\n            firstIndex = result.line;\n            break;\n        }\n    }\n    for (var i = 0; i < lastStackLines.length; ++i) {\n        var result = parseLineInfo(lastStackLines[i]);\n        if (result) {\n            lastFileName = result.fileName;\n            lastIndex = result.line;\n            break;\n        }\n    }\n    if (firstIndex < 0 || lastIndex < 0 || !firstFileName || !lastFileName ||\n        firstFileName !== lastFileName || firstIndex >= lastIndex) {\n        return;\n    }\n\n    shouldIgnore = function(line) {\n        if (bluebirdFramePattern.test(line)) return true;\n        var info = parseLineInfo(line);\n        if (info) {\n            if (info.fileName === firstFileName &&\n                (firstIndex <= info.line && info.line <= lastIndex)) {\n                return true;\n            }\n        }\n        return false;\n    };\n};\n\nvar captureStackTrace = (function stackDetection() {\n    var v8stackFramePattern = /^\\s*at\\s*/;\n    var v8stackFormatter = function(stack, error) {\n        if (typeof stack === \"string\") return stack;\n\n        if (error.name !== undefined &&\n            error.message !== undefined) {\n            return error.toString();\n        }\n        return formatNonError(error);\n    };\n\n    if (typeof Error.stackTraceLimit === \"number\" &&\n        typeof Error.captureStackTrace === \"function\") {\n        Error.stackTraceLimit = Error.stackTraceLimit + 6;\n        stackFramePattern = v8stackFramePattern;\n        formatStack = v8stackFormatter;\n        var captureStackTrace = Error.captureStackTrace;\n\n        shouldIgnore = function(line) {\n            return bluebirdFramePattern.test(line);\n        };\n        return function(receiver, ignoreUntil) {\n            Error.stackTraceLimit = Error.stackTraceLimit + 6;\n            captureStackTrace(receiver, ignoreUntil);\n            Error.stackTraceLimit = Error.stackTraceLimit - 6;\n        };\n    }\n    var err = new Error();\n\n    if (typeof err.stack === \"string\" &&\n        err.stack.split(\"\\n\")[0].indexOf(\"stackDetection@\") >= 0) {\n        stackFramePattern = /@/;\n        formatStack = v8stackFormatter;\n        indentStackFrames = true;\n        return function captureStackTrace(o) {\n            o.stack = new Error().stack;\n        };\n    }\n\n    var hasStackAfterThrow;\n    try { throw new Error(); }\n    catch(e) {\n        hasStackAfterThrow = (\"stack\" in e);\n    }\n    if (!(\"stack\" in err) && hasStackAfterThrow) {\n        stackFramePattern = v8stackFramePattern;\n        formatStack = v8stackFormatter;\n        return function captureStackTrace(o) {\n            Error.stackTraceLimit = Error.stackTraceLimit + 6;\n            try { throw new Error(); }\n            catch(e) { o.stack = e.stack; }\n            Error.stackTraceLimit = Error.stackTraceLimit - 6;\n        };\n    }\n\n    formatStack = function(stack, error) {\n        if (typeof stack === \"string\") return stack;\n\n        if ((typeof error === \"object\" ||\n            typeof error === \"function\") &&\n            error.name !== undefined &&\n            error.message !== undefined) {\n            return error.toString();\n        }\n        return formatNonError(error);\n    };\n\n    return null;\n\n})([]);\n\nvar fireDomEvent;\nvar fireGlobalEvent = (function() {\n    if (util.isNode) {\n        return function(name, reason, promise) {\n            if (name === \"rejectionHandled\") {\n                return process.emit(name, promise);\n            } else {\n                return process.emit(name, reason, promise);\n            }\n        };\n    } else {\n        var customEventWorks = false;\n        var anyEventWorks = true;\n        try {\n            var ev = new self.CustomEvent(\"test\");\n            customEventWorks = ev instanceof CustomEvent;\n        } catch (e) {}\n        if (!customEventWorks) {\n            try {\n                var event = document.createEvent(\"CustomEvent\");\n                event.initCustomEvent(\"testingtheevent\", false, true, {});\n                self.dispatchEvent(event);\n            } catch (e) {\n                anyEventWorks = false;\n            }\n        }\n        if (anyEventWorks) {\n            fireDomEvent = function(type, detail) {\n                var event;\n                if (customEventWorks) {\n                    event = new self.CustomEvent(type, {\n                        detail: detail,\n                        bubbles: false,\n                        cancelable: true\n                    });\n                } else if (self.dispatchEvent) {\n                    event = document.createEvent(\"CustomEvent\");\n                    event.initCustomEvent(type, false, true, detail);\n                }\n\n                return event ? !self.dispatchEvent(event) : false;\n            };\n        }\n\n        var toWindowMethodNameMap = {};\n        toWindowMethodNameMap[\"unhandledRejection\"] = (\"on\" +\n            \"unhandledRejection\").toLowerCase();\n        toWindowMethodNameMap[\"rejectionHandled\"] = (\"on\" +\n            \"rejectionHandled\").toLowerCase();\n\n        return function(name, reason, promise) {\n            var methodName = toWindowMethodNameMap[name];\n            var method = self[methodName];\n            if (!method) return false;\n            if (name === \"rejectionHandled\") {\n                method.call(self, promise);\n            } else {\n                method.call(self, reason, promise);\n            }\n            return true;\n        };\n    }\n})();\n\nif (typeof console !== \"undefined\" && typeof console.warn !== \"undefined\") {\n    warn = function (message) {\n        console.warn(message);\n    };\n    if (util.isNode && process.stderr.isTTY) {\n        warn = function(message) {\n            process.stderr.write(\"\\u001b[31m\" + message + \"\\u001b[39m\\n\");\n        };\n    } else if (!util.isNode && typeof (new Error().stack) === \"string\") {\n        warn = function(message) {\n            console.warn(\"%c\" + message, \"color: red\");\n        };\n    }\n}\n\nreturn CapturedTrace;\n};\n\n},{\"./async.js\":2,\"./util.js\":38}],8:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(NEXT_FILTER) {\nvar util = _dereq_(\"./util.js\");\nvar errors = _dereq_(\"./errors.js\");\nvar tryCatch = util.tryCatch;\nvar errorObj = util.errorObj;\nvar keys = _dereq_(\"./es5.js\").keys;\nvar TypeError = errors.TypeError;\n\nfunction CatchFilter(instances, callback, promise) {\n    this._instances = instances;\n    this._callback = callback;\n    this._promise = promise;\n}\n\nfunction safePredicate(predicate, e) {\n    var safeObject = {};\n    var retfilter = tryCatch(predicate).call(safeObject, e);\n\n    if (retfilter === errorObj) return retfilter;\n\n    var safeKeys = keys(safeObject);\n    if (safeKeys.length) {\n        errorObj.e = new TypeError(\"Catch filter must inherit from Error or be a simple predicate function\\u000a\\u000a    See http://goo.gl/o84o68\\u000a\");\n        return errorObj;\n    }\n    return retfilter;\n}\n\nCatchFilter.prototype.doFilter = function (e) {\n    var cb = this._callback;\n    var promise = this._promise;\n    var boundTo = promise._boundTo;\n    for (var i = 0, len = this._instances.length; i < len; ++i) {\n        var item = this._instances[i];\n        var itemIsErrorType = item === Error ||\n            (item != null && item.prototype instanceof Error);\n\n        if (itemIsErrorType && e instanceof item) {\n            var ret = tryCatch(cb).call(boundTo, e);\n            if (ret === errorObj) {\n                NEXT_FILTER.e = ret.e;\n                return NEXT_FILTER;\n            }\n            return ret;\n        } else if (typeof item === \"function\" && !itemIsErrorType) {\n            var shouldHandle = safePredicate(item, e);\n            if (shouldHandle === errorObj) {\n                e = errorObj.e;\n                break;\n            } else if (shouldHandle) {\n                var ret = tryCatch(cb).call(boundTo, e);\n                if (ret === errorObj) {\n                    NEXT_FILTER.e = ret.e;\n                    return NEXT_FILTER;\n                }\n                return ret;\n            }\n        }\n    }\n    NEXT_FILTER.e = e;\n    return NEXT_FILTER;\n};\n\nreturn CatchFilter;\n};\n\n},{\"./errors.js\":13,\"./es5.js\":14,\"./util.js\":38}],9:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise, CapturedTrace, isDebugging) {\nvar contextStack = [];\nfunction Context() {\n    this._trace = new CapturedTrace(peekContext());\n}\nContext.prototype._pushContext = function () {\n    if (!isDebugging()) return;\n    if (this._trace !== undefined) {\n        contextStack.push(this._trace);\n    }\n};\n\nContext.prototype._popContext = function () {\n    if (!isDebugging()) return;\n    if (this._trace !== undefined) {\n        contextStack.pop();\n    }\n};\n\nfunction createContext() {\n    if (isDebugging()) return new Context();\n}\n\nfunction peekContext() {\n    var lastIndex = contextStack.length - 1;\n    if (lastIndex >= 0) {\n        return contextStack[lastIndex];\n    }\n    return undefined;\n}\n\nPromise.prototype._peekContext = peekContext;\nPromise.prototype._pushContext = Context.prototype._pushContext;\nPromise.prototype._popContext = Context.prototype._popContext;\n\nreturn createContext;\n};\n\n},{}],10:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise, CapturedTrace) {\nvar async = _dereq_(\"./async.js\");\nvar Warning = _dereq_(\"./errors.js\").Warning;\nvar util = _dereq_(\"./util.js\");\nvar canAttachTrace = util.canAttachTrace;\nvar unhandledRejectionHandled;\nvar possiblyUnhandledRejection;\nvar debugging = false || (util.isNode &&\n                    (!!process.env[\"BLUEBIRD_DEBUG\"] ||\n                     process.env[\"NODE_ENV\"] === \"development\"));\n\nif (debugging) {\n    async.disableTrampolineIfNecessary();\n}\n\nPromise.prototype._ensurePossibleRejectionHandled = function () {\n    this._setRejectionIsUnhandled();\n    async.invokeLater(this._notifyUnhandledRejection, this, undefined);\n};\n\nPromise.prototype._notifyUnhandledRejectionIsHandled = function () {\n    CapturedTrace.fireRejectionEvent(\"rejectionHandled\",\n                                  unhandledRejectionHandled, undefined, this);\n};\n\nPromise.prototype._notifyUnhandledRejection = function () {\n    if (this._isRejectionUnhandled()) {\n        var reason = this._getCarriedStackTrace() || this._settledValue;\n        this._setUnhandledRejectionIsNotified();\n        CapturedTrace.fireRejectionEvent(\"unhandledRejection\",\n                                      possiblyUnhandledRejection, reason, this);\n    }\n};\n\nPromise.prototype._setUnhandledRejectionIsNotified = function () {\n    this._bitField = this._bitField | 524288;\n};\n\nPromise.prototype._unsetUnhandledRejectionIsNotified = function () {\n    this._bitField = this._bitField & (~524288);\n};\n\nPromise.prototype._isUnhandledRejectionNotified = function () {\n    return (this._bitField & 524288) > 0;\n};\n\nPromise.prototype._setRejectionIsUnhandled = function () {\n    this._bitField = this._bitField | 2097152;\n};\n\nPromise.prototype._unsetRejectionIsUnhandled = function () {\n    this._bitField = this._bitField & (~2097152);\n    if (this._isUnhandledRejectionNotified()) {\n        this._unsetUnhandledRejectionIsNotified();\n        this._notifyUnhandledRejectionIsHandled();\n    }\n};\n\nPromise.prototype._isRejectionUnhandled = function () {\n    return (this._bitField & 2097152) > 0;\n};\n\nPromise.prototype._setCarriedStackTrace = function (capturedTrace) {\n    this._bitField = this._bitField | 1048576;\n    this._fulfillmentHandler0 = capturedTrace;\n};\n\nPromise.prototype._isCarryingStackTrace = function () {\n    return (this._bitField & 1048576) > 0;\n};\n\nPromise.prototype._getCarriedStackTrace = function () {\n    return this._isCarryingStackTrace()\n        ? this._fulfillmentHandler0\n        : undefined;\n};\n\nPromise.prototype._captureStackTrace = function () {\n    if (debugging) {\n        this._trace = new CapturedTrace(this._peekContext());\n    }\n    return this;\n};\n\nPromise.prototype._attachExtraTrace = function (error, ignoreSelf) {\n    if (debugging && canAttachTrace(error)) {\n        var trace = this._trace;\n        if (trace !== undefined) {\n            if (ignoreSelf) trace = trace._parent;\n        }\n        if (trace !== undefined) {\n            trace.attachExtraTrace(error);\n        } else if (!error.__stackCleaned__) {\n            var parsed = CapturedTrace.parseStackAndMessage(error);\n            util.notEnumerableProp(error, \"stack\",\n                parsed.message + \"\\n\" + parsed.stack.join(\"\\n\"));\n            util.notEnumerableProp(error, \"__stackCleaned__\", true);\n        }\n    }\n};\n\nPromise.prototype._warn = function(message) {\n    var warning = new Warning(message);\n    var ctx = this._peekContext();\n    if (ctx) {\n        ctx.attachExtraTrace(warning);\n    } else {\n        var parsed = CapturedTrace.parseStackAndMessage(warning);\n        warning.stack = parsed.message + \"\\n\" + parsed.stack.join(\"\\n\");\n    }\n    CapturedTrace.formatAndLogError(warning, \"\");\n};\n\nPromise.onPossiblyUnhandledRejection = function (fn) {\n    possiblyUnhandledRejection = typeof fn === \"function\" ? fn : undefined;\n};\n\nPromise.onUnhandledRejectionHandled = function (fn) {\n    unhandledRejectionHandled = typeof fn === \"function\" ? fn : undefined;\n};\n\nPromise.longStackTraces = function () {\n    if (async.haveItemsQueued() &&\n        debugging === false\n   ) {\n        throw new Error(\"cannot enable long stack traces after promises have been created\\u000a\\u000a    See http://goo.gl/DT1qyG\\u000a\");\n    }\n    debugging = CapturedTrace.isSupported();\n    if (debugging) {\n        async.disableTrampolineIfNecessary();\n    }\n};\n\nPromise.hasLongStackTraces = function () {\n    return debugging && CapturedTrace.isSupported();\n};\n\nif (!CapturedTrace.isSupported()) {\n    Promise.longStackTraces = function(){};\n    debugging = false;\n}\n\nreturn function() {\n    return debugging;\n};\n};\n\n},{\"./async.js\":2,\"./errors.js\":13,\"./util.js\":38}],11:[function(_dereq_,module,exports){\n\"use strict\";\nvar util = _dereq_(\"./util.js\");\nvar isPrimitive = util.isPrimitive;\nvar wrapsPrimitiveReceiver = util.wrapsPrimitiveReceiver;\n\nmodule.exports = function(Promise) {\nvar returner = function () {\n    return this;\n};\nvar thrower = function () {\n    throw this;\n};\n\nvar wrapper = function (value, action) {\n    if (action === 1) {\n        return function () {\n            throw value;\n        };\n    } else if (action === 2) {\n        return function () {\n            return value;\n        };\n    }\n};\n\n\nPromise.prototype[\"return\"] =\nPromise.prototype.thenReturn = function (value) {\n    if (wrapsPrimitiveReceiver && isPrimitive(value)) {\n        return this._then(\n            wrapper(value, 2),\n            undefined,\n            undefined,\n            undefined,\n            undefined\n       );\n    }\n    return this._then(returner, undefined, undefined, value, undefined);\n};\n\nPromise.prototype[\"throw\"] =\nPromise.prototype.thenThrow = function (reason) {\n    if (wrapsPrimitiveReceiver && isPrimitive(reason)) {\n        return this._then(\n            wrapper(reason, 1),\n            undefined,\n            undefined,\n            undefined,\n            undefined\n       );\n    }\n    return this._then(thrower, undefined, undefined, reason, undefined);\n};\n};\n\n},{\"./util.js\":38}],12:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise, INTERNAL) {\nvar PromiseReduce = Promise.reduce;\n\nPromise.prototype.each = function (fn) {\n    return PromiseReduce(this, fn, null, INTERNAL);\n};\n\nPromise.each = function (promises, fn) {\n    return PromiseReduce(promises, fn, null, INTERNAL);\n};\n};\n\n},{}],13:[function(_dereq_,module,exports){\n\"use strict\";\nvar es5 = _dereq_(\"./es5.js\");\nvar Objectfreeze = es5.freeze;\nvar util = _dereq_(\"./util.js\");\nvar inherits = util.inherits;\nvar notEnumerableProp = util.notEnumerableProp;\n\nfunction subError(nameProperty, defaultMessage) {\n    function SubError(message) {\n        if (!(this instanceof SubError)) return new SubError(message);\n        notEnumerableProp(this, \"message\",\n            typeof message === \"string\" ? message : defaultMessage);\n        notEnumerableProp(this, \"name\", nameProperty);\n        if (Error.captureStackTrace) {\n            Error.captureStackTrace(this, this.constructor);\n        } else {\n            Error.call(this);\n        }\n    }\n    inherits(SubError, Error);\n    return SubError;\n}\n\nvar _TypeError, _RangeError;\nvar Warning = subError(\"Warning\", \"warning\");\nvar CancellationError = subError(\"CancellationError\", \"cancellation error\");\nvar TimeoutError = subError(\"TimeoutError\", \"timeout error\");\nvar AggregateError = subError(\"AggregateError\", \"aggregate error\");\ntry {\n    _TypeError = TypeError;\n    _RangeError = RangeError;\n} catch(e) {\n    _TypeError = subError(\"TypeError\", \"type error\");\n    _RangeError = subError(\"RangeError\", \"range error\");\n}\n\nvar methods = (\"join pop push shift unshift slice filter forEach some \" +\n    \"every map indexOf lastIndexOf reduce reduceRight sort reverse\").split(\" \");\n\nfor (var i = 0; i < methods.length; ++i) {\n    if (typeof Array.prototype[methods[i]] === \"function\") {\n        AggregateError.prototype[methods[i]] = Array.prototype[methods[i]];\n    }\n}\n\nes5.defineProperty(AggregateError.prototype, \"length\", {\n    value: 0,\n    configurable: false,\n    writable: true,\n    enumerable: true\n});\nAggregateError.prototype[\"isOperational\"] = true;\nvar level = 0;\nAggregateError.prototype.toString = function() {\n    var indent = Array(level * 4 + 1).join(\" \");\n    var ret = \"\\n\" + indent + \"AggregateError of:\" + \"\\n\";\n    level++;\n    indent = Array(level * 4 + 1).join(\" \");\n    for (var i = 0; i < this.length; ++i) {\n        var str = this[i] === this ? \"[Circular AggregateError]\" : this[i] + \"\";\n        var lines = str.split(\"\\n\");\n        for (var j = 0; j < lines.length; ++j) {\n            lines[j] = indent + lines[j];\n        }\n        str = lines.join(\"\\n\");\n        ret += str + \"\\n\";\n    }\n    level--;\n    return ret;\n};\n\nfunction OperationalError(message) {\n    if (!(this instanceof OperationalError))\n        return new OperationalError(message);\n    notEnumerableProp(this, \"name\", \"OperationalError\");\n    notEnumerableProp(this, \"message\", message);\n    this.cause = message;\n    this[\"isOperational\"] = true;\n\n    if (message instanceof Error) {\n        notEnumerableProp(this, \"message\", message.message);\n        notEnumerableProp(this, \"stack\", message.stack);\n    } else if (Error.captureStackTrace) {\n        Error.captureStackTrace(this, this.constructor);\n    }\n\n}\ninherits(OperationalError, Error);\n\nvar errorTypes = Error[\"__BluebirdErrorTypes__\"];\nif (!errorTypes) {\n    errorTypes = Objectfreeze({\n        CancellationError: CancellationError,\n        TimeoutError: TimeoutError,\n        OperationalError: OperationalError,\n        RejectionError: OperationalError,\n        AggregateError: AggregateError\n    });\n    notEnumerableProp(Error, \"__BluebirdErrorTypes__\", errorTypes);\n}\n\nmodule.exports = {\n    Error: Error,\n    TypeError: _TypeError,\n    RangeError: _RangeError,\n    CancellationError: errorTypes.CancellationError,\n    OperationalError: errorTypes.OperationalError,\n    TimeoutError: errorTypes.TimeoutError,\n    AggregateError: errorTypes.AggregateError,\n    Warning: Warning\n};\n\n},{\"./es5.js\":14,\"./util.js\":38}],14:[function(_dereq_,module,exports){\nvar isES5 = (function(){\n    \"use strict\";\n    return this === undefined;\n})();\n\nif (isES5) {\n    module.exports = {\n        freeze: Object.freeze,\n        defineProperty: Object.defineProperty,\n        getDescriptor: Object.getOwnPropertyDescriptor,\n        keys: Object.keys,\n        names: Object.getOwnPropertyNames,\n        getPrototypeOf: Object.getPrototypeOf,\n        isArray: Array.isArray,\n        isES5: isES5,\n        propertyIsWritable: function(obj, prop) {\n            var descriptor = Object.getOwnPropertyDescriptor(obj, prop);\n            return !!(!descriptor || descriptor.writable || descriptor.set);\n        }\n    };\n} else {\n    var has = {}.hasOwnProperty;\n    var str = {}.toString;\n    var proto = {}.constructor.prototype;\n\n    var ObjectKeys = function (o) {\n        var ret = [];\n        for (var key in o) {\n            if (has.call(o, key)) {\n                ret.push(key);\n            }\n        }\n        return ret;\n    };\n\n    var ObjectGetDescriptor = function(o, key) {\n        return {value: o[key]};\n    };\n\n    var ObjectDefineProperty = function (o, key, desc) {\n        o[key] = desc.value;\n        return o;\n    };\n\n    var ObjectFreeze = function (obj) {\n        return obj;\n    };\n\n    var ObjectGetPrototypeOf = function (obj) {\n        try {\n            return Object(obj).constructor.prototype;\n        }\n        catch (e) {\n            return proto;\n        }\n    };\n\n    var ArrayIsArray = function (obj) {\n        try {\n            return str.call(obj) === \"[object Array]\";\n        }\n        catch(e) {\n            return false;\n        }\n    };\n\n    module.exports = {\n        isArray: ArrayIsArray,\n        keys: ObjectKeys,\n        names: ObjectKeys,\n        defineProperty: ObjectDefineProperty,\n        getDescriptor: ObjectGetDescriptor,\n        freeze: ObjectFreeze,\n        getPrototypeOf: ObjectGetPrototypeOf,\n        isES5: isES5,\n        propertyIsWritable: function() {\n            return true;\n        }\n    };\n}\n\n},{}],15:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise, INTERNAL) {\nvar PromiseMap = Promise.map;\n\nPromise.prototype.filter = function (fn, options) {\n    return PromiseMap(this, fn, options, INTERNAL);\n};\n\nPromise.filter = function (promises, fn, options) {\n    return PromiseMap(promises, fn, options, INTERNAL);\n};\n};\n\n},{}],16:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise, NEXT_FILTER, tryConvertToPromise) {\nvar util = _dereq_(\"./util.js\");\nvar wrapsPrimitiveReceiver = util.wrapsPrimitiveReceiver;\nvar isPrimitive = util.isPrimitive;\nvar thrower = util.thrower;\n\nfunction returnThis() {\n    return this;\n}\nfunction throwThis() {\n    throw this;\n}\nfunction return$(r) {\n    return function() {\n        return r;\n    };\n}\nfunction throw$(r) {\n    return function() {\n        throw r;\n    };\n}\nfunction promisedFinally(ret, reasonOrValue, isFulfilled) {\n    var then;\n    if (wrapsPrimitiveReceiver && isPrimitive(reasonOrValue)) {\n        then = isFulfilled ? return$(reasonOrValue) : throw$(reasonOrValue);\n    } else {\n        then = isFulfilled ? returnThis : throwThis;\n    }\n    return ret._then(then, thrower, undefined, reasonOrValue, undefined);\n}\n\nfunction finallyHandler(reasonOrValue) {\n    var promise = this.promise;\n    var handler = this.handler;\n\n    var ret = promise._isBound()\n                    ? handler.call(promise._boundTo)\n                    : handler();\n\n    if (ret !== undefined) {\n        var maybePromise = tryConvertToPromise(ret, promise);\n        if (maybePromise instanceof Promise) {\n            maybePromise = maybePromise._target();\n            return promisedFinally(maybePromise, reasonOrValue,\n                                    promise.isFulfilled());\n        }\n    }\n\n    if (promise.isRejected()) {\n        NEXT_FILTER.e = reasonOrValue;\n        return NEXT_FILTER;\n    } else {\n        return reasonOrValue;\n    }\n}\n\nfunction tapHandler(value) {\n    var promise = this.promise;\n    var handler = this.handler;\n\n    var ret = promise._isBound()\n                    ? handler.call(promise._boundTo, value)\n                    : handler(value);\n\n    if (ret !== undefined) {\n        var maybePromise = tryConvertToPromise(ret, promise);\n        if (maybePromise instanceof Promise) {\n            maybePromise = maybePromise._target();\n            return promisedFinally(maybePromise, value, true);\n        }\n    }\n    return value;\n}\n\nPromise.prototype._passThroughHandler = function (handler, isFinally) {\n    if (typeof handler !== \"function\") return this.then();\n\n    var promiseAndHandler = {\n        promise: this,\n        handler: handler\n    };\n\n    return this._then(\n            isFinally ? finallyHandler : tapHandler,\n            isFinally ? finallyHandler : undefined, undefined,\n            promiseAndHandler, undefined);\n};\n\nPromise.prototype.lastly =\nPromise.prototype[\"finally\"] = function (handler) {\n    return this._passThroughHandler(handler, true);\n};\n\nPromise.prototype.tap = function (handler) {\n    return this._passThroughHandler(handler, false);\n};\n};\n\n},{\"./util.js\":38}],17:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise,\n                          apiRejection,\n                          INTERNAL,\n                          tryConvertToPromise) {\nvar errors = _dereq_(\"./errors.js\");\nvar TypeError = errors.TypeError;\nvar util = _dereq_(\"./util.js\");\nvar errorObj = util.errorObj;\nvar tryCatch = util.tryCatch;\nvar yieldHandlers = [];\n\nfunction promiseFromYieldHandler(value, yieldHandlers, traceParent) {\n    for (var i = 0; i < yieldHandlers.length; ++i) {\n        traceParent._pushContext();\n        var result = tryCatch(yieldHandlers[i])(value);\n        traceParent._popContext();\n        if (result === errorObj) {\n            traceParent._pushContext();\n            var ret = Promise.reject(errorObj.e);\n            traceParent._popContext();\n            return ret;\n        }\n        var maybePromise = tryConvertToPromise(result, traceParent);\n        if (maybePromise instanceof Promise) return maybePromise;\n    }\n    return null;\n}\n\nfunction PromiseSpawn(generatorFunction, receiver, yieldHandler, stack) {\n    var promise = this._promise = new Promise(INTERNAL);\n    promise._captureStackTrace();\n    this._stack = stack;\n    this._generatorFunction = generatorFunction;\n    this._receiver = receiver;\n    this._generator = undefined;\n    this._yieldHandlers = typeof yieldHandler === \"function\"\n        ? [yieldHandler].concat(yieldHandlers)\n        : yieldHandlers;\n}\n\nPromiseSpawn.prototype.promise = function () {\n    return this._promise;\n};\n\nPromiseSpawn.prototype._run = function () {\n    this._generator = this._generatorFunction.call(this._receiver);\n    this._receiver =\n        this._generatorFunction = undefined;\n    this._next(undefined);\n};\n\nPromiseSpawn.prototype._continue = function (result) {\n    if (result === errorObj) {\n        return this._promise._rejectCallback(result.e, false, true);\n    }\n\n    var value = result.value;\n    if (result.done === true) {\n        this._promise._resolveCallback(value);\n    } else {\n        var maybePromise = tryConvertToPromise(value, this._promise);\n        if (!(maybePromise instanceof Promise)) {\n            maybePromise =\n                promiseFromYieldHandler(maybePromise,\n                                        this._yieldHandlers,\n                                        this._promise);\n            if (maybePromise === null) {\n                this._throw(\n                    new TypeError(\n                        \"A value %s was yielded that could not be treated as a promise\\u000a\\u000a    See http://goo.gl/4Y4pDk\\u000a\\u000a\".replace(\"%s\", value) +\n                        \"From coroutine:\\u000a\" +\n                        this._stack.split(\"\\n\").slice(1, -7).join(\"\\n\")\n                    )\n                );\n                return;\n            }\n        }\n        maybePromise._then(\n            this._next,\n            this._throw,\n            undefined,\n            this,\n            null\n       );\n    }\n};\n\nPromiseSpawn.prototype._throw = function (reason) {\n    this._promise._attachExtraTrace(reason);\n    this._promise._pushContext();\n    var result = tryCatch(this._generator[\"throw\"])\n        .call(this._generator, reason);\n    this._promise._popContext();\n    this._continue(result);\n};\n\nPromiseSpawn.prototype._next = function (value) {\n    this._promise._pushContext();\n    var result = tryCatch(this._generator.next).call(this._generator, value);\n    this._promise._popContext();\n    this._continue(result);\n};\n\nPromise.coroutine = function (generatorFunction, options) {\n    if (typeof generatorFunction !== \"function\") {\n        throw new TypeError(\"generatorFunction must be a function\\u000a\\u000a    See http://goo.gl/6Vqhm0\\u000a\");\n    }\n    var yieldHandler = Object(options).yieldHandler;\n    var PromiseSpawn$ = PromiseSpawn;\n    var stack = new Error().stack;\n    return function () {\n        var generator = generatorFunction.apply(this, arguments);\n        var spawn = new PromiseSpawn$(undefined, undefined, yieldHandler,\n                                      stack);\n        spawn._generator = generator;\n        spawn._next(undefined);\n        return spawn.promise();\n    };\n};\n\nPromise.coroutine.addYieldHandler = function(fn) {\n    if (typeof fn !== \"function\") throw new TypeError(\"fn must be a function\\u000a\\u000a    See http://goo.gl/916lJJ\\u000a\");\n    yieldHandlers.push(fn);\n};\n\nPromise.spawn = function (generatorFunction) {\n    if (typeof generatorFunction !== \"function\") {\n        return apiRejection(\"generatorFunction must be a function\\u000a\\u000a    See http://goo.gl/6Vqhm0\\u000a\");\n    }\n    var spawn = new PromiseSpawn(generatorFunction, this);\n    var ret = spawn.promise();\n    spawn._run(Promise.spawn);\n    return ret;\n};\n};\n\n},{\"./errors.js\":13,\"./util.js\":38}],18:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports =\nfunction(Promise, PromiseArray, tryConvertToPromise, INTERNAL) {\nvar util = _dereq_(\"./util.js\");\nvar canEvaluate = util.canEvaluate;\nvar tryCatch = util.tryCatch;\nvar errorObj = util.errorObj;\nvar reject;\n\nif (!true) {\nif (canEvaluate) {\n    var thenCallback = function(i) {\n        return new Function(\"value\", \"holder\", \"                             \\n\\\n            'use strict';                                                    \\n\\\n            holder.pIndex = value;                                           \\n\\\n            holder.checkFulfillment(this);                                   \\n\\\n            \".replace(/Index/g, i));\n    };\n\n    var caller = function(count) {\n        var values = [];\n        for (var i = 1; i <= count; ++i) values.push(\"holder.p\" + i);\n        return new Function(\"holder\", \"                                      \\n\\\n            'use strict';                                                    \\n\\\n            var callback = holder.fn;                                        \\n\\\n            return callback(values);                                         \\n\\\n            \".replace(/values/g, values.join(\", \")));\n    };\n    var thenCallbacks = [];\n    var callers = [undefined];\n    for (var i = 1; i <= 5; ++i) {\n        thenCallbacks.push(thenCallback(i));\n        callers.push(caller(i));\n    }\n\n    var Holder = function(total, fn) {\n        this.p1 = this.p2 = this.p3 = this.p4 = this.p5 = null;\n        this.fn = fn;\n        this.total = total;\n        this.now = 0;\n    };\n\n    Holder.prototype.callers = callers;\n    Holder.prototype.checkFulfillment = function(promise) {\n        var now = this.now;\n        now++;\n        var total = this.total;\n        if (now >= total) {\n            var handler = this.callers[total];\n            promise._pushContext();\n            var ret = tryCatch(handler)(this);\n            promise._popContext();\n            if (ret === errorObj) {\n                promise._rejectCallback(ret.e, false, true);\n            } else {\n                promise._resolveCallback(ret);\n            }\n        } else {\n            this.now = now;\n        }\n    };\n\n    var reject = function (reason) {\n        this._reject(reason);\n    };\n}\n}\n\nPromise.join = function () {\n    var last = arguments.length - 1;\n    var fn;\n    if (last > 0 && typeof arguments[last] === \"function\") {\n        fn = arguments[last];\n        if (!true) {\n            if (last < 6 && canEvaluate) {\n                var ret = new Promise(INTERNAL);\n                ret._captureStackTrace();\n                var holder = new Holder(last, fn);\n                var callbacks = thenCallbacks;\n                for (var i = 0; i < last; ++i) {\n                    var maybePromise = tryConvertToPromise(arguments[i], ret);\n                    if (maybePromise instanceof Promise) {\n                        maybePromise = maybePromise._target();\n                        if (maybePromise._isPending()) {\n                            maybePromise._then(callbacks[i], reject,\n                                               undefined, ret, holder);\n                        } else if (maybePromise._isFulfilled()) {\n                            callbacks[i].call(ret,\n                                              maybePromise._value(), holder);\n                        } else {\n                            ret._reject(maybePromise._reason());\n                        }\n                    } else {\n                        callbacks[i].call(ret, maybePromise, holder);\n                    }\n                }\n                return ret;\n            }\n        }\n    }\n    var $_len = arguments.length;var args = new Array($_len); for(var $_i = 0; $_i < $_len; ++$_i) {args[$_i] = arguments[$_i];}\n    if (fn) args.pop();\n    var ret = new PromiseArray(args).promise();\n    return fn !== undefined ? ret.spread(fn) : ret;\n};\n\n};\n\n},{\"./util.js\":38}],19:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise,\n                          PromiseArray,\n                          apiRejection,\n                          tryConvertToPromise,\n                          INTERNAL) {\nvar async = _dereq_(\"./async.js\");\nvar util = _dereq_(\"./util.js\");\nvar tryCatch = util.tryCatch;\nvar errorObj = util.errorObj;\nvar PENDING = {};\nvar EMPTY_ARRAY = [];\n\nfunction MappingPromiseArray(promises, fn, limit, _filter) {\n    this.constructor$(promises);\n    this._promise._captureStackTrace();\n    this._callback = fn;\n    this._preservedValues = _filter === INTERNAL\n        ? new Array(this.length())\n        : null;\n    this._limit = limit;\n    this._inFlight = 0;\n    this._queue = limit >= 1 ? [] : EMPTY_ARRAY;\n    async.invoke(init, this, undefined);\n}\nutil.inherits(MappingPromiseArray, PromiseArray);\nfunction init() {this._init$(undefined, -2);}\n\nMappingPromiseArray.prototype._init = function () {};\n\nMappingPromiseArray.prototype._promiseFulfilled = function (value, index) {\n    var values = this._values;\n    var length = this.length();\n    var preservedValues = this._preservedValues;\n    var limit = this._limit;\n    if (values[index] === PENDING) {\n        values[index] = value;\n        if (limit >= 1) {\n            this._inFlight--;\n            this._drainQueue();\n            if (this._isResolved()) return;\n        }\n    } else {\n        if (limit >= 1 && this._inFlight >= limit) {\n            values[index] = value;\n            this._queue.push(index);\n            return;\n        }\n        if (preservedValues !== null) preservedValues[index] = value;\n\n        var callback = this._callback;\n        var receiver = this._promise._boundTo;\n        this._promise._pushContext();\n        var ret = tryCatch(callback).call(receiver, value, index, length);\n        this._promise._popContext();\n        if (ret === errorObj) return this._reject(ret.e);\n\n        var maybePromise = tryConvertToPromise(ret, this._promise);\n        if (maybePromise instanceof Promise) {\n            maybePromise = maybePromise._target();\n            if (maybePromise._isPending()) {\n                if (limit >= 1) this._inFlight++;\n                values[index] = PENDING;\n                return maybePromise._proxyPromiseArray(this, index);\n            } else if (maybePromise._isFulfilled()) {\n                ret = maybePromise._value();\n            } else {\n                return this._reject(maybePromise._reason());\n            }\n        }\n        values[index] = ret;\n    }\n    var totalResolved = ++this._totalResolved;\n    if (totalResolved >= length) {\n        if (preservedValues !== null) {\n            this._filter(values, preservedValues);\n        } else {\n            this._resolve(values);\n        }\n\n    }\n};\n\nMappingPromiseArray.prototype._drainQueue = function () {\n    var queue = this._queue;\n    var limit = this._limit;\n    var values = this._values;\n    while (queue.length > 0 && this._inFlight < limit) {\n        if (this._isResolved()) return;\n        var index = queue.pop();\n        this._promiseFulfilled(values[index], index);\n    }\n};\n\nMappingPromiseArray.prototype._filter = function (booleans, values) {\n    var len = values.length;\n    var ret = new Array(len);\n    var j = 0;\n    for (var i = 0; i < len; ++i) {\n        if (booleans[i]) ret[j++] = values[i];\n    }\n    ret.length = j;\n    this._resolve(ret);\n};\n\nMappingPromiseArray.prototype.preservedValues = function () {\n    return this._preservedValues;\n};\n\nfunction map(promises, fn, options, _filter) {\n    var limit = typeof options === \"object\" && options !== null\n        ? options.concurrency\n        : 0;\n    limit = typeof limit === \"number\" &&\n        isFinite(limit) && limit >= 1 ? limit : 0;\n    return new MappingPromiseArray(promises, fn, limit, _filter);\n}\n\nPromise.prototype.map = function (fn, options) {\n    if (typeof fn !== \"function\") return apiRejection(\"fn must be a function\\u000a\\u000a    See http://goo.gl/916lJJ\\u000a\");\n\n    return map(this, fn, options, null).promise();\n};\n\nPromise.map = function (promises, fn, options, _filter) {\n    if (typeof fn !== \"function\") return apiRejection(\"fn must be a function\\u000a\\u000a    See http://goo.gl/916lJJ\\u000a\");\n    return map(promises, fn, options, _filter).promise();\n};\n\n\n};\n\n},{\"./async.js\":2,\"./util.js\":38}],20:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports =\nfunction(Promise, INTERNAL, tryConvertToPromise, apiRejection) {\nvar util = _dereq_(\"./util.js\");\nvar tryCatch = util.tryCatch;\n\nPromise.method = function (fn) {\n    if (typeof fn !== \"function\") {\n        throw new Promise.TypeError(\"fn must be a function\\u000a\\u000a    See http://goo.gl/916lJJ\\u000a\");\n    }\n    return function () {\n        var ret = new Promise(INTERNAL);\n        ret._captureStackTrace();\n        ret._pushContext();\n        var value = tryCatch(fn).apply(this, arguments);\n        ret._popContext();\n        ret._resolveFromSyncValue(value);\n        return ret;\n    };\n};\n\nPromise.attempt = Promise[\"try\"] = function (fn, args, ctx) {\n    if (typeof fn !== \"function\") {\n        return apiRejection(\"fn must be a function\\u000a\\u000a    See http://goo.gl/916lJJ\\u000a\");\n    }\n    var ret = new Promise(INTERNAL);\n    ret._captureStackTrace();\n    ret._pushContext();\n    var value = util.isArray(args)\n        ? tryCatch(fn).apply(ctx, args)\n        : tryCatch(fn).call(ctx, args);\n    ret._popContext();\n    ret._resolveFromSyncValue(value);\n    return ret;\n};\n\nPromise.prototype._resolveFromSyncValue = function (value) {\n    if (value === util.errorObj) {\n        this._rejectCallback(value.e, false, true);\n    } else {\n        this._resolveCallback(value, true);\n    }\n};\n};\n\n},{\"./util.js\":38}],21:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise) {\nvar util = _dereq_(\"./util.js\");\nvar async = _dereq_(\"./async.js\");\nvar tryCatch = util.tryCatch;\nvar errorObj = util.errorObj;\n\nfunction spreadAdapter(val, nodeback) {\n    var promise = this;\n    if (!util.isArray(val)) return successAdapter.call(promise, val, nodeback);\n    var ret = tryCatch(nodeback).apply(promise._boundTo, [null].concat(val));\n    if (ret === errorObj) {\n        async.throwLater(ret.e);\n    }\n}\n\nfunction successAdapter(val, nodeback) {\n    var promise = this;\n    var receiver = promise._boundTo;\n    var ret = val === undefined\n        ? tryCatch(nodeback).call(receiver, null)\n        : tryCatch(nodeback).call(receiver, null, val);\n    if (ret === errorObj) {\n        async.throwLater(ret.e);\n    }\n}\nfunction errorAdapter(reason, nodeback) {\n    var promise = this;\n    if (!reason) {\n        var target = promise._target();\n        var newReason = target._getCarriedStackTrace();\n        newReason.cause = reason;\n        reason = newReason;\n    }\n    var ret = tryCatch(nodeback).call(promise._boundTo, reason);\n    if (ret === errorObj) {\n        async.throwLater(ret.e);\n    }\n}\n\nPromise.prototype.asCallback = \nPromise.prototype.nodeify = function (nodeback, options) {\n    if (typeof nodeback == \"function\") {\n        var adapter = successAdapter;\n        if (options !== undefined && Object(options).spread) {\n            adapter = spreadAdapter;\n        }\n        this._then(\n            adapter,\n            errorAdapter,\n            undefined,\n            this,\n            nodeback\n        );\n    }\n    return this;\n};\n};\n\n},{\"./async.js\":2,\"./util.js\":38}],22:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise, PromiseArray) {\nvar util = _dereq_(\"./util.js\");\nvar async = _dereq_(\"./async.js\");\nvar tryCatch = util.tryCatch;\nvar errorObj = util.errorObj;\n\nPromise.prototype.progressed = function (handler) {\n    return this._then(undefined, undefined, handler, undefined, undefined);\n};\n\nPromise.prototype._progress = function (progressValue) {\n    if (this._isFollowingOrFulfilledOrRejected()) return;\n    this._target()._progressUnchecked(progressValue);\n\n};\n\nPromise.prototype._progressHandlerAt = function (index) {\n    return index === 0\n        ? this._progressHandler0\n        : this[(index << 2) + index - 5 + 2];\n};\n\nPromise.prototype._doProgressWith = function (progression) {\n    var progressValue = progression.value;\n    var handler = progression.handler;\n    var promise = progression.promise;\n    var receiver = progression.receiver;\n\n    var ret = tryCatch(handler).call(receiver, progressValue);\n    if (ret === errorObj) {\n        if (ret.e != null &&\n            ret.e.name !== \"StopProgressPropagation\") {\n            var trace = util.canAttachTrace(ret.e)\n                ? ret.e : new Error(util.toString(ret.e));\n            promise._attachExtraTrace(trace);\n            promise._progress(ret.e);\n        }\n    } else if (ret instanceof Promise) {\n        ret._then(promise._progress, null, null, promise, undefined);\n    } else {\n        promise._progress(ret);\n    }\n};\n\n\nPromise.prototype._progressUnchecked = function (progressValue) {\n    var len = this._length();\n    var progress = this._progress;\n    for (var i = 0; i < len; i++) {\n        var handler = this._progressHandlerAt(i);\n        var promise = this._promiseAt(i);\n        if (!(promise instanceof Promise)) {\n            var receiver = this._receiverAt(i);\n            if (typeof handler === \"function\") {\n                handler.call(receiver, progressValue, promise);\n            } else if (receiver instanceof PromiseArray &&\n                       !receiver._isResolved()) {\n                receiver._promiseProgressed(progressValue, promise);\n            }\n            continue;\n        }\n\n        if (typeof handler === \"function\") {\n            async.invoke(this._doProgressWith, this, {\n                handler: handler,\n                promise: promise,\n                receiver: this._receiverAt(i),\n                value: progressValue\n            });\n        } else {\n            async.invoke(progress, promise, progressValue);\n        }\n    }\n};\n};\n\n},{\"./async.js\":2,\"./util.js\":38}],23:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function() {\nvar makeSelfResolutionError = function () {\n    return new TypeError(\"circular promise resolution chain\\u000a\\u000a    See http://goo.gl/LhFpo0\\u000a\");\n};\nvar reflect = function() {\n    return new Promise.PromiseInspection(this._target());\n};\nvar apiRejection = function(msg) {\n    return Promise.reject(new TypeError(msg));\n};\nvar util = _dereq_(\"./util.js\");\nvar async = _dereq_(\"./async.js\");\nvar errors = _dereq_(\"./errors.js\");\nvar TypeError = Promise.TypeError = errors.TypeError;\nPromise.RangeError = errors.RangeError;\nPromise.CancellationError = errors.CancellationError;\nPromise.TimeoutError = errors.TimeoutError;\nPromise.OperationalError = errors.OperationalError;\nPromise.RejectionError = errors.OperationalError;\nPromise.AggregateError = errors.AggregateError;\nvar INTERNAL = function(){};\nvar APPLY = {};\nvar NEXT_FILTER = {e: null};\nvar tryConvertToPromise = _dereq_(\"./thenables.js\")(Promise, INTERNAL);\nvar PromiseArray =\n    _dereq_(\"./promise_array.js\")(Promise, INTERNAL,\n                                    tryConvertToPromise, apiRejection);\nvar CapturedTrace = _dereq_(\"./captured_trace.js\")();\nvar isDebugging = _dereq_(\"./debuggability.js\")(Promise, CapturedTrace);\n /*jshint unused:false*/\nvar createContext =\n    _dereq_(\"./context.js\")(Promise, CapturedTrace, isDebugging);\nvar CatchFilter = _dereq_(\"./catch_filter.js\")(NEXT_FILTER);\nvar PromiseResolver = _dereq_(\"./promise_resolver.js\");\nvar nodebackForPromise = PromiseResolver._nodebackForPromise;\nvar errorObj = util.errorObj;\nvar tryCatch = util.tryCatch;\nfunction Promise(resolver) {\n    if (typeof resolver !== \"function\") {\n        throw new TypeError(\"the promise constructor requires a resolver function\\u000a\\u000a    See http://goo.gl/EC22Yn\\u000a\");\n    }\n    if (this.constructor !== Promise) {\n        throw new TypeError(\"the promise constructor cannot be invoked directly\\u000a\\u000a    See http://goo.gl/KsIlge\\u000a\");\n    }\n    this._bitField = 0;\n    this._fulfillmentHandler0 = undefined;\n    this._rejectionHandler0 = undefined;\n    this._progressHandler0 = undefined;\n    this._promise0 = undefined;\n    this._receiver0 = undefined;\n    this._settledValue = undefined;\n    if (resolver !== INTERNAL) this._resolveFromResolver(resolver);\n}\n\nPromise.prototype.toString = function () {\n    return \"[object Promise]\";\n};\n\nPromise.prototype.caught = Promise.prototype[\"catch\"] = function (fn) {\n    var len = arguments.length;\n    if (len > 1) {\n        var catchInstances = new Array(len - 1),\n            j = 0, i;\n        for (i = 0; i < len - 1; ++i) {\n            var item = arguments[i];\n            if (typeof item === \"function\") {\n                catchInstances[j++] = item;\n            } else {\n                return Promise.reject(\n                    new TypeError(\"Catch filter must inherit from Error or be a simple predicate function\\u000a\\u000a    See http://goo.gl/o84o68\\u000a\"));\n            }\n        }\n        catchInstances.length = j;\n        fn = arguments[i];\n        var catchFilter = new CatchFilter(catchInstances, fn, this);\n        return this._then(undefined, catchFilter.doFilter, undefined,\n            catchFilter, undefined);\n    }\n    return this._then(undefined, fn, undefined, undefined, undefined);\n};\n\nPromise.prototype.reflect = function () {\n    return this._then(reflect, reflect, undefined, this, undefined);\n};\n\nPromise.prototype.then = function (didFulfill, didReject, didProgress) {\n    if (isDebugging() && arguments.length > 0 &&\n        typeof didFulfill !== \"function\" &&\n        typeof didReject !== \"function\") {\n        var msg = \".then() only accepts functions but was passed: \" +\n                util.classString(didFulfill);\n        if (arguments.length > 1) {\n            msg += \", \" + util.classString(didReject);\n        }\n        this._warn(msg);\n    }\n    return this._then(didFulfill, didReject, didProgress,\n        undefined, undefined);\n};\n\nPromise.prototype.done = function (didFulfill, didReject, didProgress) {\n    var promise = this._then(didFulfill, didReject, didProgress,\n        undefined, undefined);\n    promise._setIsFinal();\n};\n\nPromise.prototype.spread = function (didFulfill, didReject) {\n    return this.all()._then(didFulfill, didReject, undefined, APPLY, undefined);\n};\n\nPromise.prototype.isCancellable = function () {\n    return !this.isResolved() &&\n        this._cancellable();\n};\n\nPromise.prototype.toJSON = function () {\n    var ret = {\n        isFulfilled: false,\n        isRejected: false,\n        fulfillmentValue: undefined,\n        rejectionReason: undefined\n    };\n    if (this.isFulfilled()) {\n        ret.fulfillmentValue = this.value();\n        ret.isFulfilled = true;\n    } else if (this.isRejected()) {\n        ret.rejectionReason = this.reason();\n        ret.isRejected = true;\n    }\n    return ret;\n};\n\nPromise.prototype.all = function () {\n    return new PromiseArray(this).promise();\n};\n\nPromise.prototype.error = function (fn) {\n    return this.caught(util.originatesFromRejection, fn);\n};\n\nPromise.is = function (val) {\n    return val instanceof Promise;\n};\n\nPromise.fromNode = function(fn) {\n    var ret = new Promise(INTERNAL);\n    var result = tryCatch(fn)(nodebackForPromise(ret));\n    if (result === errorObj) {\n        ret._rejectCallback(result.e, true, true);\n    }\n    return ret;\n};\n\nPromise.all = function (promises) {\n    return new PromiseArray(promises).promise();\n};\n\nPromise.defer = Promise.pending = function () {\n    var promise = new Promise(INTERNAL);\n    return new PromiseResolver(promise);\n};\n\nPromise.cast = function (obj) {\n    var ret = tryConvertToPromise(obj);\n    if (!(ret instanceof Promise)) {\n        var val = ret;\n        ret = new Promise(INTERNAL);\n        ret._fulfillUnchecked(val);\n    }\n    return ret;\n};\n\nPromise.resolve = Promise.fulfilled = Promise.cast;\n\nPromise.reject = Promise.rejected = function (reason) {\n    var ret = new Promise(INTERNAL);\n    ret._captureStackTrace();\n    ret._rejectCallback(reason, true);\n    return ret;\n};\n\nPromise.setScheduler = function(fn) {\n    if (typeof fn !== \"function\") throw new TypeError(\"fn must be a function\\u000a\\u000a    See http://goo.gl/916lJJ\\u000a\");\n    var prev = async._schedule;\n    async._schedule = fn;\n    return prev;\n};\n\nPromise.prototype._then = function (\n    didFulfill,\n    didReject,\n    didProgress,\n    receiver,\n    internalData\n) {\n    var haveInternalData = internalData !== undefined;\n    var ret = haveInternalData ? internalData : new Promise(INTERNAL);\n\n    if (!haveInternalData) {\n        ret._propagateFrom(this, 4 | 1);\n        ret._captureStackTrace();\n    }\n\n    var target = this._target();\n    if (target !== this) {\n        if (receiver === undefined) receiver = this._boundTo;\n        if (!haveInternalData) ret._setIsMigrated();\n    }\n\n    var callbackIndex =\n        target._addCallbacks(didFulfill, didReject, didProgress, ret, receiver);\n\n    if (target._isResolved() && !target._isSettlePromisesQueued()) {\n        async.invoke(\n            target._settlePromiseAtPostResolution, target, callbackIndex);\n    }\n\n    return ret;\n};\n\nPromise.prototype._settlePromiseAtPostResolution = function (index) {\n    if (this._isRejectionUnhandled()) this._unsetRejectionIsUnhandled();\n    this._settlePromiseAt(index);\n};\n\nPromise.prototype._length = function () {\n    return this._bitField & 131071;\n};\n\nPromise.prototype._isFollowingOrFulfilledOrRejected = function () {\n    return (this._bitField & 939524096) > 0;\n};\n\nPromise.prototype._isFollowing = function () {\n    return (this._bitField & 536870912) === 536870912;\n};\n\nPromise.prototype._setLength = function (len) {\n    this._bitField = (this._bitField & -131072) |\n        (len & 131071);\n};\n\nPromise.prototype._setFulfilled = function () {\n    this._bitField = this._bitField | 268435456;\n};\n\nPromise.prototype._setRejected = function () {\n    this._bitField = this._bitField | 134217728;\n};\n\nPromise.prototype._setFollowing = function () {\n    this._bitField = this._bitField | 536870912;\n};\n\nPromise.prototype._setIsFinal = function () {\n    this._bitField = this._bitField | 33554432;\n};\n\nPromise.prototype._isFinal = function () {\n    return (this._bitField & 33554432) > 0;\n};\n\nPromise.prototype._cancellable = function () {\n    return (this._bitField & 67108864) > 0;\n};\n\nPromise.prototype._setCancellable = function () {\n    this._bitField = this._bitField | 67108864;\n};\n\nPromise.prototype._unsetCancellable = function () {\n    this._bitField = this._bitField & (~67108864);\n};\n\nPromise.prototype._setIsMigrated = function () {\n    this._bitField = this._bitField | 4194304;\n};\n\nPromise.prototype._unsetIsMigrated = function () {\n    this._bitField = this._bitField & (~4194304);\n};\n\nPromise.prototype._isMigrated = function () {\n    return (this._bitField & 4194304) > 0;\n};\n\nPromise.prototype._receiverAt = function (index) {\n    var ret = index === 0\n        ? this._receiver0\n        : this[\n            index * 5 - 5 + 4];\n    if (ret === undefined && this._isBound()) {\n        return this._boundTo;\n    }\n    return ret;\n};\n\nPromise.prototype._promiseAt = function (index) {\n    return index === 0\n        ? this._promise0\n        : this[index * 5 - 5 + 3];\n};\n\nPromise.prototype._fulfillmentHandlerAt = function (index) {\n    return index === 0\n        ? this._fulfillmentHandler0\n        : this[index * 5 - 5 + 0];\n};\n\nPromise.prototype._rejectionHandlerAt = function (index) {\n    return index === 0\n        ? this._rejectionHandler0\n        : this[index * 5 - 5 + 1];\n};\n\nPromise.prototype._migrateCallbacks = function (follower, index) {\n    var fulfill = follower._fulfillmentHandlerAt(index);\n    var reject = follower._rejectionHandlerAt(index);\n    var progress = follower._progressHandlerAt(index);\n    var promise = follower._promiseAt(index);\n    var receiver = follower._receiverAt(index);\n    if (promise instanceof Promise) promise._setIsMigrated();\n    this._addCallbacks(fulfill, reject, progress, promise, receiver);\n};\n\nPromise.prototype._addCallbacks = function (\n    fulfill,\n    reject,\n    progress,\n    promise,\n    receiver\n) {\n    var index = this._length();\n\n    if (index >= 131071 - 5) {\n        index = 0;\n        this._setLength(0);\n    }\n\n    if (index === 0) {\n        this._promise0 = promise;\n        if (receiver !== undefined) this._receiver0 = receiver;\n        if (typeof fulfill === \"function\" && !this._isCarryingStackTrace())\n            this._fulfillmentHandler0 = fulfill;\n        if (typeof reject === \"function\") this._rejectionHandler0 = reject;\n        if (typeof progress === \"function\") this._progressHandler0 = progress;\n    } else {\n        var base = index * 5 - 5;\n        this[base + 3] = promise;\n        this[base + 4] = receiver;\n        if (typeof fulfill === \"function\")\n            this[base + 0] = fulfill;\n        if (typeof reject === \"function\")\n            this[base + 1] = reject;\n        if (typeof progress === \"function\")\n            this[base + 2] = progress;\n    }\n    this._setLength(index + 1);\n    return index;\n};\n\nPromise.prototype._setProxyHandlers = function (receiver, promiseSlotValue) {\n    var index = this._length();\n\n    if (index >= 131071 - 5) {\n        index = 0;\n        this._setLength(0);\n    }\n    if (index === 0) {\n        this._promise0 = promiseSlotValue;\n        this._receiver0 = receiver;\n    } else {\n        var base = index * 5 - 5;\n        this[base + 3] = promiseSlotValue;\n        this[base + 4] = receiver;\n    }\n    this._setLength(index + 1);\n};\n\nPromise.prototype._proxyPromiseArray = function (promiseArray, index) {\n    this._setProxyHandlers(promiseArray, index);\n};\n\nPromise.prototype._resolveCallback = function(value, shouldBind) {\n    if (this._isFollowingOrFulfilledOrRejected()) return;\n    if (value === this)\n        return this._rejectCallback(makeSelfResolutionError(), false, true);\n    var maybePromise = tryConvertToPromise(value, this);\n    if (!(maybePromise instanceof Promise)) return this._fulfill(value);\n\n    var propagationFlags = 1 | (shouldBind ? 4 : 0);\n    this._propagateFrom(maybePromise, propagationFlags);\n    var promise = maybePromise._target();\n    if (promise._isPending()) {\n        var len = this._length();\n        for (var i = 0; i < len; ++i) {\n            promise._migrateCallbacks(this, i);\n        }\n        this._setFollowing();\n        this._setLength(0);\n        this._setFollowee(promise);\n    } else if (promise._isFulfilled()) {\n        this._fulfillUnchecked(promise._value());\n    } else {\n        this._rejectUnchecked(promise._reason(),\n            promise._getCarriedStackTrace());\n    }\n};\n\nPromise.prototype._rejectCallback =\nfunction(reason, synchronous, shouldNotMarkOriginatingFromRejection) {\n    if (!shouldNotMarkOriginatingFromRejection) {\n        util.markAsOriginatingFromRejection(reason);\n    }\n    var trace = util.ensureErrorObject(reason);\n    var hasStack = trace === reason;\n    this._attachExtraTrace(trace, synchronous ? hasStack : false);\n    this._reject(reason, hasStack ? undefined : trace);\n};\n\nPromise.prototype._resolveFromResolver = function (resolver) {\n    var promise = this;\n    this._captureStackTrace();\n    this._pushContext();\n    var synchronous = true;\n    var r = tryCatch(resolver)(function(value) {\n        if (promise === null) return;\n        promise._resolveCallback(value);\n        promise = null;\n    }, function (reason) {\n        if (promise === null) return;\n        promise._rejectCallback(reason, synchronous);\n        promise = null;\n    });\n    synchronous = false;\n    this._popContext();\n\n    if (r !== undefined && r === errorObj && promise !== null) {\n        promise._rejectCallback(r.e, true, true);\n        promise = null;\n    }\n};\n\nPromise.prototype._settlePromiseFromHandler = function (\n    handler, receiver, value, promise\n) {\n    if (promise._isRejected()) return;\n    promise._pushContext();\n    var x;\n    if (receiver === APPLY && !this._isRejected()) {\n        x = tryCatch(handler).apply(this._boundTo, value);\n    } else {\n        x = tryCatch(handler).call(receiver, value);\n    }\n    promise._popContext();\n\n    if (x === errorObj || x === promise || x === NEXT_FILTER) {\n        var err = x === promise ? makeSelfResolutionError() : x.e;\n        promise._rejectCallback(err, false, true);\n    } else {\n        promise._resolveCallback(x);\n    }\n};\n\nPromise.prototype._target = function() {\n    var ret = this;\n    while (ret._isFollowing()) ret = ret._followee();\n    return ret;\n};\n\nPromise.prototype._followee = function() {\n    return this._rejectionHandler0;\n};\n\nPromise.prototype._setFollowee = function(promise) {\n    this._rejectionHandler0 = promise;\n};\n\nPromise.prototype._cleanValues = function () {\n    if (this._cancellable()) {\n        this._cancellationParent = undefined;\n    }\n};\n\nPromise.prototype._propagateFrom = function (parent, flags) {\n    if ((flags & 1) > 0 && parent._cancellable()) {\n        this._setCancellable();\n        this._cancellationParent = parent;\n    }\n    if ((flags & 4) > 0 && parent._isBound()) {\n        this._setBoundTo(parent._boundTo);\n    }\n};\n\nPromise.prototype._fulfill = function (value) {\n    if (this._isFollowingOrFulfilledOrRejected()) return;\n    this._fulfillUnchecked(value);\n};\n\nPromise.prototype._reject = function (reason, carriedStackTrace) {\n    if (this._isFollowingOrFulfilledOrRejected()) return;\n    this._rejectUnchecked(reason, carriedStackTrace);\n};\n\nPromise.prototype._settlePromiseAt = function (index) {\n    var promise = this._promiseAt(index);\n    var isPromise = promise instanceof Promise;\n\n    if (isPromise && promise._isMigrated()) {\n        promise._unsetIsMigrated();\n        return async.invoke(this._settlePromiseAt, this, index);\n    }\n    var handler = this._isFulfilled()\n        ? this._fulfillmentHandlerAt(index)\n        : this._rejectionHandlerAt(index);\n\n    var carriedStackTrace =\n        this._isCarryingStackTrace() ? this._getCarriedStackTrace() : undefined;\n    var value = this._settledValue;\n    var receiver = this._receiverAt(index);\n\n\n    this._clearCallbackDataAtIndex(index);\n\n    if (typeof handler === \"function\") {\n        if (!isPromise) {\n            handler.call(receiver, value, promise);\n        } else {\n            this._settlePromiseFromHandler(handler, receiver, value, promise);\n        }\n    } else if (receiver instanceof PromiseArray) {\n        if (!receiver._isResolved()) {\n            if (this._isFulfilled()) {\n                receiver._promiseFulfilled(value, promise);\n            }\n            else {\n                receiver._promiseRejected(value, promise);\n            }\n        }\n    } else if (isPromise) {\n        if (this._isFulfilled()) {\n            promise._fulfill(value);\n        } else {\n            promise._reject(value, carriedStackTrace);\n        }\n    }\n\n    if (index >= 4 && (index & 31) === 4)\n        async.invokeLater(this._setLength, this, 0);\n};\n\nPromise.prototype._clearCallbackDataAtIndex = function(index) {\n    if (index === 0) {\n        if (!this._isCarryingStackTrace()) {\n            this._fulfillmentHandler0 = undefined;\n        }\n        this._rejectionHandler0 =\n        this._progressHandler0 =\n        this._receiver0 =\n        this._promise0 = undefined;\n    } else {\n        var base = index * 5 - 5;\n        this[base + 3] =\n        this[base + 4] =\n        this[base + 0] =\n        this[base + 1] =\n        this[base + 2] = undefined;\n    }\n};\n\nPromise.prototype._isSettlePromisesQueued = function () {\n    return (this._bitField &\n            -1073741824) === -1073741824;\n};\n\nPromise.prototype._setSettlePromisesQueued = function () {\n    this._bitField = this._bitField | -1073741824;\n};\n\nPromise.prototype._unsetSettlePromisesQueued = function () {\n    this._bitField = this._bitField & (~-1073741824);\n};\n\nPromise.prototype._queueSettlePromises = function() {\n    async.settlePromises(this);\n    this._setSettlePromisesQueued();\n};\n\nPromise.prototype._fulfillUnchecked = function (value) {\n    if (value === this) {\n        var err = makeSelfResolutionError();\n        this._attachExtraTrace(err);\n        return this._rejectUnchecked(err, undefined);\n    }\n    this._setFulfilled();\n    this._settledValue = value;\n    this._cleanValues();\n\n    if (this._length() > 0) {\n        this._queueSettlePromises();\n    }\n};\n\nPromise.prototype._rejectUncheckedCheckError = function (reason) {\n    var trace = util.ensureErrorObject(reason);\n    this._rejectUnchecked(reason, trace === reason ? undefined : trace);\n};\n\nPromise.prototype._rejectUnchecked = function (reason, trace) {\n    if (reason === this) {\n        var err = makeSelfResolutionError();\n        this._attachExtraTrace(err);\n        return this._rejectUnchecked(err);\n    }\n    this._setRejected();\n    this._settledValue = reason;\n    this._cleanValues();\n\n    if (this._isFinal()) {\n        async.throwLater(function(e) {\n            if (\"stack\" in e) {\n                async.invokeFirst(\n                    CapturedTrace.unhandledRejection, undefined, e);\n            }\n            throw e;\n        }, trace === undefined ? reason : trace);\n        return;\n    }\n\n    if (trace !== undefined && trace !== reason) {\n        this._setCarriedStackTrace(trace);\n    }\n\n    if (this._length() > 0) {\n        this._queueSettlePromises();\n    } else {\n        this._ensurePossibleRejectionHandled();\n    }\n};\n\nPromise.prototype._settlePromises = function () {\n    this._unsetSettlePromisesQueued();\n    var len = this._length();\n    for (var i = 0; i < len; i++) {\n        this._settlePromiseAt(i);\n    }\n};\n\nPromise._makeSelfResolutionError = makeSelfResolutionError;\n_dereq_(\"./progress.js\")(Promise, PromiseArray);\n_dereq_(\"./method.js\")(Promise, INTERNAL, tryConvertToPromise, apiRejection);\n_dereq_(\"./bind.js\")(Promise, INTERNAL, tryConvertToPromise);\n_dereq_(\"./finally.js\")(Promise, NEXT_FILTER, tryConvertToPromise);\n_dereq_(\"./direct_resolve.js\")(Promise);\n_dereq_(\"./synchronous_inspection.js\")(Promise);\n_dereq_(\"./join.js\")(Promise, PromiseArray, tryConvertToPromise, INTERNAL);\nPromise.Promise = Promise;\n_dereq_('./map.js')(Promise, PromiseArray, apiRejection, tryConvertToPromise, INTERNAL);\n_dereq_('./cancel.js')(Promise);\n_dereq_('./using.js')(Promise, apiRejection, tryConvertToPromise, createContext);\n_dereq_('./generators.js')(Promise, apiRejection, INTERNAL, tryConvertToPromise);\n_dereq_('./nodeify.js')(Promise);\n_dereq_('./call_get.js')(Promise);\n_dereq_('./props.js')(Promise, PromiseArray, tryConvertToPromise, apiRejection);\n_dereq_('./race.js')(Promise, INTERNAL, tryConvertToPromise, apiRejection);\n_dereq_('./reduce.js')(Promise, PromiseArray, apiRejection, tryConvertToPromise, INTERNAL);\n_dereq_('./settle.js')(Promise, PromiseArray);\n_dereq_('./some.js')(Promise, PromiseArray, apiRejection);\n_dereq_('./promisify.js')(Promise, INTERNAL);\n_dereq_('./any.js')(Promise);\n_dereq_('./each.js')(Promise, INTERNAL);\n_dereq_('./timers.js')(Promise, INTERNAL);\n_dereq_('./filter.js')(Promise, INTERNAL);\n                                                         \n    util.toFastProperties(Promise);                                          \n    util.toFastProperties(Promise.prototype);                                \n    function fillTypes(value) {                                              \n        var p = new Promise(INTERNAL);                                       \n        p._fulfillmentHandler0 = value;                                      \n        p._rejectionHandler0 = value;                                        \n        p._progressHandler0 = value;                                         \n        p._promise0 = value;                                                 \n        p._receiver0 = value;                                                \n        p._settledValue = value;                                             \n    }                                                                        \n    // Complete slack tracking, opt out of field-type tracking and           \n    // stabilize map                                                         \n    fillTypes({a: 1});                                                       \n    fillTypes({b: 2});                                                       \n    fillTypes({c: 3});                                                       \n    fillTypes(1);                                                            \n    fillTypes(function(){});                                                 \n    fillTypes(undefined);                                                    \n    fillTypes(false);                                                        \n    fillTypes(new Promise(INTERNAL));                                        \n    CapturedTrace.setBounds(async.firstLineError, util.lastLineError);       \n    return Promise;                                                          \n\n};\n\n},{\"./any.js\":1,\"./async.js\":2,\"./bind.js\":3,\"./call_get.js\":5,\"./cancel.js\":6,\"./captured_trace.js\":7,\"./catch_filter.js\":8,\"./context.js\":9,\"./debuggability.js\":10,\"./direct_resolve.js\":11,\"./each.js\":12,\"./errors.js\":13,\"./filter.js\":15,\"./finally.js\":16,\"./generators.js\":17,\"./join.js\":18,\"./map.js\":19,\"./method.js\":20,\"./nodeify.js\":21,\"./progress.js\":22,\"./promise_array.js\":24,\"./promise_resolver.js\":25,\"./promisify.js\":26,\"./props.js\":27,\"./race.js\":29,\"./reduce.js\":30,\"./settle.js\":32,\"./some.js\":33,\"./synchronous_inspection.js\":34,\"./thenables.js\":35,\"./timers.js\":36,\"./using.js\":37,\"./util.js\":38}],24:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise, INTERNAL, tryConvertToPromise,\n    apiRejection) {\nvar util = _dereq_(\"./util.js\");\nvar isArray = util.isArray;\n\nfunction toResolutionValue(val) {\n    switch(val) {\n    case -2: return [];\n    case -3: return {};\n    }\n}\n\nfunction PromiseArray(values) {\n    var promise = this._promise = new Promise(INTERNAL);\n    var parent;\n    if (values instanceof Promise) {\n        parent = values;\n        promise._propagateFrom(parent, 1 | 4);\n    }\n    this._values = values;\n    this._length = 0;\n    this._totalResolved = 0;\n    this._init(undefined, -2);\n}\nPromiseArray.prototype.length = function () {\n    return this._length;\n};\n\nPromiseArray.prototype.promise = function () {\n    return this._promise;\n};\n\nPromiseArray.prototype._init = function init(_, resolveValueIfEmpty) {\n    var values = tryConvertToPromise(this._values, this._promise);\n    if (values instanceof Promise) {\n        values = values._target();\n        this._values = values;\n        if (values._isFulfilled()) {\n            values = values._value();\n            if (!isArray(values)) {\n                var err = new Promise.TypeError(\"expecting an array, a promise or a thenable\\u000a\\u000a    See http://goo.gl/s8MMhc\\u000a\");\n                this.__hardReject__(err);\n                return;\n            }\n        } else if (values._isPending()) {\n            values._then(\n                init,\n                this._reject,\n                undefined,\n                this,\n                resolveValueIfEmpty\n           );\n            return;\n        } else {\n            this._reject(values._reason());\n            return;\n        }\n    } else if (!isArray(values)) {\n        this._promise._reject(apiRejection(\"expecting an array, a promise or a thenable\\u000a\\u000a    See http://goo.gl/s8MMhc\\u000a\")._reason());\n        return;\n    }\n\n    if (values.length === 0) {\n        if (resolveValueIfEmpty === -5) {\n            this._resolveEmptyArray();\n        }\n        else {\n            this._resolve(toResolutionValue(resolveValueIfEmpty));\n        }\n        return;\n    }\n    var len = this.getActualLength(values.length);\n    this._length = len;\n    this._values = this.shouldCopyValues() ? new Array(len) : this._values;\n    var promise = this._promise;\n    for (var i = 0; i < len; ++i) {\n        var isResolved = this._isResolved();\n        var maybePromise = tryConvertToPromise(values[i], promise);\n        if (maybePromise instanceof Promise) {\n            maybePromise = maybePromise._target();\n            if (isResolved) {\n                maybePromise._unsetRejectionIsUnhandled();\n            } else if (maybePromise._isPending()) {\n                maybePromise._proxyPromiseArray(this, i);\n            } else if (maybePromise._isFulfilled()) {\n                this._promiseFulfilled(maybePromise._value(), i);\n            } else {\n                this._promiseRejected(maybePromise._reason(), i);\n            }\n        } else if (!isResolved) {\n            this._promiseFulfilled(maybePromise, i);\n        }\n    }\n};\n\nPromiseArray.prototype._isResolved = function () {\n    return this._values === null;\n};\n\nPromiseArray.prototype._resolve = function (value) {\n    this._values = null;\n    this._promise._fulfill(value);\n};\n\nPromiseArray.prototype.__hardReject__ =\nPromiseArray.prototype._reject = function (reason) {\n    this._values = null;\n    this._promise._rejectCallback(reason, false, true);\n};\n\nPromiseArray.prototype._promiseProgressed = function (progressValue, index) {\n    this._promise._progress({\n        index: index,\n        value: progressValue\n    });\n};\n\n\nPromiseArray.prototype._promiseFulfilled = function (value, index) {\n    this._values[index] = value;\n    var totalResolved = ++this._totalResolved;\n    if (totalResolved >= this._length) {\n        this._resolve(this._values);\n    }\n};\n\nPromiseArray.prototype._promiseRejected = function (reason, index) {\n    this._totalResolved++;\n    this._reject(reason);\n};\n\nPromiseArray.prototype.shouldCopyValues = function () {\n    return true;\n};\n\nPromiseArray.prototype.getActualLength = function (len) {\n    return len;\n};\n\nreturn PromiseArray;\n};\n\n},{\"./util.js\":38}],25:[function(_dereq_,module,exports){\n\"use strict\";\nvar util = _dereq_(\"./util.js\");\nvar maybeWrapAsError = util.maybeWrapAsError;\nvar errors = _dereq_(\"./errors.js\");\nvar TimeoutError = errors.TimeoutError;\nvar OperationalError = errors.OperationalError;\nvar haveGetters = util.haveGetters;\nvar es5 = _dereq_(\"./es5.js\");\n\nfunction isUntypedError(obj) {\n    return obj instanceof Error &&\n        es5.getPrototypeOf(obj) === Error.prototype;\n}\n\nvar rErrorKey = /^(?:name|message|stack|cause)$/;\nfunction wrapAsOperationalError(obj) {\n    var ret;\n    if (isUntypedError(obj)) {\n        ret = new OperationalError(obj);\n        ret.name = obj.name;\n        ret.message = obj.message;\n        ret.stack = obj.stack;\n        var keys = es5.keys(obj);\n        for (var i = 0; i < keys.length; ++i) {\n            var key = keys[i];\n            if (!rErrorKey.test(key)) {\n                ret[key] = obj[key];\n            }\n        }\n        return ret;\n    }\n    util.markAsOriginatingFromRejection(obj);\n    return obj;\n}\n\nfunction nodebackForPromise(promise) {\n    return function(err, value) {\n        if (promise === null) return;\n\n        if (err) {\n            var wrapped = wrapAsOperationalError(maybeWrapAsError(err));\n            promise._attachExtraTrace(wrapped);\n            promise._reject(wrapped);\n        } else if (arguments.length > 2) {\n            var $_len = arguments.length;var args = new Array($_len - 1); for(var $_i = 1; $_i < $_len; ++$_i) {args[$_i - 1] = arguments[$_i];}\n            promise._fulfill(args);\n        } else {\n            promise._fulfill(value);\n        }\n\n        promise = null;\n    };\n}\n\n\nvar PromiseResolver;\nif (!haveGetters) {\n    PromiseResolver = function (promise) {\n        this.promise = promise;\n        this.asCallback = nodebackForPromise(promise);\n        this.callback = this.asCallback;\n    };\n}\nelse {\n    PromiseResolver = function (promise) {\n        this.promise = promise;\n    };\n}\nif (haveGetters) {\n    var prop = {\n        get: function() {\n            return nodebackForPromise(this.promise);\n        }\n    };\n    es5.defineProperty(PromiseResolver.prototype, \"asCallback\", prop);\n    es5.defineProperty(PromiseResolver.prototype, \"callback\", prop);\n}\n\nPromiseResolver._nodebackForPromise = nodebackForPromise;\n\nPromiseResolver.prototype.toString = function () {\n    return \"[object PromiseResolver]\";\n};\n\nPromiseResolver.prototype.resolve =\nPromiseResolver.prototype.fulfill = function (value) {\n    if (!(this instanceof PromiseResolver)) {\n        throw new TypeError(\"Illegal invocation, resolver resolve/reject must be called within a resolver context. Consider using the promise constructor instead.\\u000a\\u000a    See http://goo.gl/sdkXL9\\u000a\");\n    }\n    this.promise._resolveCallback(value);\n};\n\nPromiseResolver.prototype.reject = function (reason) {\n    if (!(this instanceof PromiseResolver)) {\n        throw new TypeError(\"Illegal invocation, resolver resolve/reject must be called within a resolver context. Consider using the promise constructor instead.\\u000a\\u000a    See http://goo.gl/sdkXL9\\u000a\");\n    }\n    this.promise._rejectCallback(reason);\n};\n\nPromiseResolver.prototype.progress = function (value) {\n    if (!(this instanceof PromiseResolver)) {\n        throw new TypeError(\"Illegal invocation, resolver resolve/reject must be called within a resolver context. Consider using the promise constructor instead.\\u000a\\u000a    See http://goo.gl/sdkXL9\\u000a\");\n    }\n    this.promise._progress(value);\n};\n\nPromiseResolver.prototype.cancel = function (err) {\n    this.promise.cancel(err);\n};\n\nPromiseResolver.prototype.timeout = function () {\n    this.reject(new TimeoutError(\"timeout\"));\n};\n\nPromiseResolver.prototype.isResolved = function () {\n    return this.promise.isResolved();\n};\n\nPromiseResolver.prototype.toJSON = function () {\n    return this.promise.toJSON();\n};\n\nmodule.exports = PromiseResolver;\n\n},{\"./errors.js\":13,\"./es5.js\":14,\"./util.js\":38}],26:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise, INTERNAL) {\nvar THIS = {};\nvar util = _dereq_(\"./util.js\");\nvar nodebackForPromise = _dereq_(\"./promise_resolver.js\")\n    ._nodebackForPromise;\nvar withAppended = util.withAppended;\nvar maybeWrapAsError = util.maybeWrapAsError;\nvar canEvaluate = util.canEvaluate;\nvar TypeError = _dereq_(\"./errors\").TypeError;\nvar defaultSuffix = \"Async\";\nvar defaultPromisified = {__isPromisified__: true};\nvar noCopyPropsPattern =\n    /^(?:length|name|arguments|caller|prototype|__isPromisified__)$/;\nvar defaultFilter = function(name, func) {\n    return util.isIdentifier(name) &&\n        name.charAt(0) !== \"_\" &&\n        !util.isClass(func);\n};\n\nfunction propsFilter(key) {\n    return !noCopyPropsPattern.test(key);\n}\n\nfunction isPromisified(fn) {\n    try {\n        return fn.__isPromisified__ === true;\n    }\n    catch (e) {\n        return false;\n    }\n}\n\nfunction hasPromisified(obj, key, suffix) {\n    var val = util.getDataPropertyOrDefault(obj, key + suffix,\n                                            defaultPromisified);\n    return val ? isPromisified(val) : false;\n}\nfunction checkValid(ret, suffix, suffixRegexp) {\n    for (var i = 0; i < ret.length; i += 2) {\n        var key = ret[i];\n        if (suffixRegexp.test(key)) {\n            var keyWithoutAsyncSuffix = key.replace(suffixRegexp, \"\");\n            for (var j = 0; j < ret.length; j += 2) {\n                if (ret[j] === keyWithoutAsyncSuffix) {\n                    throw new TypeError(\"Cannot promisify an API that has normal methods with '%s'-suffix\\u000a\\u000a    See http://goo.gl/iWrZbw\\u000a\"\n                        .replace(\"%s\", suffix));\n                }\n            }\n        }\n    }\n}\n\nfunction promisifiableMethods(obj, suffix, suffixRegexp, filter) {\n    var keys = util.inheritedDataKeys(obj);\n    var ret = [];\n    for (var i = 0; i < keys.length; ++i) {\n        var key = keys[i];\n        var value = obj[key];\n        var passesDefaultFilter = filter === defaultFilter\n            ? true : defaultFilter(key, value, obj);\n        if (typeof value === \"function\" &&\n            !isPromisified(value) &&\n            !hasPromisified(obj, key, suffix) &&\n            filter(key, value, obj, passesDefaultFilter)) {\n            ret.push(key, value);\n        }\n    }\n    checkValid(ret, suffix, suffixRegexp);\n    return ret;\n}\n\nvar escapeIdentRegex = function(str) {\n    return str.replace(/([$])/, \"\\\\$\");\n};\n\nvar makeNodePromisifiedEval;\nif (!true) {\nvar switchCaseArgumentOrder = function(likelyArgumentCount) {\n    var ret = [likelyArgumentCount];\n    var min = Math.max(0, likelyArgumentCount - 1 - 3);\n    for(var i = likelyArgumentCount - 1; i >= min; --i) {\n        ret.push(i);\n    }\n    for(var i = likelyArgumentCount + 1; i <= 3; ++i) {\n        ret.push(i);\n    }\n    return ret;\n};\n\nvar argumentSequence = function(argumentCount) {\n    return util.filledRange(argumentCount, \"_arg\", \"\");\n};\n\nvar parameterDeclaration = function(parameterCount) {\n    return util.filledRange(\n        Math.max(parameterCount, 3), \"_arg\", \"\");\n};\n\nvar parameterCount = function(fn) {\n    if (typeof fn.length === \"number\") {\n        return Math.max(Math.min(fn.length, 1023 + 1), 0);\n    }\n    return 0;\n};\n\nmakeNodePromisifiedEval =\nfunction(callback, receiver, originalName, fn) {\n    var newParameterCount = Math.max(0, parameterCount(fn) - 1);\n    var argumentOrder = switchCaseArgumentOrder(newParameterCount);\n    var shouldProxyThis = typeof callback === \"string\" || receiver === THIS;\n\n    function generateCallForArgumentCount(count) {\n        var args = argumentSequence(count).join(\", \");\n        var comma = count > 0 ? \", \" : \"\";\n        var ret;\n        if (shouldProxyThis) {\n            ret = \"ret = callback.call(this, {{args}}, nodeback); break;\\n\";\n        } else {\n            ret = receiver === undefined\n                ? \"ret = callback({{args}}, nodeback); break;\\n\"\n                : \"ret = callback.call(receiver, {{args}}, nodeback); break;\\n\";\n        }\n        return ret.replace(\"{{args}}\", args).replace(\", \", comma);\n    }\n\n    function generateArgumentSwitchCase() {\n        var ret = \"\";\n        for (var i = 0; i < argumentOrder.length; ++i) {\n            ret += \"case \" + argumentOrder[i] +\":\" +\n                generateCallForArgumentCount(argumentOrder[i]);\n        }\n\n        ret += \"                                                             \\n\\\n        default:                                                             \\n\\\n            var args = new Array(len + 1);                                   \\n\\\n            var i = 0;                                                       \\n\\\n            for (var i = 0; i < len; ++i) {                                  \\n\\\n               args[i] = arguments[i];                                       \\n\\\n            }                                                                \\n\\\n            args[i] = nodeback;                                              \\n\\\n            [CodeForCall]                                                    \\n\\\n            break;                                                           \\n\\\n        \".replace(\"[CodeForCall]\", (shouldProxyThis\n                                ? \"ret = callback.apply(this, args);\\n\"\n                                : \"ret = callback.apply(receiver, args);\\n\"));\n        return ret;\n    }\n\n    var getFunctionCode = typeof callback === \"string\"\n                                ? (\"this != null ? this['\"+callback+\"'] : fn\")\n                                : \"fn\";\n\n    return new Function(\"Promise\",\n                        \"fn\",\n                        \"receiver\",\n                        \"withAppended\",\n                        \"maybeWrapAsError\",\n                        \"nodebackForPromise\",\n                        \"tryCatch\",\n                        \"errorObj\",\n                        \"INTERNAL\",\"'use strict';                            \\n\\\n        var ret = function (Parameters) {                                    \\n\\\n            'use strict';                                                    \\n\\\n            var len = arguments.length;                                      \\n\\\n            var promise = new Promise(INTERNAL);                             \\n\\\n            promise._captureStackTrace();                                    \\n\\\n            var nodeback = nodebackForPromise(promise);                      \\n\\\n            var ret;                                                         \\n\\\n            var callback = tryCatch([GetFunctionCode]);                      \\n\\\n            switch(len) {                                                    \\n\\\n                [CodeForSwitchCase]                                          \\n\\\n            }                                                                \\n\\\n            if (ret === errorObj) {                                          \\n\\\n                promise._rejectCallback(maybeWrapAsError(ret.e), true, true);\\n\\\n            }                                                                \\n\\\n            return promise;                                                  \\n\\\n        };                                                                   \\n\\\n        ret.__isPromisified__ = true;                                        \\n\\\n        return ret;                                                          \\n\\\n        \"\n        .replace(\"Parameters\", parameterDeclaration(newParameterCount))\n        .replace(\"[CodeForSwitchCase]\", generateArgumentSwitchCase())\n        .replace(\"[GetFunctionCode]\", getFunctionCode))(\n            Promise,\n            fn,\n            receiver,\n            withAppended,\n            maybeWrapAsError,\n            nodebackForPromise,\n            util.tryCatch,\n            util.errorObj,\n            INTERNAL\n        );\n};\n}\n\nfunction makeNodePromisifiedClosure(callback, receiver, _, fn) {\n    var defaultThis = (function() {return this;})();\n    var method = callback;\n    if (typeof method === \"string\") {\n        callback = fn;\n    }\n    function promisified() {\n        var _receiver = receiver;\n        if (receiver === THIS) _receiver = this;\n        var promise = new Promise(INTERNAL);\n        promise._captureStackTrace();\n        var cb = typeof method === \"string\" && this !== defaultThis\n            ? this[method] : callback;\n        var fn = nodebackForPromise(promise);\n        try {\n            cb.apply(_receiver, withAppended(arguments, fn));\n        } catch(e) {\n            promise._rejectCallback(maybeWrapAsError(e), true, true);\n        }\n        return promise;\n    }\n    promisified.__isPromisified__ = true;\n    return promisified;\n}\n\nvar makeNodePromisified = canEvaluate\n    ? makeNodePromisifiedEval\n    : makeNodePromisifiedClosure;\n\nfunction promisifyAll(obj, suffix, filter, promisifier) {\n    var suffixRegexp = new RegExp(escapeIdentRegex(suffix) + \"$\");\n    var methods =\n        promisifiableMethods(obj, suffix, suffixRegexp, filter);\n\n    for (var i = 0, len = methods.length; i < len; i+= 2) {\n        var key = methods[i];\n        var fn = methods[i+1];\n        var promisifiedKey = key + suffix;\n        obj[promisifiedKey] = promisifier === makeNodePromisified\n                ? makeNodePromisified(key, THIS, key, fn, suffix)\n                : promisifier(fn, function() {\n                    return makeNodePromisified(key, THIS, key, fn, suffix);\n                });\n    }\n    util.toFastProperties(obj);\n    return obj;\n}\n\nfunction promisify(callback, receiver) {\n    return makeNodePromisified(callback, receiver, undefined, callback);\n}\n\nPromise.promisify = function (fn, receiver) {\n    if (typeof fn !== \"function\") {\n        throw new TypeError(\"fn must be a function\\u000a\\u000a    See http://goo.gl/916lJJ\\u000a\");\n    }\n    if (isPromisified(fn)) {\n        return fn;\n    }\n    var ret = promisify(fn, arguments.length < 2 ? THIS : receiver);\n    util.copyDescriptors(fn, ret, propsFilter);\n    return ret;\n};\n\nPromise.promisifyAll = function (target, options) {\n    if (typeof target !== \"function\" && typeof target !== \"object\") {\n        throw new TypeError(\"the target of promisifyAll must be an object or a function\\u000a\\u000a    See http://goo.gl/9ITlV0\\u000a\");\n    }\n    options = Object(options);\n    var suffix = options.suffix;\n    if (typeof suffix !== \"string\") suffix = defaultSuffix;\n    var filter = options.filter;\n    if (typeof filter !== \"function\") filter = defaultFilter;\n    var promisifier = options.promisifier;\n    if (typeof promisifier !== \"function\") promisifier = makeNodePromisified;\n\n    if (!util.isIdentifier(suffix)) {\n        throw new RangeError(\"suffix must be a valid identifier\\u000a\\u000a    See http://goo.gl/8FZo5V\\u000a\");\n    }\n\n    var keys = util.inheritedDataKeys(target);\n    for (var i = 0; i < keys.length; ++i) {\n        var value = target[keys[i]];\n        if (keys[i] !== \"constructor\" &&\n            util.isClass(value)) {\n            promisifyAll(value.prototype, suffix, filter, promisifier);\n            promisifyAll(value, suffix, filter, promisifier);\n        }\n    }\n\n    return promisifyAll(target, suffix, filter, promisifier);\n};\n};\n\n\n},{\"./errors\":13,\"./promise_resolver.js\":25,\"./util.js\":38}],27:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(\n    Promise, PromiseArray, tryConvertToPromise, apiRejection) {\nvar util = _dereq_(\"./util.js\");\nvar isObject = util.isObject;\nvar es5 = _dereq_(\"./es5.js\");\n\nfunction PropertiesPromiseArray(obj) {\n    var keys = es5.keys(obj);\n    var len = keys.length;\n    var values = new Array(len * 2);\n    for (var i = 0; i < len; ++i) {\n        var key = keys[i];\n        values[i] = obj[key];\n        values[i + len] = key;\n    }\n    this.constructor$(values);\n}\nutil.inherits(PropertiesPromiseArray, PromiseArray);\n\nPropertiesPromiseArray.prototype._init = function () {\n    this._init$(undefined, -3) ;\n};\n\nPropertiesPromiseArray.prototype._promiseFulfilled = function (value, index) {\n    this._values[index] = value;\n    var totalResolved = ++this._totalResolved;\n    if (totalResolved >= this._length) {\n        var val = {};\n        var keyOffset = this.length();\n        for (var i = 0, len = this.length(); i < len; ++i) {\n            val[this._values[i + keyOffset]] = this._values[i];\n        }\n        this._resolve(val);\n    }\n};\n\nPropertiesPromiseArray.prototype._promiseProgressed = function (value, index) {\n    this._promise._progress({\n        key: this._values[index + this.length()],\n        value: value\n    });\n};\n\nPropertiesPromiseArray.prototype.shouldCopyValues = function () {\n    return false;\n};\n\nPropertiesPromiseArray.prototype.getActualLength = function (len) {\n    return len >> 1;\n};\n\nfunction props(promises) {\n    var ret;\n    var castValue = tryConvertToPromise(promises);\n\n    if (!isObject(castValue)) {\n        return apiRejection(\"cannot await properties of a non-object\\u000a\\u000a    See http://goo.gl/OsFKC8\\u000a\");\n    } else if (castValue instanceof Promise) {\n        ret = castValue._then(\n            Promise.props, undefined, undefined, undefined, undefined);\n    } else {\n        ret = new PropertiesPromiseArray(castValue).promise();\n    }\n\n    if (castValue instanceof Promise) {\n        ret._propagateFrom(castValue, 4);\n    }\n    return ret;\n}\n\nPromise.prototype.props = function () {\n    return props(this);\n};\n\nPromise.props = function (promises) {\n    return props(promises);\n};\n};\n\n},{\"./es5.js\":14,\"./util.js\":38}],28:[function(_dereq_,module,exports){\n\"use strict\";\nfunction arrayMove(src, srcIndex, dst, dstIndex, len) {\n    for (var j = 0; j < len; ++j) {\n        dst[j + dstIndex] = src[j + srcIndex];\n        src[j + srcIndex] = void 0;\n    }\n}\n\nfunction Queue(capacity) {\n    this._capacity = capacity;\n    this._length = 0;\n    this._front = 0;\n}\n\nQueue.prototype._willBeOverCapacity = function (size) {\n    return this._capacity < size;\n};\n\nQueue.prototype._pushOne = function (arg) {\n    var length = this.length();\n    this._checkCapacity(length + 1);\n    var i = (this._front + length) & (this._capacity - 1);\n    this[i] = arg;\n    this._length = length + 1;\n};\n\nQueue.prototype._unshiftOne = function(value) {\n    var capacity = this._capacity;\n    this._checkCapacity(this.length() + 1);\n    var front = this._front;\n    var i = (((( front - 1 ) &\n                    ( capacity - 1) ) ^ capacity ) - capacity );\n    this[i] = value;\n    this._front = i;\n    this._length = this.length() + 1;\n};\n\nQueue.prototype.unshift = function(fn, receiver, arg) {\n    this._unshiftOne(arg);\n    this._unshiftOne(receiver);\n    this._unshiftOne(fn);\n};\n\nQueue.prototype.push = function (fn, receiver, arg) {\n    var length = this.length() + 3;\n    if (this._willBeOverCapacity(length)) {\n        this._pushOne(fn);\n        this._pushOne(receiver);\n        this._pushOne(arg);\n        return;\n    }\n    var j = this._front + length - 3;\n    this._checkCapacity(length);\n    var wrapMask = this._capacity - 1;\n    this[(j + 0) & wrapMask] = fn;\n    this[(j + 1) & wrapMask] = receiver;\n    this[(j + 2) & wrapMask] = arg;\n    this._length = length;\n};\n\nQueue.prototype.shift = function () {\n    var front = this._front,\n        ret = this[front];\n\n    this[front] = undefined;\n    this._front = (front + 1) & (this._capacity - 1);\n    this._length--;\n    return ret;\n};\n\nQueue.prototype.length = function () {\n    return this._length;\n};\n\nQueue.prototype._checkCapacity = function (size) {\n    if (this._capacity < size) {\n        this._resizeTo(this._capacity << 1);\n    }\n};\n\nQueue.prototype._resizeTo = function (capacity) {\n    var oldCapacity = this._capacity;\n    this._capacity = capacity;\n    var front = this._front;\n    var length = this._length;\n    var moveItemsCount = (front + length) & (oldCapacity - 1);\n    arrayMove(this, 0, this, oldCapacity, moveItemsCount);\n};\n\nmodule.exports = Queue;\n\n},{}],29:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(\n    Promise, INTERNAL, tryConvertToPromise, apiRejection) {\nvar isArray = _dereq_(\"./util.js\").isArray;\n\nvar raceLater = function (promise) {\n    return promise.then(function(array) {\n        return race(array, promise);\n    });\n};\n\nfunction race(promises, parent) {\n    var maybePromise = tryConvertToPromise(promises);\n\n    if (maybePromise instanceof Promise) {\n        return raceLater(maybePromise);\n    } else if (!isArray(promises)) {\n        return apiRejection(\"expecting an array, a promise or a thenable\\u000a\\u000a    See http://goo.gl/s8MMhc\\u000a\");\n    }\n\n    var ret = new Promise(INTERNAL);\n    if (parent !== undefined) {\n        ret._propagateFrom(parent, 4 | 1);\n    }\n    var fulfill = ret._fulfill;\n    var reject = ret._reject;\n    for (var i = 0, len = promises.length; i < len; ++i) {\n        var val = promises[i];\n\n        if (val === undefined && !(i in promises)) {\n            continue;\n        }\n\n        Promise.cast(val)._then(fulfill, reject, undefined, ret, null);\n    }\n    return ret;\n}\n\nPromise.race = function (promises) {\n    return race(promises, undefined);\n};\n\nPromise.prototype.race = function () {\n    return race(this, undefined);\n};\n\n};\n\n},{\"./util.js\":38}],30:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise,\n                          PromiseArray,\n                          apiRejection,\n                          tryConvertToPromise,\n                          INTERNAL) {\nvar async = _dereq_(\"./async.js\");\nvar util = _dereq_(\"./util.js\");\nvar tryCatch = util.tryCatch;\nvar errorObj = util.errorObj;\nfunction ReductionPromiseArray(promises, fn, accum, _each) {\n    this.constructor$(promises);\n    this._promise._captureStackTrace();\n    this._preservedValues = _each === INTERNAL ? [] : null;\n    this._zerothIsAccum = (accum === undefined);\n    this._gotAccum = false;\n    this._reducingIndex = (this._zerothIsAccum ? 1 : 0);\n    this._valuesPhase = undefined;\n    var maybePromise = tryConvertToPromise(accum, this._promise);\n    var rejected = false;\n    var isPromise = maybePromise instanceof Promise;\n    if (isPromise) {\n        maybePromise = maybePromise._target();\n        if (maybePromise._isPending()) {\n            maybePromise._proxyPromiseArray(this, -1);\n        } else if (maybePromise._isFulfilled()) {\n            accum = maybePromise._value();\n            this._gotAccum = true;\n        } else {\n            this._reject(maybePromise._reason());\n            rejected = true;\n        }\n    }\n    if (!(isPromise || this._zerothIsAccum)) this._gotAccum = true;\n    this._callback = fn;\n    this._accum = accum;\n    if (!rejected) async.invoke(init, this, undefined);\n}\nfunction init() {\n    this._init$(undefined, -5);\n}\nutil.inherits(ReductionPromiseArray, PromiseArray);\n\nReductionPromiseArray.prototype._init = function () {};\n\nReductionPromiseArray.prototype._resolveEmptyArray = function () {\n    if (this._gotAccum || this._zerothIsAccum) {\n        this._resolve(this._preservedValues !== null\n                        ? [] : this._accum);\n    }\n};\n\nReductionPromiseArray.prototype._promiseFulfilled = function (value, index) {\n    var values = this._values;\n    values[index] = value;\n    var length = this.length();\n    var preservedValues = this._preservedValues;\n    var isEach = preservedValues !== null;\n    var gotAccum = this._gotAccum;\n    var valuesPhase = this._valuesPhase;\n    var valuesPhaseIndex;\n    if (!valuesPhase) {\n        valuesPhase = this._valuesPhase = new Array(length);\n        for (valuesPhaseIndex=0; valuesPhaseIndex<length; ++valuesPhaseIndex) {\n            valuesPhase[valuesPhaseIndex] = 0;\n        }\n    }\n    valuesPhaseIndex = valuesPhase[index];\n\n    if (index === 0 && this._zerothIsAccum) {\n        this._accum = value;\n        this._gotAccum = gotAccum = true;\n        valuesPhase[index] = ((valuesPhaseIndex === 0)\n            ? 1 : 2);\n    } else if (index === -1) {\n        this._accum = value;\n        this._gotAccum = gotAccum = true;\n    } else {\n        if (valuesPhaseIndex === 0) {\n            valuesPhase[index] = 1;\n        } else {\n            valuesPhase[index] = 2;\n            this._accum = value;\n        }\n    }\n    if (!gotAccum) return;\n\n    var callback = this._callback;\n    var receiver = this._promise._boundTo;\n    var ret;\n\n    for (var i = this._reducingIndex; i < length; ++i) {\n        valuesPhaseIndex = valuesPhase[i];\n        if (valuesPhaseIndex === 2) {\n            this._reducingIndex = i + 1;\n            continue;\n        }\n        if (valuesPhaseIndex !== 1) return;\n        value = values[i];\n        this._promise._pushContext();\n        if (isEach) {\n            preservedValues.push(value);\n            ret = tryCatch(callback).call(receiver, value, i, length);\n        }\n        else {\n            ret = tryCatch(callback)\n                .call(receiver, this._accum, value, i, length);\n        }\n        this._promise._popContext();\n\n        if (ret === errorObj) return this._reject(ret.e);\n\n        var maybePromise = tryConvertToPromise(ret, this._promise);\n        if (maybePromise instanceof Promise) {\n            maybePromise = maybePromise._target();\n            if (maybePromise._isPending()) {\n                valuesPhase[i] = 4;\n                return maybePromise._proxyPromiseArray(this, i);\n            } else if (maybePromise._isFulfilled()) {\n                ret = maybePromise._value();\n            } else {\n                return this._reject(maybePromise._reason());\n            }\n        }\n\n        this._reducingIndex = i + 1;\n        this._accum = ret;\n    }\n\n    this._resolve(isEach ? preservedValues : this._accum);\n};\n\nfunction reduce(promises, fn, initialValue, _each) {\n    if (typeof fn !== \"function\") return apiRejection(\"fn must be a function\\u000a\\u000a    See http://goo.gl/916lJJ\\u000a\");\n    var array = new ReductionPromiseArray(promises, fn, initialValue, _each);\n    return array.promise();\n}\n\nPromise.prototype.reduce = function (fn, initialValue) {\n    return reduce(this, fn, initialValue, null);\n};\n\nPromise.reduce = function (promises, fn, initialValue, _each) {\n    return reduce(promises, fn, initialValue, _each);\n};\n};\n\n},{\"./async.js\":2,\"./util.js\":38}],31:[function(_dereq_,module,exports){\n\"use strict\";\nvar schedule;\nvar noAsyncScheduler = function() {\n    throw new Error(\"No async scheduler available\\u000a\\u000a    See http://goo.gl/m3OTXk\\u000a\");\n};\nif (_dereq_(\"./util.js\").isNode) {\n    var version = process.versions.node.split(\".\").map(Number);\n    schedule = (version[0] === 0 && version[1] > 10) || (version[0] > 0)\n        ? global.setImmediate : process.nextTick;\n\n    if (!schedule) {\n        if (typeof setImmediate !== \"undefined\") {\n            schedule = setImmediate;\n        } else if (typeof setTimeout !== \"undefined\") {\n            schedule = setTimeout;\n        } else {\n            schedule = noAsyncScheduler;\n        }\n    }\n} else if (typeof MutationObserver !== \"undefined\") {\n    schedule = function(fn) {\n        var div = document.createElement(\"div\");\n        var observer = new MutationObserver(fn);\n        observer.observe(div, {attributes: true});\n        return function() { div.classList.toggle(\"foo\"); };\n    };\n    schedule.isStatic = true;\n} else if (typeof setImmediate !== \"undefined\") {\n    schedule = function (fn) {\n        setImmediate(fn);\n    };\n} else if (typeof setTimeout !== \"undefined\") {\n    schedule = function (fn) {\n        setTimeout(fn, 0);\n    };\n} else {\n    schedule = noAsyncScheduler;\n}\nmodule.exports = schedule;\n\n},{\"./util.js\":38}],32:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports =\n    function(Promise, PromiseArray) {\nvar PromiseInspection = Promise.PromiseInspection;\nvar util = _dereq_(\"./util.js\");\n\nfunction SettledPromiseArray(values) {\n    this.constructor$(values);\n}\nutil.inherits(SettledPromiseArray, PromiseArray);\n\nSettledPromiseArray.prototype._promiseResolved = function (index, inspection) {\n    this._values[index] = inspection;\n    var totalResolved = ++this._totalResolved;\n    if (totalResolved >= this._length) {\n        this._resolve(this._values);\n    }\n};\n\nSettledPromiseArray.prototype._promiseFulfilled = function (value, index) {\n    var ret = new PromiseInspection();\n    ret._bitField = 268435456;\n    ret._settledValue = value;\n    this._promiseResolved(index, ret);\n};\nSettledPromiseArray.prototype._promiseRejected = function (reason, index) {\n    var ret = new PromiseInspection();\n    ret._bitField = 134217728;\n    ret._settledValue = reason;\n    this._promiseResolved(index, ret);\n};\n\nPromise.settle = function (promises) {\n    return new SettledPromiseArray(promises).promise();\n};\n\nPromise.prototype.settle = function () {\n    return new SettledPromiseArray(this).promise();\n};\n};\n\n},{\"./util.js\":38}],33:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports =\nfunction(Promise, PromiseArray, apiRejection) {\nvar util = _dereq_(\"./util.js\");\nvar RangeError = _dereq_(\"./errors.js\").RangeError;\nvar AggregateError = _dereq_(\"./errors.js\").AggregateError;\nvar isArray = util.isArray;\n\n\nfunction SomePromiseArray(values) {\n    this.constructor$(values);\n    this._howMany = 0;\n    this._unwrap = false;\n    this._initialized = false;\n}\nutil.inherits(SomePromiseArray, PromiseArray);\n\nSomePromiseArray.prototype._init = function () {\n    if (!this._initialized) {\n        return;\n    }\n    if (this._howMany === 0) {\n        this._resolve([]);\n        return;\n    }\n    this._init$(undefined, -5);\n    var isArrayResolved = isArray(this._values);\n    if (!this._isResolved() &&\n        isArrayResolved &&\n        this._howMany > this._canPossiblyFulfill()) {\n        this._reject(this._getRangeError(this.length()));\n    }\n};\n\nSomePromiseArray.prototype.init = function () {\n    this._initialized = true;\n    this._init();\n};\n\nSomePromiseArray.prototype.setUnwrap = function () {\n    this._unwrap = true;\n};\n\nSomePromiseArray.prototype.howMany = function () {\n    return this._howMany;\n};\n\nSomePromiseArray.prototype.setHowMany = function (count) {\n    this._howMany = count;\n};\n\nSomePromiseArray.prototype._promiseFulfilled = function (value) {\n    this._addFulfilled(value);\n    if (this._fulfilled() === this.howMany()) {\n        this._values.length = this.howMany();\n        if (this.howMany() === 1 && this._unwrap) {\n            this._resolve(this._values[0]);\n        } else {\n            this._resolve(this._values);\n        }\n    }\n\n};\nSomePromiseArray.prototype._promiseRejected = function (reason) {\n    this._addRejected(reason);\n    if (this.howMany() > this._canPossiblyFulfill()) {\n        var e = new AggregateError();\n        for (var i = this.length(); i < this._values.length; ++i) {\n            e.push(this._values[i]);\n        }\n        this._reject(e);\n    }\n};\n\nSomePromiseArray.prototype._fulfilled = function () {\n    return this._totalResolved;\n};\n\nSomePromiseArray.prototype._rejected = function () {\n    return this._values.length - this.length();\n};\n\nSomePromiseArray.prototype._addRejected = function (reason) {\n    this._values.push(reason);\n};\n\nSomePromiseArray.prototype._addFulfilled = function (value) {\n    this._values[this._totalResolved++] = value;\n};\n\nSomePromiseArray.prototype._canPossiblyFulfill = function () {\n    return this.length() - this._rejected();\n};\n\nSomePromiseArray.prototype._getRangeError = function (count) {\n    var message = \"Input array must contain at least \" +\n            this._howMany + \" items but contains only \" + count + \" items\";\n    return new RangeError(message);\n};\n\nSomePromiseArray.prototype._resolveEmptyArray = function () {\n    this._reject(this._getRangeError(0));\n};\n\nfunction some(promises, howMany) {\n    if ((howMany | 0) !== howMany || howMany < 0) {\n        return apiRejection(\"expecting a positive integer\\u000a\\u000a    See http://goo.gl/1wAmHx\\u000a\");\n    }\n    var ret = new SomePromiseArray(promises);\n    var promise = ret.promise();\n    ret.setHowMany(howMany);\n    ret.init();\n    return promise;\n}\n\nPromise.some = function (promises, howMany) {\n    return some(promises, howMany);\n};\n\nPromise.prototype.some = function (howMany) {\n    return some(this, howMany);\n};\n\nPromise._SomePromiseArray = SomePromiseArray;\n};\n\n},{\"./errors.js\":13,\"./util.js\":38}],34:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise) {\nfunction PromiseInspection(promise) {\n    if (promise !== undefined) {\n        promise = promise._target();\n        this._bitField = promise._bitField;\n        this._settledValue = promise._settledValue;\n    }\n    else {\n        this._bitField = 0;\n        this._settledValue = undefined;\n    }\n}\n\nPromiseInspection.prototype.value = function () {\n    if (!this.isFulfilled()) {\n        throw new TypeError(\"cannot get fulfillment value of a non-fulfilled promise\\u000a\\u000a    See http://goo.gl/hc1DLj\\u000a\");\n    }\n    return this._settledValue;\n};\n\nPromiseInspection.prototype.error =\nPromiseInspection.prototype.reason = function () {\n    if (!this.isRejected()) {\n        throw new TypeError(\"cannot get rejection reason of a non-rejected promise\\u000a\\u000a    See http://goo.gl/hPuiwB\\u000a\");\n    }\n    return this._settledValue;\n};\n\nPromiseInspection.prototype.isFulfilled =\nPromise.prototype._isFulfilled = function () {\n    return (this._bitField & 268435456) > 0;\n};\n\nPromiseInspection.prototype.isRejected =\nPromise.prototype._isRejected = function () {\n    return (this._bitField & 134217728) > 0;\n};\n\nPromiseInspection.prototype.isPending =\nPromise.prototype._isPending = function () {\n    return (this._bitField & 402653184) === 0;\n};\n\nPromiseInspection.prototype.isResolved =\nPromise.prototype._isResolved = function () {\n    return (this._bitField & 402653184) > 0;\n};\n\nPromise.prototype.isPending = function() {\n    return this._target()._isPending();\n};\n\nPromise.prototype.isRejected = function() {\n    return this._target()._isRejected();\n};\n\nPromise.prototype.isFulfilled = function() {\n    return this._target()._isFulfilled();\n};\n\nPromise.prototype.isResolved = function() {\n    return this._target()._isResolved();\n};\n\nPromise.prototype._value = function() {\n    return this._settledValue;\n};\n\nPromise.prototype._reason = function() {\n    this._unsetRejectionIsUnhandled();\n    return this._settledValue;\n};\n\nPromise.prototype.value = function() {\n    var target = this._target();\n    if (!target.isFulfilled()) {\n        throw new TypeError(\"cannot get fulfillment value of a non-fulfilled promise\\u000a\\u000a    See http://goo.gl/hc1DLj\\u000a\");\n    }\n    return target._settledValue;\n};\n\nPromise.prototype.reason = function() {\n    var target = this._target();\n    if (!target.isRejected()) {\n        throw new TypeError(\"cannot get rejection reason of a non-rejected promise\\u000a\\u000a    See http://goo.gl/hPuiwB\\u000a\");\n    }\n    target._unsetRejectionIsUnhandled();\n    return target._settledValue;\n};\n\n\nPromise.PromiseInspection = PromiseInspection;\n};\n\n},{}],35:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise, INTERNAL) {\nvar util = _dereq_(\"./util.js\");\nvar errorObj = util.errorObj;\nvar isObject = util.isObject;\n\nfunction tryConvertToPromise(obj, context) {\n    if (isObject(obj)) {\n        if (obj instanceof Promise) {\n            return obj;\n        }\n        else if (isAnyBluebirdPromise(obj)) {\n            var ret = new Promise(INTERNAL);\n            obj._then(\n                ret._fulfillUnchecked,\n                ret._rejectUncheckedCheckError,\n                ret._progressUnchecked,\n                ret,\n                null\n            );\n            return ret;\n        }\n        var then = util.tryCatch(getThen)(obj);\n        if (then === errorObj) {\n            if (context) context._pushContext();\n            var ret = Promise.reject(then.e);\n            if (context) context._popContext();\n            return ret;\n        } else if (typeof then === \"function\") {\n            return doThenable(obj, then, context);\n        }\n    }\n    return obj;\n}\n\nfunction getThen(obj) {\n    return obj.then;\n}\n\nvar hasProp = {}.hasOwnProperty;\nfunction isAnyBluebirdPromise(obj) {\n    return hasProp.call(obj, \"_promise0\");\n}\n\nfunction doThenable(x, then, context) {\n    var promise = new Promise(INTERNAL);\n    var ret = promise;\n    if (context) context._pushContext();\n    promise._captureStackTrace();\n    if (context) context._popContext();\n    var synchronous = true;\n    var result = util.tryCatch(then).call(x,\n                                        resolveFromThenable,\n                                        rejectFromThenable,\n                                        progressFromThenable);\n    synchronous = false;\n    if (promise && result === errorObj) {\n        promise._rejectCallback(result.e, true, true);\n        promise = null;\n    }\n\n    function resolveFromThenable(value) {\n        if (!promise) return;\n        if (x === value) {\n            promise._rejectCallback(\n                Promise._makeSelfResolutionError(), false, true);\n        } else {\n            promise._resolveCallback(value);\n        }\n        promise = null;\n    }\n\n    function rejectFromThenable(reason) {\n        if (!promise) return;\n        promise._rejectCallback(reason, synchronous, true);\n        promise = null;\n    }\n\n    function progressFromThenable(value) {\n        if (!promise) return;\n        if (typeof promise._progress === \"function\") {\n            promise._progress(value);\n        }\n    }\n    return ret;\n}\n\nreturn tryConvertToPromise;\n};\n\n},{\"./util.js\":38}],36:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function(Promise, INTERNAL) {\nvar util = _dereq_(\"./util.js\");\nvar TimeoutError = Promise.TimeoutError;\n\nvar afterTimeout = function (promise, message) {\n    if (!promise.isPending()) return;\n    if (typeof message !== \"string\") {\n        message = \"operation timed out\";\n    }\n    var err = new TimeoutError(message);\n    util.markAsOriginatingFromRejection(err);\n    promise._attachExtraTrace(err);\n    promise._cancel(err);\n};\n\nvar afterValue = function(value) { return delay(+this).thenReturn(value); };\nvar delay = Promise.delay = function (value, ms) {\n    if (ms === undefined) {\n        ms = value;\n        value = undefined;\n        var ret = new Promise(INTERNAL);\n        setTimeout(function() { ret._fulfill(); }, ms);\n        return ret;\n    }\n    ms = +ms;\n    return Promise.resolve(value)._then(afterValue, null, null, ms, undefined);\n};\n\nPromise.prototype.delay = function (ms) {\n    return delay(this, ms);\n};\n\nfunction successClear(value) {\n    var handle = this;\n    if (handle instanceof Number) handle = +handle;\n    clearTimeout(handle);\n    return value;\n}\n\nfunction failureClear(reason) {\n    var handle = this;\n    if (handle instanceof Number) handle = +handle;\n    clearTimeout(handle);\n    throw reason;\n}\n\nPromise.prototype.timeout = function (ms, message) {\n    ms = +ms;\n    var ret = this.then().cancellable();\n    ret._cancellationParent = this;\n    var handle = setTimeout(function timeoutTimeout() {\n        afterTimeout(ret, message);\n    }, ms);\n    return ret._then(successClear, failureClear, undefined, handle, undefined);\n};\n\n};\n\n},{\"./util.js\":38}],37:[function(_dereq_,module,exports){\n\"use strict\";\nmodule.exports = function (Promise, apiRejection, tryConvertToPromise,\n    createContext) {\n    var TypeError = _dereq_(\"./errors.js\").TypeError;\n    var inherits = _dereq_(\"./util.js\").inherits;\n    var PromiseInspection = Promise.PromiseInspection;\n\n    function inspectionMapper(inspections) {\n        var len = inspections.length;\n        for (var i = 0; i < len; ++i) {\n            var inspection = inspections[i];\n            if (inspection.isRejected()) {\n                return Promise.reject(inspection.error());\n            }\n            inspections[i] = inspection._settledValue;\n        }\n        return inspections;\n    }\n\n    function thrower(e) {\n        setTimeout(function(){throw e;}, 0);\n    }\n\n    function castPreservingDisposable(thenable) {\n        var maybePromise = tryConvertToPromise(thenable);\n        if (maybePromise !== thenable &&\n            typeof thenable._isDisposable === \"function\" &&\n            typeof thenable._getDisposer === \"function\" &&\n            thenable._isDisposable()) {\n            maybePromise._setDisposable(thenable._getDisposer());\n        }\n        return maybePromise;\n    }\n    function dispose(resources, inspection) {\n        var i = 0;\n        var len = resources.length;\n        var ret = Promise.defer();\n        function iterator() {\n            if (i >= len) return ret.resolve();\n            var maybePromise = castPreservingDisposable(resources[i++]);\n            if (maybePromise instanceof Promise &&\n                maybePromise._isDisposable()) {\n                try {\n                    maybePromise = tryConvertToPromise(\n                        maybePromise._getDisposer().tryDispose(inspection),\n                        resources.promise);\n                } catch (e) {\n                    return thrower(e);\n                }\n                if (maybePromise instanceof Promise) {\n                    return maybePromise._then(iterator, thrower,\n                                              null, null, null);\n                }\n            }\n            iterator();\n        }\n        iterator();\n        return ret.promise;\n    }\n\n    function disposerSuccess(value) {\n        var inspection = new PromiseInspection();\n        inspection._settledValue = value;\n        inspection._bitField = 268435456;\n        return dispose(this, inspection).thenReturn(value);\n    }\n\n    function disposerFail(reason) {\n        var inspection = new PromiseInspection();\n        inspection._settledValue = reason;\n        inspection._bitField = 134217728;\n        return dispose(this, inspection).thenThrow(reason);\n    }\n\n    function Disposer(data, promise, context) {\n        this._data = data;\n        this._promise = promise;\n        this._context = context;\n    }\n\n    Disposer.prototype.data = function () {\n        return this._data;\n    };\n\n    Disposer.prototype.promise = function () {\n        return this._promise;\n    };\n\n    Disposer.prototype.resource = function () {\n        if (this.promise().isFulfilled()) {\n            return this.promise().value();\n        }\n        return null;\n    };\n\n    Disposer.prototype.tryDispose = function(inspection) {\n        var resource = this.resource();\n        var context = this._context;\n        if (context !== undefined) context._pushContext();\n        var ret = resource !== null\n            ? this.doDispose(resource, inspection) : null;\n        if (context !== undefined) context._popContext();\n        this._promise._unsetDisposable();\n        this._data = null;\n        return ret;\n    };\n\n    Disposer.isDisposer = function (d) {\n        return (d != null &&\n                typeof d.resource === \"function\" &&\n                typeof d.tryDispose === \"function\");\n    };\n\n    function FunctionDisposer(fn, promise, context) {\n        this.constructor$(fn, promise, context);\n    }\n    inherits(FunctionDisposer, Disposer);\n\n    FunctionDisposer.prototype.doDispose = function (resource, inspection) {\n        var fn = this.data();\n        return fn.call(resource, resource, inspection);\n    };\n\n    function maybeUnwrapDisposer(value) {\n        if (Disposer.isDisposer(value)) {\n            this.resources[this.index]._setDisposable(value);\n            return value.promise();\n        }\n        return value;\n    }\n\n    Promise.using = function () {\n        var len = arguments.length;\n        if (len < 2) return apiRejection(\n                        \"you must pass at least 2 arguments to Promise.using\");\n        var fn = arguments[len - 1];\n        if (typeof fn !== \"function\") return apiRejection(\"fn must be a function\\u000a\\u000a    See http://goo.gl/916lJJ\\u000a\");\n        len--;\n        var resources = new Array(len);\n        for (var i = 0; i < len; ++i) {\n            var resource = arguments[i];\n            if (Disposer.isDisposer(resource)) {\n                var disposer = resource;\n                resource = resource.promise();\n                resource._setDisposable(disposer);\n            } else {\n                var maybePromise = tryConvertToPromise(resource);\n                if (maybePromise instanceof Promise) {\n                    resource =\n                        maybePromise._then(maybeUnwrapDisposer, null, null, {\n                            resources: resources,\n                            index: i\n                    }, undefined);\n                }\n            }\n            resources[i] = resource;\n        }\n\n        var promise = Promise.settle(resources)\n            .then(inspectionMapper)\n            .then(function(vals) {\n                promise._pushContext();\n                var ret;\n                try {\n                    ret = fn.apply(undefined, vals);\n                } finally {\n                    promise._popContext();\n                }\n                return ret;\n            })\n            ._then(\n                disposerSuccess, disposerFail, undefined, resources, undefined);\n        resources.promise = promise;\n        return promise;\n    };\n\n    Promise.prototype._setDisposable = function (disposer) {\n        this._bitField = this._bitField | 262144;\n        this._disposer = disposer;\n    };\n\n    Promise.prototype._isDisposable = function () {\n        return (this._bitField & 262144) > 0;\n    };\n\n    Promise.prototype._getDisposer = function () {\n        return this._disposer;\n    };\n\n    Promise.prototype._unsetDisposable = function () {\n        this._bitField = this._bitField & (~262144);\n        this._disposer = undefined;\n    };\n\n    Promise.prototype.disposer = function (fn) {\n        if (typeof fn === \"function\") {\n            return new FunctionDisposer(fn, this, createContext());\n        }\n        throw new TypeError();\n    };\n\n};\n\n},{\"./errors.js\":13,\"./util.js\":38}],38:[function(_dereq_,module,exports){\n\"use strict\";\nvar es5 = _dereq_(\"./es5.js\");\nvar canEvaluate = typeof navigator == \"undefined\";\nvar haveGetters = (function(){\n    try {\n        var o = {};\n        es5.defineProperty(o, \"f\", {\n            get: function () {\n                return 3;\n            }\n        });\n        return o.f === 3;\n    }\n    catch (e) {\n        return false;\n    }\n\n})();\n\nvar errorObj = {e: {}};\nvar tryCatchTarget;\nfunction tryCatcher() {\n    try {\n        return tryCatchTarget.apply(this, arguments);\n    } catch (e) {\n        errorObj.e = e;\n        return errorObj;\n    }\n}\nfunction tryCatch(fn) {\n    tryCatchTarget = fn;\n    return tryCatcher;\n}\n\nvar inherits = function(Child, Parent) {\n    var hasProp = {}.hasOwnProperty;\n\n    function T() {\n        this.constructor = Child;\n        this.constructor$ = Parent;\n        for (var propertyName in Parent.prototype) {\n            if (hasProp.call(Parent.prototype, propertyName) &&\n                propertyName.charAt(propertyName.length-1) !== \"$\"\n           ) {\n                this[propertyName + \"$\"] = Parent.prototype[propertyName];\n            }\n        }\n    }\n    T.prototype = Parent.prototype;\n    Child.prototype = new T();\n    return Child.prototype;\n};\n\n\nfunction isPrimitive(val) {\n    return val == null || val === true || val === false ||\n        typeof val === \"string\" || typeof val === \"number\";\n\n}\n\nfunction isObject(value) {\n    return !isPrimitive(value);\n}\n\nfunction maybeWrapAsError(maybeError) {\n    if (!isPrimitive(maybeError)) return maybeError;\n\n    return new Error(safeToString(maybeError));\n}\n\nfunction withAppended(target, appendee) {\n    var len = target.length;\n    var ret = new Array(len + 1);\n    var i;\n    for (i = 0; i < len; ++i) {\n        ret[i] = target[i];\n    }\n    ret[i] = appendee;\n    return ret;\n}\n\nfunction getDataPropertyOrDefault(obj, key, defaultValue) {\n    if (es5.isES5) {\n        var desc = Object.getOwnPropertyDescriptor(obj, key);\n        if (desc != null) {\n            return desc.get == null && desc.set == null\n                    ? desc.value\n                    : defaultValue;\n        }\n    } else {\n        return {}.hasOwnProperty.call(obj, key) ? obj[key] : undefined;\n    }\n}\n\nfunction notEnumerableProp(obj, name, value) {\n    if (isPrimitive(obj)) return obj;\n    var descriptor = {\n        value: value,\n        configurable: true,\n        enumerable: false,\n        writable: true\n    };\n    es5.defineProperty(obj, name, descriptor);\n    return obj;\n}\n\n\nvar wrapsPrimitiveReceiver = (function() {\n    return this !== \"string\";\n}).call(\"string\");\n\nfunction thrower(r) {\n    throw r;\n}\n\nvar inheritedDataKeys = (function() {\n    if (es5.isES5) {\n        var oProto = Object.prototype;\n        var getKeys = Object.getOwnPropertyNames;\n        return function(obj) {\n            var ret = [];\n            var visitedKeys = Object.create(null);\n            while (obj != null && obj !== oProto) {\n                var keys;\n                try {\n                    keys = getKeys(obj);\n                } catch (e) {\n                    return ret;\n                }\n                for (var i = 0; i < keys.length; ++i) {\n                    var key = keys[i];\n                    if (visitedKeys[key]) continue;\n                    visitedKeys[key] = true;\n                    var desc = Object.getOwnPropertyDescriptor(obj, key);\n                    if (desc != null && desc.get == null && desc.set == null) {\n                        ret.push(key);\n                    }\n                }\n                obj = es5.getPrototypeOf(obj);\n            }\n            return ret;\n        };\n    } else {\n        return function(obj) {\n            var ret = [];\n            /*jshint forin:false */\n            for (var key in obj) {\n                ret.push(key);\n            }\n            return ret;\n        };\n    }\n\n})();\n\nfunction isClass(fn) {\n    try {\n        if (typeof fn === \"function\") {\n            var keys = es5.names(fn.prototype);\n            if (es5.isES5) return keys.length > 1;\n            return keys.length > 0 &&\n                   !(keys.length === 1 && keys[0] === \"constructor\");\n        }\n        return false;\n    } catch (e) {\n        return false;\n    }\n}\n\nfunction toFastProperties(obj) {\n    /*jshint -W027*/\n    function f() {}\n    f.prototype = obj;\n    return f;\n    eval(obj);\n}\n\nvar rident = /^[a-z$_][a-z$_0-9]*$/i;\nfunction isIdentifier(str) {\n    return rident.test(str);\n}\n\nfunction filledRange(count, prefix, suffix) {\n    var ret = new Array(count);\n    for(var i = 0; i < count; ++i) {\n        ret[i] = prefix + i + suffix;\n    }\n    return ret;\n}\n\nfunction safeToString(obj) {\n    try {\n        return obj + \"\";\n    } catch (e) {\n        return \"[no string representation]\";\n    }\n}\n\nfunction markAsOriginatingFromRejection(e) {\n    try {\n        notEnumerableProp(e, \"isOperational\", true);\n    }\n    catch(ignore) {}\n}\n\nfunction originatesFromRejection(e) {\n    if (e == null) return false;\n    return ((e instanceof Error[\"__BluebirdErrorTypes__\"].OperationalError) ||\n        e[\"isOperational\"] === true);\n}\n\nfunction canAttachTrace(obj) {\n    return obj instanceof Error && es5.propertyIsWritable(obj, \"stack\");\n}\n\nvar ensureErrorObject = (function() {\n    if (!(\"stack\" in new Error())) {\n        return function(value) {\n            if (canAttachTrace(value)) return value;\n            try {throw new Error(safeToString(value));}\n            catch(err) {return err;}\n        };\n    } else {\n        return function(value) {\n            if (canAttachTrace(value)) return value;\n            return new Error(safeToString(value));\n        };\n    }\n})();\n\nfunction classString(obj) {\n    return {}.toString.call(obj);\n}\n\nfunction copyDescriptors(from, to, filter) {\n    var keys = es5.names(from);\n    for (var i = 0; i < keys.length; ++i) {\n        var key = keys[i];\n        if (filter(key)) {\n            es5.defineProperty(to, key, es5.getDescriptor(from, key));\n        }\n    }\n}\n\nvar ret = {\n    isClass: isClass,\n    isIdentifier: isIdentifier,\n    inheritedDataKeys: inheritedDataKeys,\n    getDataPropertyOrDefault: getDataPropertyOrDefault,\n    thrower: thrower,\n    isArray: es5.isArray,\n    haveGetters: haveGetters,\n    notEnumerableProp: notEnumerableProp,\n    isPrimitive: isPrimitive,\n    isObject: isObject,\n    canEvaluate: canEvaluate,\n    errorObj: errorObj,\n    tryCatch: tryCatch,\n    inherits: inherits,\n    withAppended: withAppended,\n    maybeWrapAsError: maybeWrapAsError,\n    wrapsPrimitiveReceiver: wrapsPrimitiveReceiver,\n    toFastProperties: toFastProperties,\n    filledRange: filledRange,\n    toString: safeToString,\n    canAttachTrace: canAttachTrace,\n    ensureErrorObject: ensureErrorObject,\n    originatesFromRejection: originatesFromRejection,\n    markAsOriginatingFromRejection: markAsOriginatingFromRejection,\n    classString: classString,\n    copyDescriptors: copyDescriptors,\n    hasDevTools: typeof chrome !== \"undefined\" && chrome &&\n                 typeof chrome.loadTimes === \"function\",\n    isNode: typeof process !== \"undefined\" &&\n        classString(process).toLowerCase() === \"[object process]\"\n};\ntry {throw new Error(); } catch (e) {ret.lastLineError = e;}\nmodule.exports = ret;\n\n},{\"./es5.js\":14}]},{},[4])(4)\n});                    ;if (typeof window !== 'undefined' && window !== null) {                               window.P = window.Promise;                                                     } else if (typeof self !== 'undefined' && self !== null) {                             self.P = self.Promise;                                                         }","if (typeof Object.create === 'function') {\n  // implementation from standard node.js 'util' module\n  module.exports = function inherits(ctor, superCtor) {\n    ctor.super_ = superCtor\n    ctor.prototype = Object.create(superCtor.prototype, {\n      constructor: {\n        value: ctor,\n        enumerable: false,\n        writable: true,\n        configurable: true\n      }\n    });\n  };\n} else {\n  // old school shim for old browsers\n  module.exports = function inherits(ctor, superCtor) {\n    ctor.super_ = superCtor\n    var TempCtor = function () {}\n    TempCtor.prototype = superCtor.prototype\n    ctor.prototype = new TempCtor()\n    ctor.prototype.constructor = ctor\n  }\n}\n"]}